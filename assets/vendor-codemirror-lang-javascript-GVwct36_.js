import{p as e}from"./vendor-lezer-javascript-DQFFX--0.js";import{L as t,d as n,f as r,e as o,h as a,j as l,k as i,n as s,o as c,c as f,s as p}from"./vendor-codemirror-language-C3hkV707.js";import{E as u}from"./vendor-codemirror-state-D88w-V9V.js";import{E as m}from"./vendor-codemirror-view-DVzN21hM.js";import{s as d,i as y,c as b}from"./vendor-codemirror-autocomplete-BSg-hdYo.js";import{a as $,I as g}from"./vendor-lezer-common-QPiu6Hcj.js";import"./vendor-lezer-lr-CZr-wB1l.js";import"./vendor-lezer-highlight-4-fykoed.js";import"./vendor-style-mod-tLAqh-pC.js";import"./vendor-marijn-find-cluster-break-BFVNO93u.js";import"./vendor-w3c-keyname-BorKtCV5.js";const S=[d("function ${name}(${params}) {\n\t${}\n}",{label:"function",detail:"definition",type:"keyword"}),d("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n\t${}\n}",{label:"for",detail:"loop",type:"keyword"}),d("for (let ${name} of ${collection}) {\n\t${}\n}",{label:"for",detail:"of loop",type:"keyword"}),d("do {\n\t${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),d("while (${}) {\n\t${}\n}",{label:"while",detail:"loop",type:"keyword"}),d("try {\n\t${}\n} catch (${error}) {\n\t${}\n}",{label:"try",detail:"/ catch block",type:"keyword"}),d("if (${}) {\n\t${}\n}",{label:"if",detail:"block",type:"keyword"}),d("if (${}) {\n\t${}\n} else {\n\t${}\n}",{label:"if",detail:"/ else block",type:"keyword"}),d("class ${name} {\n\tconstructor(${params}) {\n\t\t${}\n\t}\n}",{label:"class",detail:"definition",type:"keyword"}),d('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),d('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],v=S.concat([d("interface ${name} {\n\t${}\n}",{label:"interface",detail:"definition",type:"keyword"}),d("type ${name} = ${type}",{label:"type",detail:"definition",type:"keyword"}),d("enum ${name} {\n\t${}\n}",{label:"enum",detail:"definition",type:"keyword"})]),w=new $,k=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function h(e){return(t,n)=>{let r=t.node.getChild("VariableDefinition");return r&&n(r,e),!0}}const x=["FunctionDeclaration"],T={FunctionDeclaration:h("function"),ClassDeclaration:h("class"),ClassExpression:()=>!0,EnumDeclaration:h("constant"),TypeAliasDeclaration:h("type"),NamespaceDeclaration:h("namespace"),VariableDefinition(e,t){e.matchContext(x)||t(e,"variable")},TypeDefinition(e,t){t(e,"type")},__proto__:null};function J(e,t){let n=w.get(t);if(n)return n;let r=[],o=!0;function a(t,n){let o=e.sliceString(t.from,t.to);r.push({label:o,type:n})}return t.cursor(g.IncludeAnonymous).iterate(t=>{if(o)o=!1;else if(t.name){let e=T[t.name];if(e&&e(t,a)||k.has(t.name))return!1}else if(t.to-t.from>8192){for(let n of J(e,t.node))r.push(n);return!1}}),w.set(t,r),r}const X=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,j=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName","JSXText","JSXAttributeValue","JSXOpenTag","JSXCloseTag","JSXSelfClosingTag",".","?."];function E(e){let t=p(e.state).resolveInner(e.pos,-1);if(j.indexOf(t.name)>-1)return null;let n="VariableName"==t.name||t.to-t.from<20&&X.test(e.state.sliceDoc(t.from,t.to));if(!n&&!e.explicit)return null;let r=[];for(let o=t;o;o=o.parent)k.has(o.name)&&(r=r.concat(J(e.state.doc,o)));return{options:r,from:n?t.from:e.pos,validFor:X}}function D(e,t,n){var r;let o=[];for(;;){let a,l=t.firstChild;if("VariableName"==(null==l?void 0:l.name))return o.push(e(l)),{path:o.reverse(),name:n};if("MemberExpression"!=(null==l?void 0:l.name)||"PropertyName"!=(null===(r=a=l.lastChild)||void 0===r?void 0:r.name))return null;o.push(e(a)),t=l}}function C(e){let t=t=>e.state.doc.sliceString(t.from,t.to),n=p(e.state).resolveInner(e.pos,-1);return"PropertyName"==n.name?D(t,n.parent,t(n)):"."!=n.name&&"?."!=n.name||"MemberExpression"!=n.parent.name?j.indexOf(n.name)>-1?null:"VariableName"==n.name||n.to-n.from<20&&X.test(t(n))?{path:[],name:t(n)}:"MemberExpression"==n.name?D(t,n,""):e.explicit?{path:[],name:""}:null:D(t,n.parent,"")}function B(e){let t=new Map;return n=>{let r=C(n);if(!r)return null;let o=e;for(let e of r.path)if(o=o[e],!o)return null;let a=t.get(o);return a||t.set(o,a=function(e,t){let n=[],r=new Set;for(let a=0;;a++){for(let i of(Object.getOwnPropertyNames||Object.keys)(e)){if(!/^[a-zA-Z_$\xaa-\uffdc][\w$\xaa-\uffdc]*$/.test(i)||r.has(i))continue;let l;r.add(i);try{l=e[i]}catch(o){continue}n.push({label:i,type:"function"==typeof l?/^[A-Z]/.test(i)?"class":t?"function":"method":t?"variable":"property",boost:-a})}let l=Object.getPrototypeOf(e);if(!l)return n;e=l}}(o,!r.path.length)),{from:n.pos-r.name.length,options:a,validFor:X}}}const F=t.define({name:"javascript",parser:e.configure({props:[n.add({IfStatement:o({except:/^\s*({|else\b)/}),TryStatement:o({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:l,SwitchBody:e=>{let t=e.textAfter,n=/^\s*\}/.test(t),r=/^\s*(case|default)\b/.test(t);return e.baseIndent+(n?0:r?1:2)*e.unit},Block:a({closing:"}"}),ArrowFunction:e=>e.baseIndent+e.unit,"TemplateString BlockComment":()=>null,"Statement Property":o({except:/^\s*{/}),JSXElement(e){let t=/^\s*<\//.test(e.textAfter);return e.lineIndent(e.node.from)+(t?0:e.unit)},JSXEscape(e){let t=/\s*\}/.test(e.textAfter);return e.lineIndent(e.node.from)+(t?0:e.unit)},"JSXOpenTag JSXSelfClosingTag":e=>e.column(e.node.from)+e.unit}),r.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression ObjectType":i,BlockComment:e=>({from:e.from+2,to:e.to-2})})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),V={test:e=>/^JSX/.test(e.name),facet:c({commentTokens:{block:{open:"{/*",close:"*/}"}}})},O=F.configure({dialect:"ts"},"typescript"),N=F.configure({dialect:"jsx",props:[s.add(e=>e.isTop?[V]:void 0)]}),A=F.configure({dialect:"jsx ts",props:[s.add(e=>e.isTop?[V]:void 0)]},"typescript");let P=e=>({label:e,type:"keyword"});const M="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(P),I=M.concat(["declare","implements","private","protected","public"].map(P));function z(e={}){let t=e.jsx?e.typescript?A:N:e.typescript?O:F,n=e.typescript?v.concat(I):S.concat(M);return new f(t,[F.data.of({autocomplete:y(j,b(n))}),F.data.of({autocomplete:E}),e.jsx?Z:[]])}function _(e,t,n=e.length){for(let r=null==t?void 0:t.firstChild;r;r=r.nextSibling)if("JSXIdentifier"==r.name||"JSXBuiltin"==r.name||"JSXNamespacedName"==r.name||"JSXMemberExpression"==r.name)return e.sliceString(r.from,Math.min(r.to,n));return""}const L="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),Z=m.inputHandler.of((e,t,n,r,o)=>{if((L?e.composing:e.compositionStarted)||e.state.readOnly||t!=n||">"!=r&&"/"!=r||!F.isActiveAt(e.state,t,-1))return!1;let a=o(),{state:l}=a,i=l.changeByRange(e=>{var t;let n,{head:o}=e,a=p(l).resolveInner(o-1,-1);if("JSXStartTag"==a.name&&(a=a.parent),l.doc.sliceString(o-1,o)!=r||"JSXAttributeValue"==a.name&&a.to>o);else{if(">"==r&&"JSXFragmentTag"==a.name)return{range:e,changes:{from:o,insert:"</>"}};if("/"==r&&"JSXStartCloseTag"==a.name){let e=a.parent,r=e.parent;if(r&&e.from==o-2&&((n=_(l.doc,r.firstChild,o))||"JSXFragmentTag"==(null===(t=r.firstChild)||void 0===t?void 0:t.name))){let e=`${n}>`;return{range:u.cursor(o+e.length,-1),changes:{from:o,insert:e}}}}else if(">"==r){let t=function(e){for(;;){if("JSXOpenTag"==e.name||"JSXSelfClosingTag"==e.name||"JSXFragmentTag"==e.name)return e;if("JSXEscape"==e.name||!e.parent)return null;e=e.parent}}(a);if(t&&"JSXOpenTag"==t.name&&!/^\/?>|^<\//.test(l.doc.sliceString(o,o+2))&&(n=_(l.doc,t,o)))return{range:e,changes:{from:o,insert:`</${n}>`}}}}return{range:e}});return!i.changes.empty&&(e.dispatch([a,l.update(i,{userEvent:"input.complete",scrollIntoView:!0})]),!0)});function R(e,t){return t||(t={parserOptions:{ecmaVersion:2019,sourceType:"module"},env:{browser:!0,node:!0,es6:!0,es2015:!0,es2017:!0,es2020:!0},rules:{}},e.getRules().forEach((e,n)=>{var r;(null===(r=e.meta.docs)||void 0===r?void 0:r.recommended)&&(t.rules[n]=2)})),n=>{let{state:r}=n,o=[];for(let{from:a,to:l}of F.findRegions(r)){let n=r.doc.lineAt(a),i={line:n.number-1,col:a-n.from,pos:a};for(let s of e.verify(r.sliceDoc(a,l),t))o.push(W(s,r.doc,i))}return o}}function U(e,t,n,r){return n.line(e+r.line).from+t+(1==e?r.col-1:-1)}function W(e,t,n){let r=U(e.line,e.column,t,n),o={from:r,to:null!=e.endLine&&1!=e.endColumn?U(e.endLine,e.endColumn,t,n):r,message:e.message,source:e.ruleId?"eslint:"+e.ruleId:"eslint",severity:1==e.severity?"warning":"error"};if(e.fix){let{range:t,text:a}=e.fix,l=t[0]+n.pos-r,i=t[1]+n.pos-r;o.actions=[{name:"fix",apply(e,t){e.dispatch({changes:{from:t+l,to:t+i,insert:a},scrollIntoView:!0})}}]}return o}export{Z as autoCloseTags,C as completionPath,R as esLint,z as javascript,F as javascriptLanguage,N as jsxLanguage,E as localCompletionSource,B as scopeCompletionSource,S as snippets,A as tsxLanguage,O as typescriptLanguage,v as typescriptSnippets};
