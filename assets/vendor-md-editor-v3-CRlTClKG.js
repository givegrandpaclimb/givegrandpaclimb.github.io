import{M as e,u as t,U as o,k as l,x as n,I as i,C as a,$ as r}from"./vendor-vavt-util-zJ2aadKd.js";import{d as s,w as d,o as c,a as u,c as m,b as p,i as v,p as g,e as h,F as f,u as b,n as y,h as k,T as w,f as x}from"./vendor-vue-runtime-core-CNwC6-JB.js";import{r as $,a as C,t as T,s as S}from"./vendor-vue-reactivity-pQI8TCyu.js";import{m as E}from"./vendor-medium-zoom-iNdZUdmf.js";import{c as I}from"./vendor-vavt-copy2clipboard-Cbuvn6n5.js";import{M as A}from"./vendor-markdown-it-C-qVFuxq.js";import{r as L}from"./vendor-markdown-it-image-figures-BQFfKaTI.js";import{s as F}from"./vendor-markdown-it-sub-DQn6Hbcf.js";import{s as j}from"./vendor-markdown-it-sup-DcZktQFx.js";import{L as M}from"./vendor-lru-cache-Bn-nG-PP.js";import{U as H,T as B,X as O,S as N,C as D,L as V,a as P,E as R,V as z,b as q,c as W,M as _,d as U,e as K,f as X,F as G,R as Y,g as Z,I as J,h as Q,i as ee,j as te,k as oe,l as le,Q as ne,m as ie,n as ae,H as re,o as se,p as de,q as ce,B as ue}from"./vendor-lucide-vue-next-DFfgkrQo.js";import{k as me,E as pe,d as ve,p as ge}from"./vendor-codemirror-view-BFv1CI2l.js";import{l as he}from"./vendor-codemirror-language-data-DzjcunEi.js";import{markdown as fe}from"./vendor-codemirror-lang-markdown-CR3GuCy6.js";import{o as be,j as ye,E as ke,a as we}from"./vendor-codemirror-state-d-AKQu11.js";import{d as xe,h as $e,i as Ce,a as Te,u as Se,r as Ee,b as Ie}from"./vendor-codemirror-commands-B1pqwOjV.js";import{u as Ae,i as Le,H as Fe}from"./vendor-codemirror-language-bJH8yZ-V.js";import{t as je}from"./vendor-lezer-highlight-QzoJ8SKk.js";import{a as Me}from"./vendor-codemirror-autocomplete-BSolsEdt.js";import{s as He}from"./vendor-codemirror-search-CpF-M4aS.js";const Be="md-editor",Oe="https://unpkg.com",Ne={main:`${Oe}/prettier@3.3.3/standalone.js`,markdown:`${Oe}/prettier@3.3.3/plugins/markdown.js`},De={a11y:{light:`${Oe}/@highlightjs/cdn-assets@11.10.0/styles/a11y-light.min.css`,dark:`${Oe}/@highlightjs/cdn-assets@11.10.0/styles/a11y-dark.min.css`},atom:{light:`${Oe}/@highlightjs/cdn-assets@11.10.0/styles/atom-one-light.min.css`,dark:`${Oe}/@highlightjs/cdn-assets@11.10.0/styles/atom-one-dark.min.css`},github:{light:`${Oe}/@highlightjs/cdn-assets@11.10.0/styles/github.min.css`,dark:`${Oe}/@highlightjs/cdn-assets@11.10.0/styles/github-dark.min.css`},gradient:{light:`${Oe}/@highlightjs/cdn-assets@11.10.0/styles/gradient-light.min.css`,dark:`${Oe}/@highlightjs/cdn-assets@11.10.0/styles/gradient-dark.min.css`},kimbie:{light:`${Oe}/@highlightjs/cdn-assets@11.10.0/styles/kimbie-light.min.css`,dark:`${Oe}/@highlightjs/cdn-assets@11.10.0/styles/kimbie-dark.min.css`},paraiso:{light:`${Oe}/@highlightjs/cdn-assets@11.10.0/styles/paraiso-light.min.css`,dark:`${Oe}/@highlightjs/cdn-assets@11.10.0/styles/paraiso-dark.min.css`},qtcreator:{light:`${Oe}/@highlightjs/cdn-assets@11.10.0/styles/qtcreator-light.min.css`,dark:`${Oe}/@highlightjs/cdn-assets@11.10.0/styles/qtcreator-dark.min.css`},stackoverflow:{light:`${Oe}/@highlightjs/cdn-assets@11.10.0/styles/stackoverflow-light.min.css`,dark:`${Oe}/@highlightjs/cdn-assets@11.10.0/styles/stackoverflow-dark.min.css`}},Ve=["bold","underline","italic","strikeThrough","-","title","sub","sup","quote","unorderedList","orderedList","task","-","codeRow","code","link","image","table","mermaid","katex","-","revoke","next","save","=","prettier","pageFullscreen","fullscreen","preview","previewOnly","htmlPreview","catalog","github"],Pe=["markdownTotal","=","scrollSwitch"],Re={"zh-CN":{toolbarTips:{bold:"加粗",underline:"下划线",italic:"斜体",strikeThrough:"删除线",title:"标题",sub:"下标",sup:"上标",quote:"引用",unorderedList:"无序列表",orderedList:"有序列表",task:"任务列表",codeRow:"行内代码",code:"块级代码",link:"链接",image:"图片",table:"表格",mermaid:"mermaid图",katex:"katex公式",revoke:"后退",next:"前进",save:"保存",prettier:"美化",pageFullscreen:"浏览器全屏",fullscreen:"屏幕全屏",preview:"预览",previewOnly:"仅预览",htmlPreview:"html代码预览",catalog:"目录",github:"源码地址"},titleItem:{h1:"一级标题",h2:"二级标题",h3:"三级标题",h4:"四级标题",h5:"五级标题",h6:"六级标题"},imgTitleItem:{link:"添加链接",upload:"上传图片",clip2upload:"裁剪上传"},linkModalTips:{linkTitle:"添加链接",imageTitle:"添加图片",descLabel:"链接描述：",descLabelPlaceHolder:"请输入描述...",urlLabel:"链接地址：",urlLabelPlaceHolder:"请输入链接...",buttonOK:"确定"},clipModalTips:{title:"裁剪图片上传",buttonUpload:"上传"},copyCode:{text:"复制代码",successTips:"已复制！",failTips:"复制失败！"},mermaid:{flow:"流程图",sequence:"时序图",gantt:"甘特图",class:"类图",state:"状态图",pie:"饼图",relationship:"关系图",journey:"旅程图"},katex:{inline:"行内公式",block:"块级公式"},footer:{markdownTotal:"字数",scrollAuto:"同步滚动"}},"en-US":{toolbarTips:{bold:"bold",underline:"underline",italic:"italic",strikeThrough:"strikeThrough",title:"title",sub:"subscript",sup:"superscript",quote:"quote",unorderedList:"unordered list",orderedList:"ordered list",task:"task list",codeRow:"inline code",code:"block-level code",link:"link",image:"image",table:"table",mermaid:"mermaid",katex:"formula",revoke:"revoke",next:"undo revoke",save:"save",prettier:"prettier",pageFullscreen:"fullscreen in page",fullscreen:"fullscreen",preview:"preview",previewOnly:"preview only",htmlPreview:"html preview",catalog:"catalog",github:"source code"},titleItem:{h1:"Lv1 Heading",h2:"Lv2 Heading",h3:"Lv3 Heading",h4:"Lv4 Heading",h5:"Lv5 Heading",h6:"Lv6 Heading"},imgTitleItem:{link:"Add Image Link",upload:"Upload Images",clip2upload:"Crop And Upload"},linkModalTips:{linkTitle:"Add Link",imageTitle:"Add Image",descLabel:"Desc:",descLabelPlaceHolder:"Enter a description...",urlLabel:"Link:",urlLabelPlaceHolder:"Enter a link...",buttonOK:"OK"},clipModalTips:{title:"Crop Image",buttonUpload:"Upload"},copyCode:{text:"Copy",successTips:"Copied!",failTips:"Copy failed!"},mermaid:{flow:"flow",sequence:"sequence",gantt:"gantt",class:"class",state:"state",pie:"pie",relationship:"relationship",journey:"journey"},katex:{inline:"inline",block:"block"},footer:{markdownTotal:"Character Count",scrollAuto:"Scroll Auto"}}},ze={editorExtensions:{highlight:{js:`${Oe}/@highlightjs/cdn-assets@11.10.0/highlight.min.js`,css:De},prettier:{standaloneJs:Ne.main,parserMarkdownJs:Ne.markdown},cropper:{css:`${Oe}/cropperjs@1.6.2/dist/cropper.min.css`,js:`${Oe}/cropperjs@1.6.2/dist/cropper.min.js`},screenfull:{js:`${Oe}/screenfull@5.2.0/dist/screenfull.js`},mermaid:{js:`${Oe}/mermaid@11.9.0/dist/mermaid.min.js`,enableZoom:!0},katex:{js:`${Oe}/katex@0.16.22/dist/katex.min.js`,css:`${Oe}/katex@0.16.22/dist/katex.min.css`}},editorExtensionsAttrs:{},editorConfig:{languageUserDefined:{},mermaidTemplate:{},renderDelay:500,zIndex:2e4},codeMirrorExtensions:(e,t)=>t,markdownItConfig:()=>{},markdownItPlugins:e=>e,mermaidConfig:e=>e,katexConfig:e=>e},qe=.1,We=({instance:e,ctx:t,props:o={}},l="default")=>{const n=(null==e?void 0:e.$slots[l])||(null==t?void 0:t.slots[l]);return(n?n(e):"")||o[l]},_e={overlay:{type:[String,Object],default:""},visible:{type:Boolean,default:!1},onChange:{type:Function,default:()=>{}},relative:{type:String,default:"html"},disabled:{type:Boolean,default:void 0}},Ue=s({name:`${Be}-dropdown`,props:_e,setup(e,t){const o=`${Be}-dropdown-hidden`,l=$({overlayClass:[o],overlayStyle:{},triggerHover:!1,overlayHover:!1}),n=C(),i=C(),a=()=>{var t,o;if(e.disabled)return!1;l.triggerHover=!0;const a=n.value,r=i.value;if(!a||!r)return;const s=a.getBoundingClientRect(),d=a.offsetTop,c=a.offsetLeft,u=s.height,m=s.width,p=a.getRootNode(),v=(null==(t=p.querySelector(e.relative))?void 0:t.scrollLeft)||0,g=(null==(o=p.querySelector(e.relative))?void 0:o.clientWidth)||0;let h=c-r.offsetWidth/2+m/2-v;h+r.offsetWidth>v+g&&(h=v+g-r.offsetWidth),h<0&&(h=0),l.overlayStyle={...l.overlayStyle,top:d+u+"px",left:h+"px"},e.onChange(!0)},r=()=>{if(e.disabled)return!1;l.overlayHover=!0};d(()=>e.visible,e=>{e?l.overlayClass=l.overlayClass.filter(e=>e!==o):l.overlayClass.push(o)});let s=-1;const v=t=>{n.value===t.target?l.triggerHover=!1:l.overlayHover=!1,clearTimeout(s),s=window.setTimeout(()=>{l.overlayHover||l.triggerHover||e.onChange(!1)},10)};return c(()=>{n.value.addEventListener("mouseenter",a),n.value.addEventListener("mouseleave",v),i.value.addEventListener("mouseenter",r),i.value.addEventListener("mouseleave",v)}),u(()=>{n.value.removeEventListener("mouseenter",a),n.value.removeEventListener("mouseleave",v),i.value.removeEventListener("mouseenter",r),i.value.removeEventListener("mouseleave",v)}),()=>{const o=We({ctx:t}),a=We({props:e,ctx:t},"overlay");return[m(o instanceof Array?o[0]:o,{ref:n,key:"cloned-dropdown-trigger"}),p("div",{class:[`${Be}-dropdown`,l.overlayClass],style:l.overlayStyle,ref:i},[p("div",{class:`${Be}-dropdown-overlay`},[a instanceof Array?a[0]:a])])]}}}),Ke=s({name:"DropdownToolbar",props:{title:{type:String,default:""},visible:{type:Boolean,default:void 0},trigger:{type:[String,Object],default:void 0},onChange:{type:Function,default:void 0},overlay:{type:[String,Object],default:void 0},insert:{type:Function,default:void 0},language:{type:String,default:void 0},theme:{type:String,default:void 0},previewTheme:{type:String,default:void 0},codeTheme:{type:String,default:void 0},disabled:{type:Boolean,default:void 0},showToolbarName:{type:Boolean,default:void 0}},emits:["onChange"],setup(e,t){const o=v("editorId");return()=>{const l=We({props:e,ctx:t},"trigger"),n=We({props:e,ctx:t},"overlay"),i=We({props:e,ctx:t});return p(Ue,{relative:`#${o}-toolbar-wrapper`,visible:e.visible,onChange:o=>{var l;null==(l=e.onChange)||l.call(e,o),t.emit("onChange",o)},overlay:n,disabled:e.disabled},{default:()=>[p("div",{class:[`${Be}-toolbar-item`,e.disabled&&`${Be}-disabled`],title:e.title||""},[i||l])]})}}});Ke.install=e=>(e.component(Ke.name,Ke),e);var Xe=Object.defineProperty;const Ge=new class{constructor(){var e,t,o;o={},(t="pools")in(e=this)?Xe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o}remove(e,t,o){const l=this.pools[e]&&this.pools[e][t];l&&(this.pools[e][t]=l.filter(e=>e!==o))}clear(e){this.pools[e]={}}on(e,t){return this.pools[e]||(this.pools[e]={}),this.pools[e][t.name]||(this.pools[e][t.name]=[]),this.pools[e][t.name].push(t.callback),this.pools[e][t.name].includes(t.callback)}emit(e,t,...o){this.pools[e]||(this.pools[e]={});const l=this.pools[e][t];l&&l.forEach(e=>{try{e(...o)}catch(t){}})}},Ye="onSave",Ze="changeCatalogVisible",Je="changeFullscreen",Qe="pageFullscreenChanged",et="fullscreenChanged",tt="previewChanged",ot="previewOnlyChanged",lt="htmlPreviewChanged",nt="catalogVisibleChanged",it="buildFinished",at="errorCatcher",rt="replace",st="uploadImage",dt="openModals",ct="ctrlZ",ut="ctrlShiftZ",mt="catalogChanged",pt="pushCatalog",vt="rerender",gt="eventListener",ht="taskStateChanged",ft="sendEditorView",bt="getEditorView",yt={copy:`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy ${Be}-icon"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg>`,"collapse-tips":`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-chevron-left ${Be}-icon"><circle cx="12" cy="12" r="10"/><path d="m14 16-4-4 4-4"/></svg>`,pin:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-pin"><path d="M12 17v5"/><path d="M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z"/></svg>',"pin-off":'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-pin-off"><path d="M12 17v5"/><path d="M15 9.34V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H7.89"/><path d="m2 2 20 20"/><path d="M9 9v1.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h11"/></svg>'},kt=(e,t)=>"string"==typeof t[e]?t[e]:yt[e],wt=(e,t)=>{const o=o=>{const l=e.parentElement||document.body,n=l.offsetWidth,i=l.offsetHeight,{clientWidth:a,clientHeight:r}=document.documentElement,s=o.offsetX,d=o.offsetY,c=e=>{let o=e.x+document.body.scrollLeft-document.body.clientLeft-s,c=e.y+document.body.scrollTop-document.body.clientTop-d;o=o<1?1:o<a-n-1?o:a-n-1,c=c<1?1:c<r-i-1?c:r-i-1,t?t(o,c):(l.style.left=`${o}px`,l.style.top=`${c}px`)};document.addEventListener("mousemove",c);const u=()=>{document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",u)};document.addEventListener("mouseup",u)};return e.addEventListener("mousedown",o),()=>{e.removeEventListener("mousedown",o)}},xt=(e,t,o="")=>{var l;const n=document.getElementById(t.id);if(n)""!==o&&(Reflect.get(window,o)?null==(l=t.onload)||l.call(n,new Event("load")):t.onload&&n.addEventListener("load",t.onload));else{const o={...t};o.onload=null;const l=$t(e,o);t.onload&&l.addEventListener("load",t.onload),document.head.appendChild(l)}},$t=(e,t)=>{const o=document.createElement(e);return Object.keys(t).forEach(e=>{void 0!==t[e]&&(o[e]=t[e])}),o},Ct=(()=>(e,t)=>{const o=new Map;return null==e||e.forEach(e=>{let l=e.querySelector(`.${Be}-mermaid-action`);l||(e.insertAdjacentHTML("beforeend",`<div class="${Be}-mermaid-action">${kt("pin-off",t.customIcon)}</div>`),l=e.querySelector(`.${Be}-mermaid-action`));const n=()=>{const n=o.get(e);if(null==n?void 0:n.removeEvent)n.removeEvent(),e.removeAttribute("data-grab"),o.set(e,{removeClick:n.removeClick}),l.innerHTML=kt("pin-off",t.customIcon);else{const i=(e=>{if(!e)return()=>{};const t=e.firstChild;let o,l,n,i=1,a=0,r=0,s=!1,d=1;const c=()=>{t.style.transform=`translate(${a}px, ${r}px) scale(${i})`},u=e=>{1===e.touches.length?(s=!0,o=e.touches[0].clientX-a,l=e.touches[0].clientY-r):2===e.touches.length&&(n=Math.hypot(e.touches[0].clientX-e.touches[1].clientX,e.touches[0].clientY-e.touches[1].clientY),d=i)},m=e=>{if(e.preventDefault(),s&&1===e.touches.length)a=e.touches[0].clientX-o,r=e.touches[0].clientY-l,c();else if(2===e.touches.length){const o=Math.hypot(e.touches[0].clientX-e.touches[1].clientX,e.touches[0].clientY-e.touches[1].clientY),l=i;i=d*(o/n-1+1);const s=(e.touches[0].clientX+e.touches[1].clientX)/2,u=(e.touches[0].clientY+e.touches[1].clientY)/2,m=t.getBoundingClientRect(),p=(s-m.left)/l,v=(u-m.top)/l;a-=p*(i-l),r-=v*(i-l),c()}},p=()=>{s=!1},v=e=>{e.preventDefault();const o=i;e.deltaY<0?i+=.02:i=Math.max(.1,i-.02);const l=t.getBoundingClientRect(),n=e.clientX-l.left,s=e.clientY-l.top;a-=n/o*(i-o),r-=s/o*(i-o),c()},g=e=>{s=!0,o=e.clientX-a,l=e.clientY-r},h=e=>{s&&(a=e.clientX-o,r=e.clientY-l,c())},f=()=>{s=!1},b=()=>{s=!1};return e.addEventListener("touchstart",u,{passive:!1}),e.addEventListener("touchmove",m,{passive:!1}),e.addEventListener("touchend",p),e.addEventListener("wheel",v,{passive:!1}),e.addEventListener("mousedown",g),e.addEventListener("mousemove",h),e.addEventListener("mouseup",f),e.addEventListener("mouseleave",b),()=>{e.removeEventListener("touchstart",u),e.removeEventListener("touchmove",m),e.removeEventListener("touchend",p),e.removeEventListener("wheel",v),e.removeEventListener("mousedown",g),e.removeEventListener("mousemove",h),e.removeEventListener("mouseup",f),e.removeEventListener("mouseleave",b)}})(e);e.setAttribute("data-grab",""),o.set(e,{removeEvent:i,removeClick:null==n?void 0:n.removeClick}),l.innerHTML=kt("pin",t.customIcon)}};l.addEventListener("click",n),o.set(e,{removeClick:()=>l.removeEventListener("click",n)})}),()=>{o.forEach(({removeEvent:e,removeClick:t})=>{null==e||e(),null==t||t()}),o.clear()}})(),Tt=(e,t="image.png")=>{const o=e.split(","),l=o[0].match(/:(.*?);/);if(l){const e=l[1],n=atob(o[1]);let i=n.length;const a=new Uint8Array(i);for(;i--;)a[i]=n.charCodeAt(i);return new File([a],t,{type:e})}return null},St=(()=>{let e=0;return()=>++e})(),Et={hljs:`${Be}-hljs`,hlcss:`${Be}-hlCss`,prettier:`${Be}-prettier`,prettierMD:`${Be}-prettierMD`,cropperjs:`${Be}-cropper`,croppercss:`${Be}-cropperCss`,screenfull:`${Be}-screenfull`,mermaidM:`${Be}-mermaid-m`,mermaid:`${Be}-mermaid`,katexjs:`${Be}-katex`,katexcss:`${Be}-katexCss`},It=new M({max:1e3,ttl:6e5}),At=(e,t)=>{const o=e.renderer.rules.fence.bind(e.renderer.rules);e.renderer.rules.fence=(l,n,i,a,r)=>{const s=l[n],d=s.content.trim();if("mermaid"===s.info){let o;l[n].map&&0===l[n].level&&(o=l[n].map[0],l[n].attrSet("data-line",String(o)));const i=It.get(d);return i?`<p class="${Be}-mermaid" ${void 0!==o?"data-line="+o:""} data-processed>${i}</p>`:`<div class="${Be}-mermaid" ${void 0!==o?"data-line="+o:""} data-mermaid-theme=${t.themeRef.value}">${e.utils.escapeHtml(d)}</div>`}return o(l,n,i,a,r)}},Lt=(e,t)=>{const o=e.attrs?e.attrs.slice():[];return t.forEach(t=>{const l=e.attrIndex(t[0]);l<0?o.push(t):(o[l]=o[l].slice(),o[l][1]+=` ${t[1]}`)}),o},Ft={block:[{open:"$$",close:"$$"},{open:"\\[",close:"\\]"}],inline:[{open:"$$",close:"$$"},{open:"$",close:"$"},{open:"\\[",close:"\\]"},{open:"\\(",close:"\\)"}]},jt=(e,{katexRef:t,inlineDelimiters:o,blockDelimiters:l})=>{var n;e.inline.ruler.before("escape","math_inline",(n={delimiters:o||Ft.inline},(e,t)=>{const o=n.delimiters;let l,i,a;for(const n of o)if(e.src.startsWith(n.open,e.pos)){const o=e.pos+n.open.length;for(l=o;-1!==(l=e.src.indexOf(n.close,l));){for(a=l-1;"\\"===e.src[a];)a-=1;if((l-a)%2==1)break;l+=n.close.length}if(-1===l)return t||(e.pending+=n.open),e.pos=o,!0;if(l-o===0)return t||(e.pending+=n.open+n.close),e.pos=o+n.close.length,!0;if(!t){const t=e.src.slice(o,l);i=e.push("math_inline","math",0),i.markup=n.open,i.content=t}return e.pos=l+n.close.length,!0}return!1})),e.block.ruler.after("blockquote","math_block",(e=>(t,o,l,n)=>{const i=e.delimiters;let a,r,s,d,c=!1,u=t.bMarks[o]+t.tShift[o],m=t.eMarks[o];for(const e of i)if(t.src.slice(u,u+e.open.length)===e.open&&t.src.slice(m-e.close.length,m)===e.close){if(u+=e.open.length,a=t.src.slice(u,m),n)return!0;for(a.trim().slice(-e.close.length)===e.close&&(a=a.trim().slice(0,-e.close.length),c=!0),s=o;!(c||(s++,s>=l)||(u=t.bMarks[s]+t.tShift[s],m=t.eMarks[s],u<m&&t.tShift[s]<t.blkIndent));)t.src.slice(u,m).trim().slice(-e.close.length)===e.close&&(d=t.src.slice(0,m).lastIndexOf(e.close),r=t.src.slice(u,d),c=!0);t.line=s+1;const i=t.push("math_block","math",0);return i.block=!0,i.content=(a&&a.trim()?a+"\n":"")+t.getLines(o+1,s,t.tShift[o],!0)+(r&&r.trim()?r:""),i.map=[o,t.line],i.markup=e.open,!0}return!1})({delimiters:l||Ft.block}),{alt:["paragraph","reference","blockquote","list"]}),e.renderer.rules.math_inline=(e,o,l,n,i)=>{const a=e[o],r={attrs:Lt(a,[["class",`${Be}-katex-inline`]])};if(t.value){const e=t.value.renderToString(a.content,ze.katexConfig({throwOnError:!1}));return`<span ${i.renderAttrs(r)} data-processed>${e}</span>`}return`<span ${i.renderAttrs(r)}>${a.content}</span>`},e.renderer.rules.math_block=(e,o,l,n,i)=>{const a=e[o],r={attrs:Lt(a,[["class",`${Be}-katex-block`]])};if(t.value){const e=t.value.renderToString(a.content,ze.katexConfig({throwOnError:!1,displayMode:!0}));return`<p ${i.renderAttrs(r)} data-processed>${e}</p>`}return`<p ${i.renderAttrs(r)}>${a.content}</p>`}},Mt=(e,t)=>{const o=(t=t||{}).marker||"!",l=o.charCodeAt(0),n=o.length;let i="",a="";const r=(e,t,o,l,n)=>{const i=e[t];return"admonition_open"===i.type?e[t].attrPush(["class",`${Be}-admonition ${Be}-admonition-${i.info}`]):"admonition_title_open"===i.type&&e[t].attrPush(["class",`${Be}-admonition-title`]),n.renderToken(e,t,o)};e.block.ruler.before("code","admonition",(e,t,r,s)=>{let d,c,u,m=!1,p=e.bMarks[t]+e.tShift[t],v=e.eMarks[t];if(l!==e.src.charCodeAt(p))return!1;for(d=p+1;d<=v&&o[(d-p)%n]===e.src[d];d++);const g=Math.floor((d-p)/n);if(3!==g)return!1;d-=(d-p)%n;const h=e.src.slice(p,d);if((e=>{const t=e.trim().split(" ",2);a="",i=t[0],t.length>1&&(a=e.substring(i.length+2))})(e.src.slice(d,v)),s)return!0;for(c=t;c++,!(c>=r||(p=e.bMarks[c]+e.tShift[c],v=e.eMarks[c],p<v&&e.sCount[c]<e.blkIndent));)if(l===e.src.charCodeAt(p)&&!(e.sCount[c]-e.blkIndent>=4)){for(d=p+1;d<=v&&o[(d-p)%n]===e.src[d];d++);if(!(Math.floor((d-p)/n)<g||(d-=(d-p)%n,d=e.skipSpaces(d),d<v))){m=!0;break}}const f=e.parentType,b=e.lineMax;return e.parentType="root",e.lineMax=c,u=e.push("admonition_open","div",1),u.markup=h,u.block=!0,u.info=i,u.map=[t,c],a&&(u=e.push("admonition_title_open","p",1),u.markup=h+" "+i,u.map=[t,c],u=e.push("inline","",0),u.content=a,u.map=[t,e.line-1],u.children=[],u=e.push("admonition_title_close","p",-1),u.markup=h+" "+i),e.md.block.tokenize(e,t+1,c),u=e.push("admonition_close","div",-1),u.markup=e.src.slice(p,d),u.block=!0,e.parentType=f,e.lineMax=b,e.line=c+(m?1:0),!0},{alt:["paragraph","reference","blockquote","list"]}),e.renderer.rules.admonition_open=r,e.renderer.rules.admonition_title_open=r,e.renderer.rules.admonition_title_close=r,e.renderer.rules.admonition_close=r},Ht=(e,t)=>{e.renderer.rules.heading_open=(o,l)=>{var n;const i=o[l],a=(null==(n=o[l+1].children)?void 0:n.reduce((e,t)=>e+(["text","code_inline","math_inline"].includes(t.type)&&t.content||""),""))||"",r=i.markup.length;return t.headsRef.value.push({text:a,level:r,line:i.map[0]}),i.map&&0===i.level&&i.attrSet("id",t.mdHeadingId(a,r,t.headsRef.value.length)),e.renderer.renderToken(o,l,t)},e.renderer.rules.heading_close=(e,t,o,l,n)=>n.renderToken(e,t,o)},Bt=(e,t)=>{const o=e.renderer.rules.fence,l=e.utils.unescapeAll,n=/\[(\w*)(?::([\w ]*))?\]/,i=/::(open|close)/,a=e=>e.info?l(e.info).trim():"",r=e=>{const t=a(e),[o=null,l=""]=(n.exec(t)||[]).slice(1);return[o,l]},s=e=>{const t=a(e);return t?t.split(/(\s+)/g)[0]:""},d=e=>{const o=e.info.match(i)||[];return{open:"open"===o[1]||"close"!==o[1]&&t.codeFoldable&&e.content.trim().split("\n").length<t.autoFoldThreshold,tagContainer:o[1]||t.codeFoldable?"details":"div",tagHeader:o[1]||t.codeFoldable?"summary":"div"}},c=(e,l,a,c,u)=>{var m;if(e[l].hidden)return"";const p=null==(m=t.usedLanguageTextRef.value)?void 0:m.copyCode.text,v=t.customIconRef.value.copy||p,g=!!t.customIconRef.value.copy,h=`<span class="${Be}-collapse-tips">${kt("collapse-tips",t.customIconRef.value)}</span>`,[f]=r(e[l]);if(null===f){const{open:n,tagContainer:r,tagHeader:s}=d(e[l]),m=[["class",`${Be}-code`]];n&&m.push(["open",""]);const f={attrs:Lt(e[l],m)};e[l].info=e[l].info.replace(i,"");const b=o(e,l,a,c,u);return`\n        <${r} ${u.renderAttrs(f)}>\n          <${s} class="${Be}-code-head">\n            <div class="${Be}-code-flag"><span></span><span></span><span></span></div>\n            <div class="${Be}-code-action">\n              <span class="${Be}-code-lang">${e[l].info.trim()}</span>\n              <span class="${Be}-copy-button" data-tips="${p}"${g?" data-is-icon=true":""}>${v}</span>\n              ${t.extraTools instanceof Function?t.extraTools({lang:e[l].info.trim()}):t.extraTools||""}\n              ${"details"===r?h:""}\n            </div>\n          </${s}>\n          ${b}\n        </${r}>\n      `}let b,y,k,w,x="",$="",C="";const{open:T,tagContainer:S,tagHeader:E}=d(e[l]),I=[["class",`${Be}-code`]];T&&I.push(["open",""]);const A={attrs:Lt(e[l],I)};for(let d=l;d<e.length&&(b=e[d],[y,k]=r(b),y===f);d++){b.info=b.info.replace(n,"").replace(i,""),b.hidden=!0;const r=`${Be}-codetab-${t.editorId}-${l}-${d-l}`;w=d-l>0?"":"checked",x+=`\n        <li>\n          <input\n            type="radio"\n            id="label-${Be}-codetab-label-1-${t.editorId}-${l}-${d-l}"\n            name="${Be}-codetab-label-${t.editorId}-${l}"\n            class="${r}"\n            ${w}\n          >\n          <label\n            for="label-${Be}-codetab-label-1-${t.editorId}-${l}-${d-l}"\n            onclick="this.getRootNode().querySelectorAll('.${r}').forEach(e => e.click())"\n          >\n            ${k||s(b)}\n          </label>\n        </li>`,$+=`\n        <div role="tabpanel">\n          <input\n            type="radio"\n            name="${Be}-codetab-pre-${t.editorId}-${l}"\n            class="${r}"\n            ${w}\n            role="presentation">\n          ${o(e,d,a,c,u)}\n        </div>`,C+=`\n        <input\n          type="radio"\n          name="${Be}-codetab-lang-${t.editorId}-${l}"\n          class="${r}"\n          ${w}\n          role="presentation">\n        <span class=${Be}-code-lang role="note">${s(b)}</span>`}return`\n      <${S} ${u.renderAttrs(A)}>\n        <${E} class="${Be}-code-head">\n          <div class="${Be}-code-flag">\n            <ul class="${Be}-codetab-label" role="tablist">${x}</ul>\n          </div>\n          <div class="${Be}-code-action">\n            <span class="${Be}-codetab-lang">${C}</span>\n            <span class="${Be}-copy-button" data-tips="${p}"${g?" data-is-icon=true":""}>${v}</span>\n            ${t.extraTools instanceof Function?t.extraTools({lang:e[l].info.trim()}):t.extraTools||""}\n            ${"details"===S?h:""}\n          </div>\n        </${E}>\n        ${$}\n      </${S}>\n    `};e.renderer.rules.fence=c,e.renderer.rules.code_block=c},Ot=(e,t,o)=>{const l=e.attrIndex(t),n=[t,o];l<0?e.attrPush(n):(e.attrs=e.attrs||[],e.attrs[l]=n)},Nt=(e,t)=>"inline"===e[t].type&&"paragraph_open"===e[t-1].type&&"list_item_open"===e[t-2].type&&(e=>0===e.content.indexOf("[ ] ")||0===e.content.indexOf("[x] ")||0===e.content.indexOf("[X] "))(e[t]),Dt=(e,t)=>{const o=e[t].level-1;for(let l=t-1;l>=0;l--)if(e[l].level===o)return l;return-1},Vt=(e,t,o)=>{if(e.children=e.children||[],e.children.unshift(((e,t,o)=>{const l=new t("html_inline","",0),n=o.enabled?" ":' disabled="" ';return 0===e.content.indexOf("[ ] ")?l.content='<input class="task-list-item-checkbox"'+n+'type="checkbox">':0!==e.content.indexOf("[x] ")&&0!==e.content.indexOf("[X] ")||(l.content='<input class="task-list-item-checkbox" checked=""'+n+'type="checkbox">'),l})(e,t,o)),e.children[1].content=e.children[1].content.slice(3),e.content=e.content.slice(3),o.label)if(o.labelAfter){e.children.pop();const o="task-item-"+Math.ceil(1e7*Math.random()-1e3);e.children[0].content=e.children[0].content.slice(0,-1)+' id="'+o+'">',e.children.push(((e,t,o)=>{const l=new o("html_inline","",0);return l.content='<label class="task-list-item-label" for="'+t+'">'+e+"</label>",l.attrs=[{for:t}],l})(e.content,o,t))}else e.children.unshift((e=>{const t=new e("html_inline","",0);return t.content="<label>",t})(t)),e.children.push((e=>{const t=new e("html_inline","",0);return t.content="</label>",t})(t))},Pt=(e,t={})=>{e.core.ruler.after("inline","github-task-lists",e=>{const o=e.tokens;for(let l=2;l<o.length;l++)Nt(o,l)&&(Vt(o[l],e.Token,t),Ot(o[l-2],"class","task-list-item"+(t.enabled?" enabled":" ")),Ot(o[Dt(o,l-2)],"class","contains-task-list"))})},Rt={checked:{regexp:/- \[x\]/,value:"- [ ]"},unChecked:{regexp:/- \[\s\]/,value:"- [x]"}},zt={modelValue:{type:String,default:""},onChange:{type:Function,default:()=>{}},setting:{type:Object,default:()=>({preview:!0})},onHtmlChanged:{type:Function,default:()=>{}},onGetCatalog:{type:Function,default:()=>{}},mdHeadingId:{type:Function,default:()=>""},noMermaid:{type:Boolean,default:!1},sanitize:{type:Function,default:e=>e},noKatex:{type:Boolean,default:!1},formatCopiedText:{type:Function,default:e=>e},noHighlight:{type:Boolean,default:!1},previewOnly:{type:Boolean,default:!1},noImgZoomIn:{type:Boolean},sanitizeMermaid:{type:Function},codeFoldable:{type:Boolean},autoFoldThreshold:{type:Number},onRemount:{type:Function}},qt={...zt,updateModelValue:{type:Function,default:()=>{}},placeholder:{type:String,default:""},scrollAuto:{type:Boolean},autofocus:{type:Boolean},disabled:{type:Boolean},readonly:{type:Boolean},maxlength:{type:Number},autoDetectCode:{type:Boolean},onBlur:{type:Function,default:()=>{}},onFocus:{type:Function,default:()=>{}},noPrettier:{type:Boolean},completions:{type:Array},catalogVisible:{type:Boolean},theme:{type:String,default:"light"},onInput:{type:Function},onDrop:{type:Function,default:()=>{}},inputBoxWidth:{type:String},oninputBoxWidthChange:{type:Function},transformImgUrl:{type:Function,default:e=>e},catalogLayout:{type:String},catalogMaxDepth:{type:Number}},Wt=s({name:"UpdateOnDemand",props:{html:{type:String,required:!0}},setup(e){const t=v("editorId"),o=v("previewTheme"),l=v("showCodeRowNumber"),n=C(),i=e.html;return d(()=>e.html,e=>{var t;const o=(e=>{const t=(new DOMParser).parseFromString(e,"text/html");return Array.from(t.body.childNodes)})(e),l=Array.from((null==(t=n.value)?void 0:t.childNodes)||[]),{updates:i,deletes:a}=((e,t)=>{const o=[],l=[];if(e.forEach((e,l)=>{const n=t[l];n?(e.nodeType!==n.nodeType||e.textContent!==n.textContent||1===e.nodeType&&e.outerHTML!==n.outerHTML)&&o.push({index:l,newNode:e}):o.push({index:l,newNode:e})}),t.length>e.length)for(let n=e.length;n<t.length;n++)l.push(t[n]);return{updates:o,deletes:l}})(o,l);((e,t)=>{n.value&&(t.forEach(e=>{e.remove()}),e.forEach(({index:e,newNode:t})=>{var o,l,i;const a=null==(o=n.value)?void 0:o.childNodes[e];a?null==(i=n.value)||i.replaceChild(t.cloneNode(!0),a):null==(l=n.value)||l.appendChild(t.cloneNode(!0))}))})(i,a)}),()=>p("div",{id:`${t}-preview`,class:[`${Be}-preview`,`${null==o?void 0:o.value}-theme`,l&&`${Be}-scrn`],innerHTML:i,ref:n},null)}}),_t=s({name:"ContentPreview",props:zt,setup(e){const t=v("editorId"),{html:n,key:i}=((e,t)=>{const{editorConfig:l,markdownItPlugins:n,editorExtensions:i}=ze,a=v("editorId"),r=v("language"),s=v("usedLanguageText"),m=v("showCodeRowNumber"),p=v("theme"),g=v("customIcon"),f=v("rootRef"),b=C([]);let k=()=>{};const w=(e=>{const t=v("highlight"),o=S(ze.editorExtensions.highlight.instance);return c(()=>{e.noHighlight||o.value||(xt("link",{...t.value.css,rel:"stylesheet",id:Et.hlcss}),xt("script",{...t.value.js,id:Et.hljs,onload(){o.value=window.hljs}},"hljs"))}),d(()=>t.value.css,()=>{e.noHighlight||ze.editorExtensions.highlight.instance||((e,t)=>{const o=document.getElementById(t.id);null==o||o.remove(),xt("link",t)})(0,{...t.value.css,rel:"stylesheet",id:Et.hlcss})}),o})(e),x=(e=>{const t=S(ze.editorExtensions.katex.instance);return c(()=>{var o,l;if(e.noKatex||t.value)return;const{editorExtensions:n,editorExtensionsAttrs:i}=ze;xt("script",{...null==(o=i.katex)?void 0:o.js,src:n.katex.js,id:Et.katexjs,onload(){t.value=window.katex}},"katex"),xt("link",{...null==(l=i.katex)?void 0:l.css,rel:"stylesheet",href:n.katex.css,id:Et.katexcss})}),t})(e),{reRenderRef:$,replaceMermaid:E}=(e=>{const t=v("editorId"),l=v("theme"),n=v("rootRef"),{editorExtensions:i,editorExtensionsAttrs:a,mermaidConfig:r}=ze;let s=i.mermaid.instance;const u=S(-1),m=()=>{!e.noMermaid&&s&&(s.initialize(r({startOnLoad:!1,theme:"dark"===l.value?"dark":"default"})),u.value=u.value+1)};return d(()=>l.value,()=>{It.clear(),m()}),c(()=>{var t,o;if(e.noMermaid||s)return;const l=i.mermaid.js;/\.mjs/.test(l)?(xt("link",{...null==(t=a.mermaid)?void 0:t.js,rel:"modulepreload",href:l,id:Et.mermaidM}),import(l).then(e=>{s=e.default,m()})):xt("script",{...null==(o=a.mermaid)?void 0:o.js,src:l,id:Et.mermaid,onload(){s=window.mermaid,m()}},"mermaid")}),{reRenderRef:u,replaceMermaid:async()=>{if(!e.noMermaid&&s){const l=n.value.querySelectorAll(`div.${Be}-mermaid`),i=document.createElement("div"),a=document.body.offsetWidth>1366?document.body.offsetWidth:1366,r=document.body.offsetHeight>768?document.body.offsetHeight:768;i.style.width=a+"px",i.style.height=r+"px",i.style.position="fixed",i.style.zIndex="-10000",i.style.top="-10000";let d=l.length;d>0&&document.body.appendChild(i),await Promise.allSettled(Array.from(l).map(l=>(async l=>{var n;const a=l.innerText;let r=It.get(a);if(!r){const u=o();let m={svg:""};try{m=await s.render(u,a,i),r=await e.sanitizeMermaid(m.svg);const t=document.createElement("p");t.className=`${Be}-mermaid`,t.setAttribute("data-processed",""),t.innerHTML=r,null==(n=t.children[0])||n.removeAttribute("height"),It.set(a,t.innerHTML),void 0!==l.dataset.line&&(t.dataset.line=l.dataset.line),l.replaceWith(t)}catch(c){Ge.emit(t,at,{name:"mermaid",message:c.message,error:c})}0===--d&&i.remove()}})(l)))}}}})(e),I=A({html:!0,breaks:!0,linkify:!0}),M=[{type:"image",plugin:L,options:{figcaption:!0,classes:"md-zoom"}},{type:"admonition",plugin:Mt,options:{}},{type:"taskList",plugin:Pt,options:{}},{type:"heading",plugin:Ht,options:{mdHeadingId:e.mdHeadingId,headsRef:b}},{type:"code",plugin:Bt,options:{editorId:a,usedLanguageTextRef:s,codeFoldable:e.codeFoldable,autoFoldThreshold:e.autoFoldThreshold,customIconRef:g}},{type:"sub",plugin:F,options:{}},{type:"sup",plugin:j,options:{}}];e.noKatex||M.push({type:"katex",plugin:jt,options:{katexRef:x}}),e.noMermaid||M.push({type:"mermaid",plugin:At,options:{themeRef:p}}),n(M,{editorId:a}).forEach(e=>{I.use(e.plugin,e.options)});const H=I.options.highlight;I.set({highlight:(t,o,l)=>{if(H){const e=H(t,o,l);if(e)return e}let n;return n=!e.noHighlight&&w.value?w.value.getLanguage(o)?w.value.highlight(t,{language:o,ignoreIllegals:!0}).value:w.value.highlightAuto(t).value:I.utils.escapeHtml(t),`<pre><code class="language-${o}" language=${o}>${m?((e,t)=>{if(!e)return e;const o=t.split("\n"),l=['<span rn-wrapper aria-hidden="true">'];return o.forEach(()=>{l.push("<span></span>")}),l.push("</span>"),`<span class="${Be}-code-block">${e}</span>${l.join("")}`})(n.replace(/^\n+|\n+$/g,""),t.replace(/^\n+|\n+$/g,"")):`<span class="${Be}-code-block">${n.replace(/^\n+|\n+$/g,"")}</span>`}</code></pre>`}}),(e=>{e.core.ruler.push("init-line-number",e=>(e.tokens.forEach(e=>{e.map&&(e.attrs||(e.attrs=[]),e.attrs.push(["data-line",e.map[0].toString()]))}),!0))})(I);const B=C(`_article-key_${o()}`),O=C(e.sanitize(I.render(e.modelValue))),N=()=>{Ge.emit(a,it,O.value),e.onHtmlChanged(O.value),e.onGetCatalog(b.value),Ge.emit(a,mt,b.value),y(()=>{E().then(()=>{var e,t;(null==(e=i.mermaid)?void 0:e.enableZoom)&&(k(),k=Ct(null==(t=f.value)?void 0:t.querySelectorAll(`#${a} p.${Be}-mermaid`),{customIcon:g.value}))})})},D=()=>{b.value=[],O.value=e.sanitize(I.render(e.modelValue)),N()},V=h(()=>(e.noKatex||x.value)&&(e.noHighlight||w.value));let P=-1;return d([T(e,"modelValue"),V,$,r],()=>{P=window.setTimeout(()=>{D()},t?0:l.renderDelay)}),d(()=>e.setting.preview,()=>{e.setting.preview&&y(()=>{E().then(()=>{var e,t;(null==(e=i.mermaid)?void 0:e.enableZoom)&&(k(),k=Ct(null==(t=f.value)?void 0:t.querySelectorAll(`#${a} p.${Be}-mermaid`),{customIcon:g.value}))}),Ge.emit(a,mt,b.value)})}),c(N),c(()=>{Ge.on(a,{name:pt,callback(){Ge.emit(a,mt,b.value)}}),Ge.on(a,{name:vt,callback:()=>{B.value=`_article-key_${o()}`,D()}})}),u(()=>{k(),clearTimeout(P)}),{html:O,key:B}})(e,e.previewOnly);return((e,t,o)=>{const l=v("editorId"),n=v("rootRef"),i=v("usedLanguageText"),a=()=>{n.value.querySelectorAll(`#${l} .${Be}-preview .${Be}-code`).forEach(t=>{let o=-1;const l=t.querySelector(`.${Be}-copy-button`);l&&(l.onclick=n=>{n.preventDefault(),clearTimeout(o);const a=(t.querySelector("input:checked + pre code")||t.querySelector("pre code")).textContent,{text:r,successTips:s,failTips:d}=i.value.copyCode;let c=s;I(e.formatCopiedText(a)).catch(()=>{c=d}).finally(()=>{l.dataset.isIcon?l.dataset.tips=c:l.innerHTML=c,o=window.setTimeout(()=>{l.dataset.isIcon?l.dataset.tips=r:l.innerHTML=r},1500)})})})},r=e=>{e&&y(a)};d([t,o],()=>{y(a)}),d(()=>e.setting.preview,r),d(()=>e.setting.htmlPreview,r),c(a)})(e,n,i),((e,t)=>{const o=v("editorId"),{noImgZoomIn:n}=e,i=l(()=>{const e=document.querySelectorAll(`#${o}-preview img:not(.not-zoom):not(.medium-zoom-image)`);0!==e.length&&E(e,{background:"#00000073"})});c(()=>{!n&&e.setting.preview&&i()}),d([t,T(e.setting,"preview")],()=>{!n&&e.setting.preview&&i()})})(e,n),((e,t)=>{const o=v("editorId"),l=v("rootRef");let n=()=>{};const i=()=>{if(!l.value)return!1;const t=l.value.querySelectorAll(".task-list-item.enabled"),i=t=>{var l;t.preventDefault();const n=t.target.checked?"unChecked":"checked",i=null==(l=t.target.parentElement)?void 0:l.dataset.line;if(!i)return;const a=Number(i),r=e.modelValue.split("\n"),s=r[Number(a)].replace(Rt[n].regexp,Rt[n].value);e.previewOnly?(r[Number(a)]=s,e.onChange(r.join("\n"))):Ge.emit(o,ht,a+1,s)};t.forEach(e=>{e.addEventListener("click",i)}),n=()=>{t.forEach(e=>{e.removeEventListener("click",i)})}};u(()=>{n()}),d([t],()=>{n(),y(i)},{immediate:!0})})(e,n),((e,t,o)=>{const l=()=>{y(()=>{var t;null==(t=e.onRemount)||t.call(e)})},n=e=>{e&&l()};d([t,o],l),d(()=>e.setting.preview,n),d(()=>e.setting.htmlPreview,n),c(l)})(e,n,i),()=>p(f,null,[e.setting.preview&&p("div",{id:`${t}-preview-wrapper`,class:`${Be}-preview-wrapper`,key:"content-preview-wrapper"},[p(Wt,{key:i.value,html:n.value},null)]),!e.previewOnly&&e.setting.htmlPreview&&p("div",{id:`${t}-html-wrapper`,class:`${Be}-preview-wrapper`,key:"html-preview-wrapper"},[p("div",{class:`${Be}-html`},[n.value])])])}}),Ut=(o,l)=>{const n=ze.editorExtensions.highlight,i=ze.editorExtensionsAttrs.highlight,a=Kt(o);g("editorId",a),g("rootRef",l),g("theme",h(()=>o.theme)),g("language",h(()=>o.language)),g("highlight",h(()=>{const{js:e}=n,t={...De,...n.css},{js:l,css:a={}}=i||{},r=o.codeStyleReverse&&o.codeStyleReverseList.includes(o.previewTheme)?"dark":o.theme;return{js:{src:e,...l},css:{href:t[o.codeTheme]?t[o.codeTheme][r]:De.atom[r],...t[o.codeTheme]&&a[o.codeTheme]?a[o.codeTheme][r]:a.atom?a.atom[r]:{}}}})),g("showCodeRowNumber",o.showCodeRowNumber);const r=h(()=>{const l={...Re,...ze.editorConfig.languageUserDefined};return e(t(Re["en-US"]),l[o.language]||{})});return g("usedLanguageText",r),g("previewTheme",h(()=>o.previewTheme)),g("customIcon",h(()=>o.customIcon)),{editorId:a}},Kt=e=>{const t=b();return e.id||e.editorId||`${Be}-${t}`},Xt={modelValue:{type:String,default:""},onChange:{type:Function,default:void 0},theme:{type:String,default:"light"},class:{type:String,default:""},language:{type:String,default:"zh-CN"},onHtmlChanged:{type:Function,default:void 0},onGetCatalog:{type:Function,default:void 0},editorId:{type:String,default:void 0},id:{type:String,default:void 0},showCodeRowNumber:{type:Boolean,default:!0},previewTheme:{type:String,default:"default"},style:{type:Object,default:()=>({})},mdHeadingId:{type:Function,default:e=>e},sanitize:{type:Function,default:e=>e},noMermaid:{type:Boolean,default:!1},noKatex:{type:Boolean,default:!1},codeTheme:{type:String,default:"atom"},formatCopiedText:{type:Function,default:e=>e},codeStyleReverse:{type:Boolean,default:!0},codeStyleReverseList:{type:Array,default:["default","mk-cute"]},noHighlight:{type:Boolean,default:!1},noImgZoomIn:{type:Boolean,default:!1},customIcon:{type:Object,default:{}},sanitizeMermaid:{type:Function,default:e=>Promise.resolve(e)},codeFoldable:{type:Boolean,default:!0},autoFoldThreshold:{type:Number,default:30},onRemount:{type:Function,default:void 0}},Gt={...Xt,onSave:{type:Function,default:void 0},onUploadImg:{type:Function,default:void 0},pageFullscreen:{type:Boolean,default:!1},preview:{type:Boolean,default:!0},htmlPreview:{type:Boolean,default:!1},toolbars:{type:Array,default:Ve},toolbarsExclude:{type:Array,default:[]},noPrettier:{type:Boolean,default:!1},tabWidth:{type:Number,default:2},tableShape:{type:Array,default:[6,4]},placeholder:{type:String,default:""},defToolbars:{type:[String,Object],default:void 0},onError:{type:Function,default:void 0},footers:{type:Array,default:Pe},scrollAuto:{type:Boolean,default:!0},defFooters:{type:[String,Object],default:void 0},noUploadImg:{type:Boolean,default:!1},autoFocus:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},readOnly:{type:Boolean,default:!1},maxLength:{type:Number,default:void 0},autoDetectCode:{type:Boolean,default:!1},onBlur:{type:Function,default:void 0},onFocus:{type:Function,default:void 0},completions:{type:Array,default:void 0},showToolbarName:{type:Boolean,default:!1},onInput:{type:Function,default:void 0},onDrop:{type:Function,default:void 0},inputBoxWidth:{type:String,default:"50%"},oninputBoxWidthChange:{type:Function,default:void 0},transformImgUrl:{type:Function,default:e=>e},catalogLayout:{type:String,default:"fixed"},catalogMaxDepth:{type:Number,default:void 0},insertLinkDirect:{type:Boolean,default:!1}},Yt=["onHtmlChanged","onGetCatalog","onChange","onRemount","update:modelValue"],Zt=[...Yt,"onSave","onUploadImg","onError","onBlur","onFocus","onInput","onDrop","oninputBoxWidthChange"],Jt=s({name:"MdPreview",props:Xt,emits:Yt,setup(e,t){const{noKatex:o,noMermaid:l,noHighlight:n}=e,i=C(),{editorId:a}=Ut(e,i);return((e,t,o)=>{const{editorId:l}=o,n={rerender(){Ge.emit(l,vt)}};t.expose(n)})(0,t,{editorId:a}),u(()=>{Ge.clear(a)}),()=>p("div",{id:a,class:[Be,e.class,"dark"===e.theme&&`${Be}-dark`,`${Be}-previewOnly`],style:e.style,ref:i},[p(_t,{modelValue:e.modelValue,onChange:o=>{var l;null==(l=e.onChange)||l.call(e,o),t.emit("onChange",o),t.emit("update:modelValue",o)},onHtmlChanged:o=>{var l;null==(l=e.onHtmlChanged)||l.call(e,o),t.emit("onHtmlChanged",o)},onGetCatalog:o=>{var l;null==(l=e.onGetCatalog)||l.call(e,o),t.emit("onGetCatalog",o)},mdHeadingId:e.mdHeadingId,noMermaid:l,sanitize:e.sanitize,noKatex:o,formatCopiedText:e.formatCopiedText,noHighlight:n,noImgZoomIn:e.noImgZoomIn,previewOnly:!0,sanitizeMermaid:e.sanitizeMermaid,codeFoldable:e.codeFoldable,autoFoldThreshold:e.autoFoldThreshold,onRemount:()=>{var o;null==(o=e.onRemount)||o.call(e),t.emit("onRemount")}},null)])}});Jt.install=e=>(e.component(Jt.name,Jt),e);const Qt={bold:ue,underline:ce,italic:de,"strike-through":se,title:re,sub:ae,sup:ie,quote:ne,"unordered-list":le,"ordered-list":oe,task:te,"code-row":ee,code:K,link:Q,image:J,table:Z,revoke:Y,next:G,save:X,prettier:K,minimize:U,maximize:_,"fullscreen-exit":W,fullscreen:q,"preview-only":z,preview:R,"preview-html":P,catalog:V,github:()=>p("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-github-icon"},[p("path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"},null),p("path",{d:"M9 18c-4.51 2-5-2-7-2"},null)]),mermaid:D,formula:N,close:O,delete:B,upload:H},eo=s({name:`${Be}-icon-set`,props:{name:{type:String,default:""}},setup:e=>()=>k(Qt[e.name],{class:`${Be}-icon`})}),to=s({name:`${Be}-icon`,props:{name:{type:String,default:""}},setup(e){const t=v("customIcon");return()=>{const o=t.value[e.name];return"object"==typeof o?"object"==typeof o.component?k(o.component,o.props):p("span",{innerHTML:o.component},null):p(eo,{name:e.name},null)}}}),oo=s({name:"MdModal",props:{title:{type:[String,Object],default:""},visible:{type:Boolean,default:!1},width:{type:String,default:"auto"},height:{type:String,default:"auto"},onClose:{type:Function},showAdjust:{type:Boolean,default:!1},isFullscreen:{type:Boolean,default:!1},onAdjust:{type:Function,default:()=>{}},class:{type:String,default:void 0},style:{type:[Object,String],default:()=>({})},showMask:{type:Boolean,default:!0}},emits:["onClose"],setup(e,t){const o=v("theme"),l=v("rootRef"),n=C(e.visible),i=C([`${Be}-modal`]),a=C(),r=C(),s=C(),u=S();let m=()=>{};const g=$({maskStyle:{zIndex:-1},modalStyle:{zIndex:-1},initPos:{left:"0px",top:"0px"},historyPos:{left:"0px",top:"0px"}}),f=h(()=>e.isFullscreen?{width:"100%",height:"100%"}:{width:e.width,height:e.height});d(()=>e.isFullscreen,e=>{e?m():y(()=>{m=wt(r.value,(e,t)=>{g.initPos.left=e+"px",g.initPos.top=t+"px"})})}),d(()=>e.visible,t=>{t?(g.maskStyle.zIndex=ze.editorConfig.zIndex+St(),g.modalStyle.zIndex=ze.editorConfig.zIndex+St(),i.value.push("zoom-in"),n.value=t,y(()=>{const t=a.value.offsetWidth/2,o=a.value.offsetHeight/2,l=document.documentElement.clientWidth/2,n=document.documentElement.clientHeight/2;g.initPos.left=l-t+"px",g.initPos.top=n-o+"px",e.isFullscreen||(m=wt(r.value,(e,t)=>{g.initPos.left=e+"px",g.initPos.top=t+"px"}))}),setTimeout(()=>{i.value=i.value.filter(e=>"zoom-in"!==e)},140)):(i.value.push("zoom-out"),m(),setTimeout(()=>{i.value=i.value.filter(e=>"zoom-out"!==e),n.value=t},130))});const b=h(()=>({display:n.value?"block":"none"})),k=h(()=>"string"==typeof e.style?[e.style,b.value].join("; "):e.style instanceof Object?{...b.value,...e.style}:b.value);return c(()=>{var e;const t=null==(e=l.value)?void 0:e.getRootNode();s.value=t instanceof Document?document.body:t}),()=>{const l=We({ctx:t}),n=We({props:e,ctx:t},"title");return s.value?p(w,{to:s.value},{default:()=>[p("div",{ref:u,class:`${Be}-modal-container`,"data-theme":o.value},[p("div",{class:e.class,style:k.value},[e.showMask&&p("div",{class:`${Be}-modal-mask`,style:g.maskStyle,onClick:()=>{var o;null==(o=e.onClose)||o.call(e),t.emit("onClose")}},null),p("div",{class:i.value,style:{...g.modalStyle,...g.initPos,...f.value},ref:a},[p("div",{class:`${Be}-modal-header`,ref:r},[n||""]),p("div",{class:`${Be}-modal-body`},[l]),p("div",{class:`${Be}-modal-func`},[e.showAdjust&&p("div",{class:`${Be}-modal-adjust`,onClick:t=>{t.stopPropagation(),e.isFullscreen?g.initPos=g.historyPos:(g.historyPos=g.initPos,g.initPos={left:"0",top:"0"}),e.onAdjust(!e.isFullscreen)}},[p(to,{name:e.isFullscreen?"minimize":"maximize"},null)]),p("div",{class:`${Be}-modal-close`,onClick:o=>{var l;o.stopPropagation(),null==(l=e.onClose)||l.call(e),t.emit("onClose")}},[p(to,{name:"close"},null)])])])])])]}):""}}});oo.install=e=>(e.component(oo.name,oo),e);const lo=`.${Be}-preview > [data-line]`,no=(e,t)=>+getComputedStyle(e).getPropertyValue(t).replace("px",""),io=(e,t)=>{const o=l(()=>{e.removeEventListener("scroll",n),e.addEventListener("scroll",n),t.removeEventListener("scroll",n),t.addEventListener("scroll",n)},50),n=l=>{const i=e.clientHeight,a=t.clientHeight,r=(e.scrollHeight-i)/(t.scrollHeight-a);l.target===e?(t.removeEventListener("scroll",n),t.scrollTo({top:e.scrollTop/r}),o()):(e.removeEventListener("scroll",n),e.scrollTo({top:t.scrollTop*r}),o())};return[()=>{o().finally(()=>{e.dispatchEvent(new Event("scroll"))})},()=>{e.removeEventListener("scroll",n),t.removeEventListener("scroll",n)}]},ao=(e,t,o)=>{const{view:l}=o,i=n(),a=e=>l.lineBlockAt(l.state.doc.line(e+1).from).top,r=e=>l.lineBlockAt(l.state.doc.line(e+1).from).bottom;let s=[],d=[],c=[];const u=(e,t)=>{let o=1;for(let l=d.length-1;l-1>=0;l--){const e=d[l],n=d[l-1];if(e.offsetTop+e.offsetHeight>t&&n.offsetTop<t){o=Number(n.dataset.line);break}}for(let l=s.length-1;l>=0;l--){const t=r(s[l].end),n=a(s[l].start);if(t>e&&n<=e){o=o<s[l].start?o:s[l].start;break}}return o};let m=0,p=0;const v=o=>{var n;const{scrollDOM:v,contentHeight:g}=l;return!(g<=v.clientHeight||t.firstElementChild.clientHeight<=t.clientHeight)&&!(l.state.doc.lines<=(null==(n=s[s.length-1])?void 0:n.end))&&void(o.target===e?(()=>{var e,o,n;if(0!==p)return!1;m++;const{scrollDOM:d,contentHeight:c}=l;let v=no(t,"padding-top");const g=l.lineBlockAtHeight(d.scrollTop),{number:h}=l.state.doc.lineAt(g.from),f=s[h-1];if(!f)return!1;let b=1;const y=t.querySelector(`[data-line="${f.start}"]`)||(null==(e=t.firstElementChild)?void 0:e.firstElementChild),k=t.querySelector(`[data-line="${f.end+1}"]`)||(null==(o=t.lastElementChild)?void 0:o.lastElementChild),w=d.scrollHeight-d.clientHeight,x=t.scrollHeight-t.clientHeight;let $=a(f.start),C=r(f.end),T=y.offsetTop,S=k.offsetTop-T;0===$&&(T=0,y===k?(v=0,C=c-d.offsetHeight,S=x):S=k.offsetTop),b=(d.scrollTop-$)/(C-$);const E=k==(null==(n=t.lastElementChild)?void 0:n.lastElementChild)?k.offsetTop+k.clientHeight:k.offsetTop;if(C>=w||E>x){const e=u(w,x);$=a(e),b=(d.scrollTop-$)/(w-$);const o=t.querySelector(`[data-line="${e}"]`);$>0&&o&&(T=o.offsetTop),S=x-T+no(t,"padding-top")}i(t,T-v+S*b,()=>{m--})})():(()=>{var o,n,r,v,g,h;if(0!==m)return;p++;const{scrollDOM:f}=l,b=t.scrollTop,y=t.scrollHeight,k=f.scrollHeight-f.clientHeight,w=t.scrollHeight-t.clientHeight;let x=null==(o=t.firstElementChild)?void 0:o.firstElementChild,$=null==(n=t.firstElementChild)?void 0:n.lastElementChild;if(c.length>0){let e=Math.ceil(c[c.length-1]*(b/y)),o=c.findLastIndex(t=>t<=e);o=-1===o?0:o,e=c[o];for(let t=o;t>=0&&t<c.length;){if(d[t].offsetTop>b){if(t-1>=0){t--;continue}e=-1,o=t;break}if(!(t+1<c.length&&d[t+1].offsetTop<b)){e=c[t],o=t;break}t++}switch(o){case-1:x=null==(r=t.firstElementChild)?void 0:r.firstElementChild,$=d[o];break;case c.length-1:x=d[o],$=null==(v=t.firstElementChild)?void 0:v.lastElementChild;break;default:x=d[o],$=d[o+1===d.length?o:o+1]}}let C=x===(null==(g=t.firstElementChild)?void 0:g.firstElementChild)?0:x.offsetTop-no(x,"margin-top"),T=$.offsetTop,S=0;const{start:E,end:I}=s[Number(x.dataset.line||0)];let A=a(E);const L=a(I+1===l.state.doc.lines?I:I+1);let F=0;if(L>k||$.offsetTop+$.offsetHeight>w){const e=u(k,w),o=t.querySelector(`[data-line="${e}"]`);C=o?o.offsetTop-no(o,"margin-top"):C,A=a(e),S=(b-C)/(w-C),F=k-A}else x===(null==(h=t.firstElementChild)?void 0:h.firstElementChild)?(x===$?(T=$.offsetTop+$.offsetHeight+ +getComputedStyle($).marginBottom.replace("px",""),F=L):F=L,S=Math.max(b/T,0)):(S=Math.max((b-C)/(T-C),0),F=L-A);i(e,A+F*S,()=>{p--})})())};return[()=>{(()=>{s=[],d=Array.from(t.querySelectorAll(lo)),c=d.map(e=>Number(e.dataset.line));const e=[...c],{lines:o}=l.state.doc;let n=e.shift()||0,i=e.shift()||o;for(let t=0;t<o;t++)t===i&&(n=t,i=e.shift()||o),s.push({start:n,end:i-1})})(),e.addEventListener("scroll",v),t.addEventListener("scroll",v),e.dispatchEvent(new Event("scroll"))},()=>{e.removeEventListener("scroll",v),t.removeEventListener("scroll",v)}]},ro=s({props:{tocItem:{type:Object,default:()=>({})},mdHeadingId:{type:Function,default:()=>{}},onActive:{type:Function,default:()=>{}},onClick:{type:Function,default:()=>{}},scrollElementOffsetTop:{type:Number,default:0}},setup(e){const t=v("scrollElementRef"),o=v("roorNodeRef"),l=C();return d(()=>e.tocItem.active,t=>{t&&e.onActive(e.tocItem,l.value)}),c(()=>{e.tocItem.active&&e.onActive(e.tocItem,l.value)}),()=>{const{tocItem:n,mdHeadingId:i,onClick:a,scrollElementOffsetTop:r}=e;return p("div",{ref:l,class:[`${Be}-catalog-link`,n.active&&`${Be}-catalog-active`],onClick:e=>{if(e.stopPropagation(),a(e,n),e.defaultPrevented)return;const l=i(n.text,n.level,n.index),s=o.value.getElementById(l),d=t.value;if(s&&d){let e=s.offsetParent,t=s.offsetTop;if(d.contains(e))for(;e&&d!=e;)t+=null==e?void 0:e.offsetTop,e=null==e?void 0:e.offsetParent;let o=0;s.previousElementSibling||(o=no(s,"margin-top")),null==d||d.scrollTo({top:t-r-o,behavior:"smooth"})}}},[p("span",{title:n.text},[n.text]),n.children&&n.children.length>0&&p("div",{class:`${Be}-catalog-wrapper`},[n.children.map(t=>p(ro,{mdHeadingId:i,key:`${n.text}-link-${t.level}-${t.text}`,tocItem:t,onActive:e.onActive,onClick:a,scrollElementOffsetTop:r},null))])])}}}),so=s({name:"MdCatalog",props:{editorId:{type:String,default:void 0},class:{type:String,default:""},mdHeadingId:{type:Function,default:e=>e},scrollElement:{type:[String,Object],default:void 0},theme:{type:String,default:"light"},offsetTop:{type:Number,default:20},scrollElementOffsetTop:{type:Number,default:0},onClick:{type:Function,default:void 0},onActive:{type:Function,default:void 0},isScrollElementInShadow:{type:Boolean,default:!1},syncWith:{type:String,default:"preview"},catalogMaxDepth:{type:Number,default:void 0}},emits:["onClick","onActive"],setup(e,t){const o=e.editorId,l=`#${o}-preview-wrapper`,n=$({list:[],show:!1,scrollElement:e.scrollElement||l}),i=S(),a=C(),r=C(),s=C(),m=C(),v=S(),b=C({});g("scrollElementRef",r),g("roorNodeRef",m);const y=h(()=>{const t=[];return n.list.forEach((o,l)=>{if(e.catalogMaxDepth&&o.level>e.catalogMaxDepth)return;const{text:n,level:a,line:r}=o,s={level:a,text:n,line:r,index:l+1,active:i.value===o};if(0===t.length)t.push(s);else{let e=t[t.length-1];if(s.level>e.level)for(let t=e.level+1;t<=6;t++){const{children:t}=e;if(!t){e.children=[s];break}if(e=t[t.length-1],s.level<=e.level){t.push(s);break}}else t.push(s)}}),t}),k=t=>{if(0===t.length)return i.value=void 0,n.list=[],!1;const{activeHead:o}=t.reduce((t,o,l)=>{var n;let i=0;if("preview"===e.syncWith){const t=null==(n=m.value)?void 0:n.getElementById(e.mdHeadingId(o.text,o.level,l+1));t instanceof HTMLElement&&(i=((e,t)=>{if(!e||!t)return 0;const o=null==e?void 0:e.getBoundingClientRect();if(t===document.documentElement)return o.top-t.clientTop;const l=null==t?void 0:t.getBoundingClientRect();return o.top-l.top})(t,r.value))}else{const e=v.value;e&&(i=e.lineBlockAt(e.state.doc.line(o.line+1).from).top-e.scrollDOM.scrollTop)}return i<e.offsetTop&&i>t.minTop?{activeHead:o,minTop:i}:t},{activeHead:t[0],minTop:Number.MIN_SAFE_INTEGER});i.value=o,n.list=t},w=(o,l)=>{var n;b.value.top=l.offsetTop+no(l,"padding-top")+"px",null==(n=e.onActive)||n.call(e,o,l),t.emit("onActive",o,l)},x=()=>{k(n.list)},T=t=>{var o,i,d;if(null==(o=s.value)||o.removeEventListener("scroll",x),"editor"===e.syncWith)s.value=null==(i=v.value)?void 0:i.scrollDOM;else{const t=(()=>{var t;if(n.scrollElement instanceof HTMLElement)return n.scrollElement;let o=document;return(n.scrollElement===l||e.isScrollElementInShadow)&&(o=null==(t=a.value)?void 0:t.getRootNode()),o.querySelector(n.scrollElement)})();r.value=t,s.value=t===document.documentElement?document:t}k(t),null==(d=s.value)||d.addEventListener("scroll",x)},E=e=>{v.value=e};return d([()=>e.syncWith,v,()=>e.catalogMaxDepth],()=>{T(n.list)}),c(()=>{m.value=a.value.getRootNode(),Ge.on(o,{name:mt,callback:T}),Ge.on(o,{name:bt,callback:E}),Ge.emit(o,pt),Ge.emit(o,ft)}),u(()=>{var e;Ge.remove(o,mt,T),Ge.remove(o,bt,E),null==(e=s.value)||e.removeEventListener("scroll",x)}),()=>p("div",{class:[`${Be}-catalog`,"dark"===e.theme&&`${Be}-catalog-dark`,e.class||""],ref:a},[y.value.length>0&&p(f,null,[p("div",{class:`${Be}-catalog-indicator`,style:b.value},null),p("div",{class:`${Be}-catalog-container`},[y.value.map(o=>p(ro,{mdHeadingId:e.mdHeadingId,tocItem:o,key:`link-${o.level}-${o.text}`,onActive:w,onClick:(o,l)=>{var n;null==(n=e.onClick)||n.call(e,o,l),t.emit("onClick",o,l)},scrollElementOffsetTop:e.scrollElementOffsetTop},null))])])])}});so.install=e=>(e.component(so.name,so),e);const co=s({name:"NormalToolbar",props:{title:{type:String,default:""},trigger:{type:[String,Object],default:void 0},onClick:{type:Function,default:void 0},insert:{type:Function,default:void 0},language:{type:String,default:void 0},theme:{type:String,default:void 0},previewTheme:{type:String,default:void 0},codeTheme:{type:String,default:void 0},disabled:{type:Boolean,default:void 0},showToolbarName:{type:Boolean,default:void 0}},emits:["onClick"],setup:(e,t)=>()=>{const o=We({props:e,ctx:t},"trigger"),l=We({props:e,ctx:t});return p("div",{class:[`${Be}-toolbar-item`,e.disabled&&`${Be}-disabled`],title:e.title,onClick:o=>{var l;e.disabled||(null==(l=e.onClick)||l.call(e,o),t.emit("onClick",o))}},[l||o])}});co.install=e=>(e.component(co.name,co),e);const uo=s({name:"ModalToolbar",props:{title:{type:String,default:""},modalTitle:{type:[String,Object],default:""},visible:{type:Boolean,default:void 0},width:{type:String,default:"auto"},height:{type:String,default:"auto"},trigger:{type:[String,Object],default:void 0},onClick:{type:Function,default:void 0},onClose:{type:Function,default:void 0},showAdjust:{type:Boolean,default:!1},isFullscreen:{type:Boolean,default:!1},onAdjust:{type:Function,default:void 0},class:{type:String,default:void 0},style:{type:[Object,String],default:void 0},showMask:{type:Boolean,default:!0},insert:{type:Function,default:void 0},language:{type:String,default:void 0},theme:{type:String,default:void 0},previewTheme:{type:String,default:void 0},codeTheme:{type:String,default:void 0},disabled:{type:Boolean,default:void 0},showToolbarName:{type:Boolean,default:void 0}},emits:["onClick","onClose","onAdjust"],setup:(e,t)=>()=>{const o=We({props:e,ctx:t},"trigger"),l=We({props:e,ctx:t},"modalTitle"),n=We({props:e,ctx:t});return p(f,null,[p("div",{class:[`${Be}-toolbar-item`,e.disabled&&`${Be}-disabled`],title:e.title,onClick:()=>{var o;e.disabled||(null==(o=e.onClick)||o.call(e),t.emit("onClick"))}},[o]),p(oo,{style:e.style,class:e.class,width:e.width,height:e.height,title:l,visible:e.visible,showMask:e.showMask,onClose:()=>{var o;null==(o=e.onClose)||o.call(e),t.emit("onClose")},showAdjust:e.showAdjust,isFullscreen:e.isFullscreen,onAdjust:o=>{var l;null==(l=e.onAdjust)||l.call(e,o),t.emit("onAdjust",o)}},(i=n,"function"==typeof i||"[object Object]"===Object.prototype.toString.call(i)&&!x(i)?n:{default:()=>[n]}))]);var i}});uo.install=e=>(e.component(uo.name,uo),e);var mo=Object.defineProperty,po=(e,t,o)=>((e,t,o)=>t in e?mo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o)(e,"symbol"!=typeof t?t+"":t,o);const vo=s({name:`${Be}-divider`,setup:()=>()=>p("div",{class:`${Be}-divider`},null)}),go={noPrettier:{type:Boolean},toolbars:{type:Array,default:()=>[]},toolbarsExclude:{type:Array,default:()=>[]},setting:{type:Object,default:()=>({})},screenfull:{type:Object,default:null},screenfullJs:{type:String,default:""},updateSetting:{type:Function,default:()=>{}},tableShape:{type:Array,default:()=>[6,4]},defToolbars:{type:Object},noUploadImg:{type:Boolean},showToolbarName:{type:Boolean},catalogVisible:{type:Boolean},codeTheme:{type:String},insertLinkDirect:{type:Boolean}},ho=s({name:"TableShape",props:{tableShape:{type:Array,default:()=>[6,4]},onSelected:{type:Function,default:()=>{}}},setup(e){const t=$({x:-1,y:-1}),o=h(()=>JSON.stringify(e.tableShape)),l=()=>{const e=[...JSON.parse(o.value)];return(!e[2]||e[2]<e[0])&&(e[2]=e[0]),(!e[3]||e[3]<e[3])&&(e[3]=e[1]),e},n=C(l());return d([o],()=>{n.value=l()}),()=>p("div",{class:`${Be}-table-shape`,onMouseleave:()=>{n.value=l(),t.x=-1,t.y=-1}},[new Array(n.value[1]).fill("").map((o,l)=>p("div",{class:`${Be}-table-shape-row`,key:`table-shape-row-${l}`},[new Array(n.value[0]).fill("").map((o,i)=>p("div",{class:`${Be}-table-shape-col`,key:`table-shape-col-${i}`,onMouseenter:()=>{t.x=l,t.y=i,i+1===n.value[0]&&i+1<n.value[2]?n.value[0]++:i+2<n.value[0]&&n.value[0]>e.tableShape[0]&&n.value[0]--,l+1===n.value[1]&&l+1<n.value[3]?n.value[1]++:l+2<n.value[1]&&n.value[1]>e.tableShape[1]&&n.value[1]--},onClick:()=>{e.onSelected(t)}},[p("div",{class:[`${Be}-table-shape-col-default`,l<=t.x&&i<=t.y&&`${Be}-table-shape-col-include`]},null)]))]))])}}),fo={type:{type:String,default:"link"},visible:{type:Boolean,default:!1},onCancel:{type:Function,default:()=>{}},onOk:{type:Function,default:()=>{}}},bo=s({name:`${Be}-modal-link`,props:fo,setup(e){const t=v("usedLanguageText"),o=v("editorId"),l=h(()=>{var o,l;switch(e.type){case"link":return null==(o=t.value.linkModalTips)?void 0:o.linkTitle;case"image":return null==(l=t.value.linkModalTips)?void 0:l.imageTitle;default:return""}}),n=$({desc:"",url:""});return d(()=>e.visible,e=>{e||setTimeout(()=>{n.desc="",n.url=""},200)}),()=>p(oo,{title:l.value,visible:e.visible,onClose:e.onCancel},{default:()=>{var l,i,a,r,s;return[p("div",{class:`${Be}-form-item`},[p("label",{class:`${Be}-label`,for:`link-desc-${o}`},[null==(l=t.value.linkModalTips)?void 0:l.descLabel]),p("input",{placeholder:null==(i=t.value.linkModalTips)?void 0:i.descLabelPlaceHolder,class:`${Be}-input`,id:`link-desc-${o}`,type:"text",value:n.desc,onChange:e=>{n.desc=e.target.value},autocomplete:"off"},null)]),p("div",{class:`${Be}-form-item`},[p("label",{class:`${Be}-label`,for:`link-url-${o}`},[null==(a=t.value.linkModalTips)?void 0:a.urlLabel]),p("input",{placeholder:null==(r=t.value.linkModalTips)?void 0:r.urlLabelPlaceHolder,class:`${Be}-input`,id:`link-url-${o}`,type:"text",value:n.url,onChange:e=>{n.url=e.target.value},autocomplete:"off"},null)]),p("div",{class:`${Be}-form-item`},[p("button",{class:[`${Be}-btn`,`${Be}-btn-row`],type:"button",onClick:()=>{e.onOk(n),n.desc="",n.url=""}},[null==(s=t.value.linkModalTips)?void 0:s.buttonOK])])]}})}}),yo={visible:{type:Boolean,default:!1},onCancel:{type:Function,default:()=>{}},onOk:{type:Function,default:()=>{}}},ko=s({name:`${Be}-modal-clip`,props:yo,setup(e){const t=v("usedLanguageText"),o=v("editorId"),l=v("rootRef");let n=ze.editorExtensions.cropper.instance;const i=C(),a=C(),r=C(),s=$({cropperInited:!1,imgSelected:!1,imgSrc:"",isFullscreen:!1});let c=null;d(()=>e.visible,()=>{e.visible&&!s.cropperInited&&(n=n||window.Cropper,i.value.onchange=()=>{if(!n)return void Ge.emit(o,at,{name:"Cropper",message:"Cropper is undefined"});const e=i.value.files||[];if(s.imgSelected=!0,(null==e?void 0:e.length)>0){const t=new FileReader;t.onload=e=>{s.imgSrc=e.target.result},t.readAsDataURL(e[0])}})}),d(()=>[s.imgSelected],()=>{r.value.style=""}),d([T(()=>s.isFullscreen),T(()=>s.imgSrc)],()=>{s.imgSrc&&y(()=>{null==c||c.destroy(),r.value.style="",a.value&&(c=new n(a.value,{viewMode:2,preview:l.value.getRootNode().querySelector(`.${Be}-clip-preview-target`)}))})});const u=()=>{c.clear(),c.destroy(),c=null,i.value.value="",s.imgSelected=!1};return()=>{var l;return p(oo,{class:`${Be}-modal-clip`,title:null==(l=t.value.clipModalTips)?void 0:l.title,visible:e.visible,onClose:e.onCancel,showAdjust:!0,isFullscreen:s.isFullscreen,onAdjust:e=>{s.isFullscreen=e},width:"668px",height:"421px"},{default:()=>{var l,n,d;return[p("div",{class:`${Be}-form-item ${Be}-clip`},[p("div",{class:`${Be}-clip-main`},[s.imgSelected?p("div",{class:`${Be}-clip-cropper`},[p("img",{src:s.imgSrc,ref:a,style:{display:"none"},alt:""},null),p("div",{class:`${Be}-clip-delete`,onClick:u},[p(to,{name:"delete"},null)])]):p("div",{class:`${Be}-clip-upload`,onClick:()=>{i.value.click()},role:"button",tabindex:"0","aria-label":null==(l=t.value.imgTitleItem)?void 0:l.upload},[p(to,{name:"upload"},null)])]),p("div",{class:`${Be}-clip-preview`},[p("div",{class:`${Be}-clip-preview-target`,ref:r},null)])]),p("div",{class:`${Be}-form-item`},[p("button",{class:`${Be}-btn`,type:"button",onClick:()=>{if(c){const t=c.getCroppedCanvas();Ge.emit(o,st,[Tt(t.toDataURL("image/png"))],e.onOk),u()}}},[(null==(n=t.value.clipModalTips)?void 0:n.buttonUpload)||(null==(d=t.value.linkModalTips)?void 0:d.buttonOK)])]),p("input",{ref:i,accept:"image/*",type:"file",multiple:!1,style:{display:"none"},"aria-hidden":"true"},null)]}})}}}),wo={type:{type:String,default:"link"},linkVisible:{type:Boolean,default:!1},clipVisible:{type:Boolean,default:!1},onCancel:{type:Function,default:()=>{}},onOk:{type:Function,default:()=>{}}},xo=s({name:`${Be}-modals`,props:wo,setup:e=>()=>p(f,null,[p(bo,{type:e.type,visible:e.linkVisible,onOk:e.onOk,onCancel:e.onCancel},null),p(ko,{visible:e.clipVisible,onOk:e.onOk,onCancel:e.onCancel},null)])}),$o=s({name:"MDEditorToolbar",props:go,setup(e){const t=v("editorId"),o=v("usedLanguageText"),l=v("theme"),n=v("previewTheme"),r=v("language"),s=v("disabled"),{fullscreenHandler:u}=(e=>{const t=v("editorId"),{editorExtensions:o,editorExtensionsAttrs:l}=ze;let n=o.screenfull.instance;const i=C(!1),a=e=>{n?n.isEnabled&&(i.value=!0,(void 0===e?!n.isFullscreen:e)?n.request():n.exit()):Ge.emit(t,at,{name:"fullscreen",message:"fullscreen is undefined"})},r=()=>{n&&n.isEnabled&&n.on("change",()=>{(i.value||e.setting.fullscreen)&&(i.value=!1,e.updateSetting("fullscreen"))})},s=()=>{n=window.screenfull,r()};return c(()=>{var e;r(),n||xt("script",{...null==(e=l.screenfull)?void 0:e.js,src:o.screenfull.js,id:Et.screenfull,onload:s},"screenfull")}),c(()=>{Ge.on(t,{name:Je,callback:a})}),{fullscreenHandler:a}})(e),g=`${t}-toolbar-wrapper`,b=C(),k=$({title:!1,catalog:!1,image:!1,table:!1,mermaid:!1,katex:!1}),w=(e,o)=>{if(null==s?void 0:s.value)return!1;Ge.emit(t,rt,e,o)},x=$({type:"link",linkVisible:!1,clipVisible:!1}),T=C();c(()=>{Ge.on(t,{name:dt,callback(e){x.type=e,x.linkVisible=!0}})});const S=h(()=>{const t=e.toolbars.filter(t=>!e.toolbarsExclude.includes(t)),o=t.indexOf("=");return[-1===o?t:t.slice(0,o+1),-1===o?[]:t.slice(o,Number.MAX_SAFE_INTEGER)]}),E=C(),I=()=>{Ge.emit(t,st,Array.from(E.value.files||[])),E.value.value=""};c(()=>{E.value.addEventListener("change",I)});const A=i=>{var d,c,v,h,f,b,y,$,C,T,S,I,A,L,F,j,M,H,B,O,N,D,V,P,R,z,q,W,_,U,K,X,G,Y,Z,J,Q,ee,te,oe,le,ne,ie,ae,re,se,de,ce,ue,me,pe,ve,ge,he,fe,be,ye,ke,we,xe,$e,Ce,Te,Se,Ee,Ie,Ae,Le,Fe,je,Me,He,Oe,Ne,De,Pe,Re,ze,qe,We,_e;if(!Ve.includes(i)){if(e.defToolbars instanceof Array){const o=e.defToolbars[i];return o?m(o,{theme:(null==(je=o.props)?void 0:je.theme)||l.value,previewTheme:(null==(Me=o.props)?void 0:Me.theme)||n.value,language:(null==(He=o.props)?void 0:He.theme)||r.value,codeTheme:(null==(Oe=o.props)?void 0:Oe.codeTheme)||e.codeTheme,disabled:(null==(Ne=o.props)?void 0:Ne.disabled)||(null==s?void 0:s.value),showToolbarName:(null==(De=o.props)?void 0:De.showToolbarName)||e.showToolbarName,insert(e){Ge.emit(t,rt,"universal",{generate:e})}}):""}if(e.defToolbars&&e.defToolbars.children instanceof Array){const o=e.defToolbars.children[i];return o?m(o,{theme:(null==(Pe=o.props)?void 0:Pe.theme)||l.value,previewTheme:(null==(Re=o.props)?void 0:Re.theme)||n.value,language:(null==(ze=o.props)?void 0:ze.theme)||r.value,codeTheme:(null==(qe=o.props)?void 0:qe.codeTheme)||e.codeTheme,disabled:(null==(We=o.props)?void 0:We.disabled)||(null==s?void 0:s.value),showToolbarName:(null==(_e=o.props)?void 0:_e.showToolbarName)||e.showToolbarName,insert(e){Ge.emit(t,rt,"universal",{generate:e})}}):""}return""}switch(i){case"-":return p(vo,null,null);case"bold":return p("div",{class:[`${Be}-toolbar-item`,(null==s?void 0:s.value)&&`${Be}-disabled`],title:null==(d=o.value.toolbarTips)?void 0:d.bold,onClick:()=>{w("bold")}},[p(to,{name:"bold"},null),e.showToolbarName&&p("div",{class:`${Be}-toolbar-item-name`},[null==(c=o.value.toolbarTips)?void 0:c.bold])]);case"underline":return p("div",{class:[`${Be}-toolbar-item`,(null==s?void 0:s.value)&&`${Be}-disabled`],title:null==(v=o.value.toolbarTips)?void 0:v.underline,onClick:()=>{w("underline")}},[p(to,{name:"underline"},null),e.showToolbarName&&p("div",{class:`${Be}-toolbar-item-name`},[null==(h=o.value.toolbarTips)?void 0:h.underline])]);case"italic":return p("div",{class:[`${Be}-toolbar-item`,(null==s?void 0:s.value)&&`${Be}-disabled`],title:null==(f=o.value.toolbarTips)?void 0:f.italic,onClick:()=>{w("italic")}},[p(to,{name:"italic"},null),e.showToolbarName&&p("div",{class:`${Be}-toolbar-item-name`},[null==(b=o.value.toolbarTips)?void 0:b.italic])]);case"strikeThrough":return p("div",{class:[`${Be}-toolbar-item`,(null==s?void 0:s.value)&&`${Be}-disabled`],title:null==(y=o.value.toolbarTips)?void 0:y.strikeThrough,onClick:()=>{w("strikeThrough")}},[p(to,{name:"strike-through"},null),e.showToolbarName&&p("div",{class:`${Be}-toolbar-item-name`},[null==($=o.value.toolbarTips)?void 0:$.strikeThrough])]);case"title":return p(Ue,{relative:`#${g}`,visible:k.title,onChange:e=>{k.title=e},disabled:null==s?void 0:s.value,overlay:p("ul",{class:`${Be}-menu`,onClick:()=>{k.title=!1},role:"menu"},[p("li",{class:`${Be}-menu-item ${Be}-menu-item-title`,onClick:()=>{w("h1")},role:"menuitem",tabindex:"0"},[null==(C=o.value.titleItem)?void 0:C.h1]),p("li",{class:`${Be}-menu-item ${Be}-menu-item-title`,onClick:()=>{w("h2")},role:"menuitem",tabindex:"0"},[null==(T=o.value.titleItem)?void 0:T.h2]),p("li",{class:`${Be}-menu-item ${Be}-menu-item-title`,onClick:()=>{w("h3")},role:"menuitem",tabindex:"0"},[null==(S=o.value.titleItem)?void 0:S.h3]),p("li",{class:`${Be}-menu-item ${Be}-menu-item-title`,onClick:()=>{w("h4")},role:"menuitem",tabindex:"0"},[null==(I=o.value.titleItem)?void 0:I.h4]),p("li",{class:`${Be}-menu-item ${Be}-menu-item-title`,onClick:()=>{w("h5")},role:"menuitem",tabindex:"0"},[null==(A=o.value.titleItem)?void 0:A.h5]),p("li",{class:`${Be}-menu-item ${Be}-menu-item-title`,onClick:()=>{w("h6")},role:"menuitem",tabindex:"0"},[null==(L=o.value.titleItem)?void 0:L.h6])])},{default:()=>{var t,l;return[p("div",{class:[`${Be}-toolbar-item`,(null==s?void 0:s.value)&&`${Be}-disabled`],title:null==(t=o.value.toolbarTips)?void 0:t.title},[p(to,{name:"title"},null),e.showToolbarName&&p("div",{class:`${Be}-toolbar-item-name`},[null==(l=o.value.toolbarTips)?void 0:l.title])])]}});case"sub":return p("div",{class:[`${Be}-toolbar-item`,(null==s?void 0:s.value)&&`${Be}-disabled`],title:null==(F=o.value.toolbarTips)?void 0:F.sub,onClick:()=>{w("sub")}},[p(to,{name:"sub"},null),e.showToolbarName&&p("div",{class:`${Be}-toolbar-item-name`},[null==(j=o.value.toolbarTips)?void 0:j.sub])]);case"sup":return p("div",{class:[`${Be}-toolbar-item`,(null==s?void 0:s.value)&&`${Be}-disabled`],title:null==(M=o.value.toolbarTips)?void 0:M.sup,onClick:()=>{w("sup")}},[p(to,{name:"sup"},null),e.showToolbarName&&p("div",{class:`${Be}-toolbar-item-name`},[null==(H=o.value.toolbarTips)?void 0:H.sup])]);case"quote":return p("div",{class:[`${Be}-toolbar-item`,(null==s?void 0:s.value)&&`${Be}-disabled`],title:null==(B=o.value.toolbarTips)?void 0:B.quote,onClick:()=>{w("quote")}},[p(to,{name:"quote"},null),e.showToolbarName&&p("div",{class:`${Be}-toolbar-item-name`},[null==(O=o.value.toolbarTips)?void 0:O.quote])]);case"unorderedList":return p("div",{class:[`${Be}-toolbar-item`,(null==s?void 0:s.value)&&`${Be}-disabled`],title:null==(N=o.value.toolbarTips)?void 0:N.unorderedList,onClick:()=>{w("unorderedList")}},[p(to,{name:"unordered-list"},null),e.showToolbarName&&p("div",{class:`${Be}-toolbar-item-name`},[null==(D=o.value.toolbarTips)?void 0:D.unorderedList])]);case"orderedList":return p("div",{class:[`${Be}-toolbar-item`,(null==s?void 0:s.value)&&`${Be}-disabled`],title:null==(V=o.value.toolbarTips)?void 0:V.orderedList,onClick:()=>{w("orderedList")}},[p(to,{name:"ordered-list"},null),e.showToolbarName&&p("div",{class:`${Be}-toolbar-item-name`},[null==(P=o.value.toolbarTips)?void 0:P.orderedList])]);case"task":return p("div",{class:[`${Be}-toolbar-item`,(null==s?void 0:s.value)&&`${Be}-disabled`],title:null==(R=o.value.toolbarTips)?void 0:R.task,onClick:()=>{w("task")}},[p(to,{name:"task"},null),e.showToolbarName&&p("div",{class:`${Be}-toolbar-item-name`},[null==(z=o.value.toolbarTips)?void 0:z.task])]);case"codeRow":return p("div",{class:[`${Be}-toolbar-item`,(null==s?void 0:s.value)&&`${Be}-disabled`],title:null==(q=o.value.toolbarTips)?void 0:q.codeRow,onClick:()=>{w("codeRow")}},[p(to,{name:"code-row"},null),e.showToolbarName&&p("div",{class:`${Be}-toolbar-item-name`},[null==(W=o.value.toolbarTips)?void 0:W.codeRow])]);case"code":return p("div",{class:[`${Be}-toolbar-item`,(null==s?void 0:s.value)&&`${Be}-disabled`],title:null==(_=o.value.toolbarTips)?void 0:_.code,onClick:()=>{w("code")}},[p(to,{name:"code"},null),e.showToolbarName&&p("div",{class:`${Be}-toolbar-item-name`},[null==(U=o.value.toolbarTips)?void 0:U.code])]);case"link":return p("div",{class:[`${Be}-toolbar-item`,(null==s?void 0:s.value)&&`${Be}-disabled`],title:null==(K=o.value.toolbarTips)?void 0:K.link,onClick:()=>{if(null==s?void 0:s.value)return!1;e.insertLinkDirect?w("link"):(x.type="link",x.linkVisible=!0)}},[p(to,{name:"link"},null),e.showToolbarName&&p("div",{class:`${Be}-toolbar-item-name`},[null==(X=o.value.toolbarTips)?void 0:X.link])]);case"image":return e.noUploadImg?p("div",{class:[`${Be}-toolbar-item`,(null==s?void 0:s.value)&&`${Be}-disabled`],title:null==(G=o.value.toolbarTips)?void 0:G.image,onClick:()=>{if(null==s?void 0:s.value)return!1;e.insertLinkDirect?w("image"):(x.type="image",x.linkVisible=!0)}},[p(to,{name:"image"},null),e.showToolbarName&&p("div",{class:`${Be}-toolbar-item-name`},[null==(Y=o.value.toolbarTips)?void 0:Y.image])]):p(Ue,{relative:`#${g}`,visible:k.image,onChange:e=>{k.image=e},disabled:null==s?void 0:s.value,overlay:p("ul",{class:`${Be}-menu`,onClick:()=>{k.image=!1},role:"menu"},[p("li",{class:`${Be}-menu-item ${Be}-menu-item-image`,onClick:()=>{e.insertLinkDirect?w("image"):(x.type="image",x.linkVisible=!0)},role:"menuitem",tabindex:"0"},[null==(Z=o.value.imgTitleItem)?void 0:Z.link]),p("li",{class:`${Be}-menu-item ${Be}-menu-item-image`,onClick:()=>{E.value.click()},role:"menuitem",tabindex:"0"},[null==(J=o.value.imgTitleItem)?void 0:J.upload]),p("li",{class:`${Be}-menu-item ${Be}-menu-item-image`,onClick:()=>{x.clipVisible=!0},role:"menuitem",tabindex:"0"},[null==(Q=o.value.imgTitleItem)?void 0:Q.clip2upload])])},{default:()=>{var t,l;return[p("div",{class:[`${Be}-toolbar-item`,(null==s?void 0:s.value)&&`${Be}-disabled`],title:null==(t=o.value.toolbarTips)?void 0:t.image},[p(to,{name:"image"},null),e.showToolbarName&&p("div",{class:`${Be}-toolbar-item-name`},[null==(l=o.value.toolbarTips)?void 0:l.image])])]}});case"table":return p(Ue,{relative:`#${g}`,visible:k.table,onChange:e=>{k.table=e},disabled:null==s?void 0:s.value,key:"bar-table",overlay:p(ho,{tableShape:e.tableShape,onSelected:e=>{w("table",{selectedShape:e})}},null)},{default:()=>{var t,l;return[p("div",{class:[`${Be}-toolbar-item`,(null==s?void 0:s.value)&&`${Be}-disabled`],title:null==(t=o.value.toolbarTips)?void 0:t.table},[p(to,{name:"table"},null),e.showToolbarName&&p("div",{class:`${Be}-toolbar-item-name`},[null==(l=o.value.toolbarTips)?void 0:l.table])])]}});case"revoke":return p("div",{class:[`${Be}-toolbar-item`,(null==s?void 0:s.value)&&`${Be}-disabled`],title:null==(ee=o.value.toolbarTips)?void 0:ee.revoke,onClick:()=>{if(null==s?void 0:s.value)return!1;Ge.emit(t,ct)}},[p(to,{name:"revoke"},null),e.showToolbarName&&p("div",{class:`${Be}-toolbar-item-name`},[null==(te=o.value.toolbarTips)?void 0:te.revoke])]);case"next":return p("div",{class:[`${Be}-toolbar-item`,(null==s?void 0:s.value)&&`${Be}-disabled`],title:null==(oe=o.value.toolbarTips)?void 0:oe.next,onClick:()=>{if(null==s?void 0:s.value)return!1;Ge.emit(t,ut)}},[p(to,{name:"next"},null),e.showToolbarName&&p("div",{class:`${Be}-toolbar-item-name`},[null==(le=o.value.toolbarTips)?void 0:le.next])]);case"save":return p("div",{class:[`${Be}-toolbar-item`,(null==s?void 0:s.value)&&`${Be}-disabled`],title:null==(ne=o.value.toolbarTips)?void 0:ne.save,onClick:()=>{if(null==s?void 0:s.value)return!1;Ge.emit(t,Ye)}},[p(to,{name:"save"},null),e.showToolbarName&&p("div",{class:`${Be}-toolbar-item-name`},[null==(ie=o.value.toolbarTips)?void 0:ie.save])]);case"prettier":return e.noPrettier?"":p("div",{class:[`${Be}-toolbar-item`,(null==s?void 0:s.value)&&`${Be}-disabled`],title:null==(ae=o.value.toolbarTips)?void 0:ae.prettier,onClick:()=>{w("prettier")}},[p(to,{name:"prettier"},null),e.showToolbarName&&p("div",{class:`${Be}-toolbar-item-name`},[null==(re=o.value.toolbarTips)?void 0:re.prettier])]);case"pageFullscreen":return!e.setting.fullscreen&&p("div",{class:[`${Be}-toolbar-item`,e.setting.pageFullscreen&&`${Be}-toolbar-active`,(null==s?void 0:s.value)&&`${Be}-disabled`],title:null==(se=o.value.toolbarTips)?void 0:se.pageFullscreen,onClick:()=>{if(null==s?void 0:s.value)return!1;e.updateSetting("pageFullscreen")}},[p(to,{name:e.setting.pageFullscreen?"minimize":"maximize"},null),e.showToolbarName&&p("div",{class:`${Be}-toolbar-item-name`},[null==(de=o.value.toolbarTips)?void 0:de.pageFullscreen])]);case"fullscreen":return p("div",{class:[`${Be}-toolbar-item`,e.setting.fullscreen&&`${Be}-toolbar-active`,(null==s?void 0:s.value)&&`${Be}-disabled`],title:null==(ce=o.value.toolbarTips)?void 0:ce.fullscreen,onClick:()=>{if(null==s?void 0:s.value)return!1;u()}},[p(to,{name:e.setting.fullscreen?"fullscreen-exit":"fullscreen"},null),e.showToolbarName&&p("div",{class:`${Be}-toolbar-item-name`},[null==(ue=o.value.toolbarTips)?void 0:ue.fullscreen])]);case"preview":return p("div",{class:[`${Be}-toolbar-item`,e.setting.preview&&`${Be}-toolbar-active`,(null==s?void 0:s.value)&&`${Be}-disabled`],title:null==(me=o.value.toolbarTips)?void 0:me.preview,onClick:()=>{if(null==s?void 0:s.value)return!1;e.updateSetting("preview")}},[p(to,{name:"preview"},null),e.showToolbarName&&p("div",{class:`${Be}-toolbar-item-name`},[null==(pe=o.value.toolbarTips)?void 0:pe.preview])]);case"previewOnly":return p("div",{class:[`${Be}-toolbar-item`,e.setting.previewOnly&&`${Be}-toolbar-active`,(null==s?void 0:s.value)&&`${Be}-disabled`],title:null==(ve=o.value.toolbarTips)?void 0:ve.previewOnly,onClick:()=>{if(null==s?void 0:s.value)return!1;e.updateSetting("previewOnly")}},[p(to,{name:"preview-only"},null),e.showToolbarName&&p("div",{class:`${Be}-toolbar-item-name`},[null==(ge=o.value.toolbarTips)?void 0:ge.previewOnly])]);case"htmlPreview":return p("div",{class:[`${Be}-toolbar-item`,e.setting.htmlPreview&&`${Be}-toolbar-active`,(null==s?void 0:s.value)&&`${Be}-disabled`],title:null==(he=o.value.toolbarTips)?void 0:he.htmlPreview,onClick:()=>{if(null==s?void 0:s.value)return!1;e.updateSetting("htmlPreview")}},[p(to,{name:"preview-html"},null),e.showToolbarName&&p("div",{class:`${Be}-toolbar-item-name`},[null==(fe=o.value.toolbarTips)?void 0:fe.htmlPreview])]);case"catalog":return p("div",{class:[`${Be}-toolbar-item`,e.catalogVisible&&`${Be}-toolbar-active`,(null==s?void 0:s.value)&&`${Be}-disabled`],title:null==(be=o.value.toolbarTips)?void 0:be.catalog,onClick:()=>{if(null==s?void 0:s.value)return!1;Ge.emit(t,Ze)},key:"bar-catalog"},[p(to,{name:"catalog"},null),e.showToolbarName&&p("div",{class:`${Be}-toolbar-item-name`},[null==(ye=o.value.toolbarTips)?void 0:ye.catalog])]);case"github":return p("div",{class:[`${Be}-toolbar-item`,(null==s?void 0:s.value)&&`${Be}-disabled`],title:null==(ke=o.value.toolbarTips)?void 0:ke.github,onClick:()=>{if(null==s?void 0:s.value)return!1;a("https://github.com/imzbf/md-editor-v3")}},[p(to,{name:"github"},null),e.showToolbarName&&p("div",{class:`${Be}-toolbar-item-name`},[null==(we=o.value.toolbarTips)?void 0:we.github])]);case"mermaid":return p(Ue,{relative:`#${g}`,visible:k.mermaid,onChange:e=>{k.mermaid=e},disabled:null==s?void 0:s.value,overlay:p("ul",{class:`${Be}-menu`,onClick:()=>{k.mermaid=!1},role:"menu"},[p("li",{class:`${Be}-menu-item ${Be}-menu-item-mermaid`,onClick:()=>{w("flow")},role:"menuitem",tabindex:"0"},[null==(xe=o.value.mermaid)?void 0:xe.flow]),p("li",{class:`${Be}-menu-item ${Be}-menu-item-mermaid`,onClick:()=>{w("sequence")},role:"menuitem",tabindex:"0"},[null==($e=o.value.mermaid)?void 0:$e.sequence]),p("li",{class:`${Be}-menu-item ${Be}-menu-item-mermaid`,onClick:()=>{w("gantt")},role:"menuitem",tabindex:"0"},[null==(Ce=o.value.mermaid)?void 0:Ce.gantt]),p("li",{class:`${Be}-menu-item ${Be}-menu-item-mermaid`,onClick:()=>{w("class")},role:"menuitem",tabindex:"0"},[null==(Te=o.value.mermaid)?void 0:Te.class]),p("li",{class:`${Be}-menu-item ${Be}-menu-item-mermaid`,onClick:()=>{w("state")},role:"menuitem",tabindex:"0"},[null==(Se=o.value.mermaid)?void 0:Se.state]),p("li",{class:`${Be}-menu-item ${Be}-menu-item-mermaid`,onClick:()=>{w("pie")},role:"menuitem",tabindex:"0"},[null==(Ee=o.value.mermaid)?void 0:Ee.pie]),p("li",{class:`${Be}-menu-item ${Be}-menu-item-mermaid`,onClick:()=>{w("relationship")},role:"menuitem",tabindex:"0"},[null==(Ie=o.value.mermaid)?void 0:Ie.relationship]),p("li",{class:`${Be}-menu-item ${Be}-menu-item-mermaid`,onClick:()=>{w("journey")},role:"menuitem",tabindex:"0"},[null==(Ae=o.value.mermaid)?void 0:Ae.journey])]),key:"bar-mermaid"},{default:()=>{var t,l;return[p("div",{class:[`${Be}-toolbar-item`,(null==s?void 0:s.value)&&`${Be}-disabled`],title:null==(t=o.value.toolbarTips)?void 0:t.mermaid},[p(to,{name:"mermaid"},null),e.showToolbarName&&p("div",{class:`${Be}-toolbar-item-name`},[null==(l=o.value.toolbarTips)?void 0:l.mermaid])])]}});case"katex":return p(Ue,{relative:`#${g}`,visible:k.katex,onChange:e=>{k.katex=e},disabled:null==s?void 0:s.value,overlay:p("ul",{class:`${Be}-menu`,onClick:()=>{k.katex=!1},role:"menu"},[p("li",{class:`${Be}-menu-item ${Be}-menu-item-katex`,onClick:()=>{w("katexInline")},role:"menuitem",tabindex:"0"},[null==(Le=o.value.katex)?void 0:Le.inline]),p("li",{class:`${Be}-menu-item ${Be}-menu-item-katex`,onClick:()=>{w("katexBlock")},role:"menuitem",tabindex:"0"},[null==(Fe=o.value.katex)?void 0:Fe.block])]),key:"bar-katex"},{default:()=>{var t,l;return[p("div",{class:[`${Be}-toolbar-item`,(null==s?void 0:s.value)&&`${Be}-disabled`],title:null==(t=o.value.toolbarTips)?void 0:t.katex},[p(to,{name:"formula"},null),e.showToolbarName&&p("div",{class:`${Be}-toolbar-item-name`},[null==(l=o.value.toolbarTips)?void 0:l.katex])])]}})}};return d(()=>e.toolbars,()=>{y(()=>{b.value&&i(b.value)})},{immediate:!0}),()=>{var t;const l=S.value[0].map(e=>A(e)),n=S.value[1].map(e=>A(e));return p(f,null,[e.toolbars.length>0&&p("div",{class:`${Be}-toolbar-wrapper`,ref:b,id:g},[p("div",{class:[`${Be}-toolbar`,e.showToolbarName&&`${Be}-stn`]},[p("div",{class:`${Be}-toolbar-left`,ref:T},[l]),p("div",{class:`${Be}-toolbar-right`},[n])])]),p("label",{for:`${g}_label`,style:{display:"none"},"aria-label":null==(t=o.value.imgTitleItem)?void 0:t.upload},null),p("input",{id:`${g}_label`,ref:E,accept:"image/*",type:"file",multiple:!0,style:{display:"none"}},null),p(xo,{linkVisible:x.linkVisible,clipVisible:x.clipVisible,type:x.type,onCancel:()=>{x.linkVisible=!1,x.clipVisible=!1},onOk:e=>{e&&w(x.type,{desc:e.desc,url:e.url,transform:"image"===x.type}),x.linkVisible=!1,x.clipVisible=!1}},null)])}}}),Co=async(e,t,o)=>{if(/^h[1-6]$/.test(e))return To(e,t);if("prettier"===e)return await So(t,o);switch(e){case"bold":case"underline":case"italic":case"strikeThrough":case"sub":case"sup":case"codeRow":case"katexInline":case"katexBlock":return Io(e,t);case"quote":case"orderedList":case"unorderedList":case"task":return Lo(e,t);case"code":return Fo(o,t);case"table":return Ho(o);case"link":{const{desc:e="",url:t=""}=o,l=`[${e}](${t})`;return{text:l,options:{select:""===t,deviationStart:l.length-t.length-1,deviationEnd:-1}}}case"image":return Mo(o);case"flow":case"sequence":case"gantt":case"class":case"state":case"pie":case"relationship":case"journey":return jo(e);case"universal":return Bo(t.getSelectedText(),o);default:return{text:"",options:{}}}},To=(e,t)=>{const o=e.slice(1),l="#".repeat(Number(o)),[n,i,a]=Oo(t,{wholeLine:!0});return{text:`${l} ${n}`,options:{deviationStart:l.length+1,replaceStart:i,replaceEnd:a}}},So=async(e,t)=>{var o,l,n;const i=window.prettier||(null==(o=ze.editorExtensions.prettier)?void 0:o.prettierInstance),a=[(null==(l=window.prettierPlugins)?void 0:l.markdown)||(null==(n=ze.editorExtensions.prettier)?void 0:n.parserMarkdownInstance)];return i&&a[0]?{text:await i.format(e.getValue(),{parser:"markdown",plugins:a}),options:{select:!1,replaceAll:!0}}:(Ge.emit(t.editorId,at,{name:"prettier",message:"prettier is undefined"}),{text:e.getValue(),options:{select:!1,replaceAll:!0}})},Eo={bold:["**","**",2,-2],underline:["<u>","</u>",3,-4],italic:["*","*",1,-1],strikeThrough:["~~","~~",2,-2],sub:["~","~",1,-1],sup:["^","^",1,-1],codeRow:["`","`",1,-1],katexInline:["$","$",1,-1],katexBlock:["\n$$\n","\n$$\n",4,-4]},Io=(e,t)=>{const o=t.getSelectedText(),[l,n,i,a]=Eo[e];return{text:`${l}${o}${n}`,options:{deviationStart:i,deviationEnd:a}}},Ao={quote:"> ",unorderedList:"- ",orderedList:1,task:"- [ ] "},Lo=(e,t)=>{const[o,l,n]=Oo(t,{wholeLine:!0}),i=o.split("\n"),a=Ao[e],r="orderedList"===e?i.map((e,t)=>`${a+t}. ${e}`):i.map(e=>`${a}${e}`),s="orderedList"===e?"1. ":a.toString(),d=1===i.length?s.length:0;return{text:r.join("\n"),options:{deviationStart:d,replaceStart:l,replaceEnd:n}}},Fo=(e,t)=>{const[o,l,n]=Oo(t),i=e.mode||"language",a=`\n\`\`\`${i}\n${e.text||o||""}\n\`\`\`\n`;return{text:a,options:{deviationStart:4,deviationEnd:4+i.length-a.length,replaceStart:l,replaceEnd:n}}},jo=e=>({text:`\n\`\`\`mermaid\n${{flow:"flowchart TD \n  Start --\x3e Stop",sequence:"sequenceDiagram\n  A->>B: hello!\n  B--\x3e>A: hi!",gantt:"gantt\ntitle Gantt Chart\ndateFormat  YYYY-MM-DD",class:"classDiagram\n  class Animal",state:"stateDiagram-v2\n  s1 --\x3e s2",pie:'pie\n  "Dogs" : 386\n  "Cats" : 85\n  "Rats" : 15',relationship:"erDiagram\n  CAR ||--o{ NAMED-DRIVER : allows",journey:"journey\n  title My Journey",...ze.editorConfig.mermaidTemplate}[e]}\n\`\`\`\n`,options:{deviationStart:12,deviationEnd:-5}}),Mo=e=>{const{desc:t="",url:o="",urls:l}=e;let n="";const i=""===o&&(!l||l instanceof Array&&0===l.length);return n=l instanceof Array?l.reduce((e,t)=>{const{url:o="",alt:l="",title:n=""}="object"==typeof t?t:{url:t};return e+`![${l}](${o}${n?" '"+n+"'":""})\n`},""):`![${t}](${o})\n`,{text:n,options:{select:""===o,deviationStart:i?n.length-o.length-2:n.length,deviationEnd:i?-2:0}}},Ho=e=>{const{selectedShape:t={x:1,y:1}}=e,{x:o,y:l}=t;let n="\n| Column";for(let i=0;i<=l;i++)n+=" |";n+="\n|";for(let i=0;i<=l;i++)n+=" - |";for(let i=0;i<=o;i++){n+="\n|";for(let e=0;e<=l;e++)n+=" |"}return n+="\n",{text:n,options:{deviationStart:3,deviationEnd:10-n.length}}},Bo=(e,t)=>{const{generate:o}=t,l=o(e);return{text:l.targetValue,options:{select:l.select??!0,deviationStart:l.deviationStart||0,deviationEnd:l.deviationEnd||0}}},Oo=(e,t={wholeLine:!1})=>{const o=e.view.state,l=o.selection.main;if(l.empty){const e=o.doc.lineAt(l.from);return[o.doc.lineAt(l.from).text,e.from,e.to]}if(t.wholeLine){const e=o.doc.lineAt(l.from),t=o.doc.lineAt(l.to);return[o.doc.sliceString(e.from,t.to),e.from,t.to]}return[o.doc.sliceString(l.from,l.to),l.from,l.to]},No="var(--md-color)",Do="var(--md-color)",Vo="#e5c07b",Po="#d19a66",Ro="var(--md-bk-color)",zo="var(--md-bk-color)",qo="#528bff",Wo=[pe.theme({"&":{color:Do,backgroundColor:Ro},".cm-content":{caretColor:qo},".cm-cursor, .cm-dropCursor":{borderLeftColor:qo},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:"#ceedfa33"},".cm-panels":{backgroundColor:"#21252b",color:Do},".cm-panels.cm-panels-top":{borderBottom:"1px solid var(--md-border-color)"},".cm-panels.cm-panels-bottom":{borderTop:"1px solid var(--md-border-color)"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#ceedfa33"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:Ro,color:Do,borderRight:"1px solid",borderColor:"var(--md-border-color)"},".cm-activeLineGutter":{backgroundColor:"#2c313a"},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"1px solid var(--md-border-color)",backgroundColor:zo},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:zo,borderBottomColor:zo},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{color:Do}}},{dark:!0}),Ae(Fe.define([{tag:je.keyword,color:"#c678dd"},{tag:[je.name,je.deleted,je.character,je.propertyName,je.macroName],color:No},{tag:[je.function(je.variableName),je.labelName],color:"#e5c07b"},{tag:[je.color,je.constant(je.name),je.standard(je.name)],color:Po},{tag:[je.definition(je.name),je.separator],color:Do},{tag:[je.typeName,je.className,je.number,je.changed,je.annotation,je.modifier,je.self,je.namespace],color:"#e5c07b"},{tag:[je.operator,je.operatorKeyword,je.url,je.escape,je.regexp,je.link,je.special(je.string)],color:"#56b6c2"},{tag:[je.meta,je.comment],color:Vo},{tag:je.strong,fontWeight:"bold"},{tag:je.emphasis,fontStyle:"italic"},{tag:je.strikethrough,textDecoration:"line-through"},{tag:je.link,color:Vo,textDecoration:"underline"},{tag:je.heading,fontWeight:"bold",color:No},{tag:[je.atom,je.bool,je.special(je.variableName)],color:Po},{tag:[je.processingInstruction,je.string,je.inserted],color:"var(--md-color)"},{tag:je.invalid,color:"#ffffff"}]))],_o="var(--md-color)",Uo="#3f4a54",Ko="#2d8cf0",Xo="#d19a66",Go="var(--md-bk-color)",Yo="var(--md-bk-color)",Zo="#3f4a54",Jo=[pe.theme({"&":{color:Uo,backgroundColor:Go},".cm-content":{caretColor:Zo},".cm-cursor, .cm-dropCursor":{borderLeftColor:Zo},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:"#bad5fa"},".cm-panels":{backgroundColor:"#f6f6f6",color:Uo},".cm-panels.cm-panels-top":{borderBottom:"1px solid var(--md-border-color)"},".cm-panels.cm-panels-bottom":{borderTop:"1px solid var(--md-border-color)"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#ceedfa33"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:Go,color:Uo,borderRight:"1px solid",borderColor:"var(--md-border-color)"},".cm-activeLineGutter":{backgroundColor:"#ceedfa33"},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"1px solid var(--md-border-color)",backgroundColor:Yo},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:Yo,borderBottomColor:Yo},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{color:Uo}}}),Ae(Fe.define([{tag:je.keyword,color:"#c678dd"},{tag:[je.name,je.deleted,je.character,je.propertyName,je.macroName],color:_o},{tag:[je.function(je.variableName),je.labelName],color:"#2d8cf0"},{tag:[je.color,je.constant(je.name),je.standard(je.name)],color:Xo},{tag:[je.definition(je.name),je.separator],color:Uo},{tag:[je.typeName,je.className,je.number,je.changed,je.annotation,je.modifier,je.self,je.namespace],color:"#e5c07b"},{tag:[je.operator,je.operatorKeyword,je.url,je.escape,je.regexp,je.link,je.special(je.string)],color:"#56b6c2"},{tag:[je.meta,je.comment],color:Ko},{tag:je.strong,fontWeight:"bold"},{tag:je.emphasis,fontStyle:"italic"},{tag:je.strikethrough,textDecoration:"line-through"},{tag:je.link,color:Ko,textDecoration:"underline"},{tag:je.heading,fontWeight:"bold",color:_o},{tag:[je.atom,je.bool,je.special(je.variableName)],color:Xo},{tag:[je.processingInstruction,je.string,je.inserted],color:"#3f4a54"},{tag:je.invalid,color:"#fff"}]))],Qo=(e,t,o,l,n)=>(i,a,r,s)=>{const d=`${e}${t}${o}${l}`,c=r+a.label.length+("title"===n?o.length:0);i.dispatch({changes:{from:r,to:s,insert:d},selection:ke.create([ke.range(r+a.label.length+("title"===n?1:-t.length),c),ke.cursor(c)],1)}),i.focus()},el=e=>(t,o,l,n)=>{const i=e.slice(n-l);t.dispatch(t.state.replaceSelection(`${i} `))},tl=e=>{const t=e=>{const t=e.matchBefore(/^#+|^-\s*\[*\s*\]*|`+|\[|!\[*|^\|\s?\|?|\$\$?|!+\s*\w*/);return null===t||t.from==t.to&&e.explicit?null:{from:t.from,options:[...["h2","h3","h4","h5","h6"].map((e,t)=>{const o=new Array(t+2).fill("#").join("");return{label:o,type:"text",apply:el(o)}}),...["unchecked","checked"].map(e=>{const t="checked"===e?"- [x]":"- [ ]";return{label:t,type:"text",apply:el(t)}}),...[["`",""],["```","language"],["```mermaid\n",""]].map(e=>({label:`${e[0]}${e[1]}`,type:"text",apply:Qo(e[0],e[1],"","`"===e[0]?"`":"\n```","type")})),{label:"[]()",type:"text"},{label:"![]()",type:"text"},{label:"| |",type:"text",detail:"table",apply:"| col | col | col |\n| - | - | - |\n| content | content | content |\n| content | content | content |"},{label:"$",type:"text",apply:Qo("$","","","$","type")},{label:"$$",type:"text",apply:Qo("$$","","\n","\n$$","title")},...["note","abstract","info","tip","success","question","warning","failure","danger","bug","example","quote","hint","caution","error","attention"].map(e=>({label:`!!! ${e}`,type:"text",apply:Qo("!!!",` ${e}`," Title","\n\n!!!","title")}))]}};return Me({override:e?[t,...e]:[t]})},ol=e=>{const t=new be;return o=>(t.get(e.state)?e.dispatch({effects:t.reconfigure(o)}):e.dispatch({effects:we.appendConfig.of(t.of(o))}),!0)};class ll{constructor(e){po(this,"view"),po(this,"maxLength",Number.MAX_SAFE_INTEGER),po(this,"toggleTabSize"),po(this,"togglePlaceholder"),po(this,"setExtensions"),po(this,"toggleDisabled"),po(this,"toggleReadOnly"),po(this,"toggleMaxlength"),this.view=e,this.toggleTabSize=ol(this.view),this.togglePlaceholder=ol(this.view),this.setExtensions=ol(this.view),this.toggleDisabled=ol(this.view),this.toggleReadOnly=ol(this.view),this.toggleMaxlength=ol(this.view)}getValue(){return this.view.state.doc.toString()}setValue(e,t=0,o=this.view.state.doc.length){this.view.dispatch({changes:{from:t,to:o,insert:e}})}getSelectedText(){const{from:e,to:t}=this.view.state.selection.main;return this.view.state.sliceDoc(e,t)}replaceSelectedText(e,t,o){const l={select:!0,deviationStart:0,deviationEnd:0,replaceAll:!1,replaceStart:-1,replaceEnd:-1,...t};try{if(l.replaceAll){if(this.setValue(e),e.length>this.maxLength)throw new Error("The input text is too long");return}if(this.view.state.doc.length-this.getSelectedText().length+e.length>this.maxLength)throw new Error("The input text is too long");const{from:t}=this.view.state.selection.main;-1!==l.replaceStart?this.view.dispatch({changes:{from:l.replaceStart,to:l.replaceEnd,insert:e}}):this.view.dispatch(this.view.state.replaceSelection(e)),l.select&&this.view.dispatch({selection:{anchor:-1===l.replaceStart?t+l.deviationStart:l.replaceStart+l.deviationStart,head:-1===l.replaceStart?t+e.length+l.deviationEnd:l.replaceStart+e.length+l.deviationEnd}}),this.view.focus()}catch(n){if("The input text is too long"!==n.message)throw n;Ge.emit(o,at,{name:"overlength",message:n.message,data:e})}}setTabSize(e){this.toggleTabSize([ye.tabSize.of(e),Le.of(" ".repeat(e))])}setPlaceholder(e){this.togglePlaceholder(ge(e))}focus(e){if(this.view.focus(),!e)return;let t=0,o=0,l=0;switch(e){case"start":break;case"end":t=o=l=this.getValue().length;break;default:t=e.rangeAnchor||e.cursorPos,o=e.rangeHead||e.cursorPos,l=e.cursorPos}this.view.dispatch({scrollIntoView:!0,selection:ke.create([ke.range(t,o),ke.cursor(l)],1)})}setDisabled(e){this.toggleDisabled([pe.editable.of(!e)])}setReadOnly(e){this.toggleReadOnly([ye.readOnly.of(e)])}setMaxLength(e){this.maxLength=e,this.toggleMaxlength([ye.changeFilter.of(t=>t.newDoc.length<=e)])}}pe.EDIT_CONTEXT=!1;const nl=n(),il=s({name:"MDEditorContent",props:qt,setup(e,t){const o=v("editorId"),l=C(""),n=C(),i=C(),{inputWrapperRef:a,codeMirrorUt:s,resetHistory:m}=(e=>{const t=v("tabWidth"),o=v("editorId"),l=v("theme"),n=C(),i=S(),a=C(!1),s=new be,u=new be,m=new be,p=new be,g=new be,h=(f=o,b=e,[{key:"Ctrl-b",mac:"Cmd-b",run:()=>(Ge.emit(f,rt,"bold"),!0)},{key:"Ctrl-d",mac:"Cmd-d",run:Ie,preventDefault:!0},{key:"Ctrl-s",mac:"Cmd-s",run:e=>(Ge.emit(f,Ye,e.state.doc.toString()),!0),shift:()=>(Ge.emit(f,rt,"strikeThrough"),!0)},{key:"Ctrl-u",mac:"Cmd-u",preventDefault:!0,run:()=>(Ge.emit(f,rt,"underline"),!0),shift:()=>(Ge.emit(f,rt,"unorderedList"),!0)},{key:"Ctrl-i",mac:"Cmd-i",preventDefault:!0,run:()=>(Ge.emit(f,rt,"italic"),!0),shift:()=>(Ge.emit(f,dt,"image"),!0)},{key:"Ctrl-1",mac:"Cmd-1",run:()=>(Ge.emit(f,rt,"h1"),!0)},{key:"Ctrl-2",mac:"Cmd-2",run:()=>(Ge.emit(f,rt,"h2"),!0)},{key:"Ctrl-3",mac:"Cmd-3",run:()=>(Ge.emit(f,rt,"h3"),!0)},{key:"Ctrl-4",mac:"Cmd-4",run:()=>(Ge.emit(f,rt,"h4"),!0)},{key:"Ctrl-5",mac:"Cmd-5",run:()=>(Ge.emit(f,rt,"h5"),!0)},{key:"Ctrl-6",mac:"Cmd-6",run:()=>(Ge.emit(f,rt,"h6"),!0)},{key:"Ctrl-ArrowUp",mac:"Cmd-ArrowUp",run:()=>(Ge.emit(f,rt,"sup"),!0)},{key:"Ctrl-ArrowDown",mac:"Cmd-ArrowDown",run:()=>(Ge.emit(f,rt,"sub"),!0)},{key:"Ctrl-o",mac:"Cmd-o",run:()=>(Ge.emit(f,rt,"orderedList"),!0)},{key:"Ctrl-c",mac:"Cmd-c",shift:()=>(Ge.emit(f,rt,"code"),!0),any:(e,t)=>!(!t.ctrlKey&&!t.metaKey||!t.altKey||"KeyC"!==t.code||(Ge.emit(f,rt,"codeRow"),0))},{key:"Ctrl-l",mac:"Cmd-l",run:()=>(Ge.emit(f,dt,"link"),!0)},{key:"Ctrl-f",mac:"Cmd-f",shift:()=>!b.noPrettier&&(Ge.emit(f,rt,"prettier"),!0)},{any:(e,t)=>!(!t.ctrlKey&&!t.metaKey||!t.altKey||!t.shiftKey||"KeyT"!==t.code||(Ge.emit(f,rt,"table"),0))},...He]);var f,b;const y=()=>[...h,...xe,...$e,Ce],k=((e,t)=>{const o=v("editorId"),l=e=>{e instanceof Promise?e.then(e=>{Ge.emit(o,rt,"universal",{generate:()=>({targetValue:e})})}).catch(e=>{}):Ge.emit(o,rt,"universal",{generate:()=>({targetValue:e})})};return n=>{var i,a,r;if(!n.clipboardData)return;if(n.clipboardData.files.length>0){const{files:e}=n.clipboardData;return Ge.emit(o,st,Array.from(e).filter(e=>/image\/.*/.test(e.type))),void n.preventDefault()}const s=n.clipboardData.getData("text/plain"),d=(null==(i=t.value)?void 0:i.view.state.selection.main.to)||0,c=(null==(a=t.value)?void 0:a.view.state.doc.lineAt(d).from)||0,u=(null==(r=t.value)?void 0:r.view.state.doc.sliceString(c,d))||"",m=/!\[.*\]\(\s*$/.test(u),p=/!\[.*\]\((.*)\s?.*\)/.test(s);if(m){const t=e.transformImgUrl(s);return l(t),void n.preventDefault()}if(p){const t=s.match(new RegExp("(?<=!\\[.*\\]\\()([^)\\s]+)(?=\\s?[\"']?.*[\"']?\\))","g"));return t?Promise.all(t.map(t=>e.transformImgUrl(t))).then(e=>{l(e.reduce((e,o,l)=>e.replace(t[l],o),s))}):l(s),void n.preventDefault()}if(e.autoDetectCode&&n.clipboardData.types.includes("vscode-editor-data")){const e=JSON.parse(n.clipboardData.getData("vscode-editor-data"));return Ge.emit(o,rt,"code",{mode:e.mode,text:n.clipboardData.getData("text/plain")}),void n.preventDefault()}e.maxlength&&s.length+e.modelValue.length>e.maxlength&&Ge.emit(o,at,{name:"overlength",message:"The input text is too long",data:s})}})(e,i),w={paste:k,blur:e.onBlur,focus:e.onFocus,drop:e.onDrop,compositionstart:()=>{a.value=!0},compositionend:(t,o)=>{a.value=!1,e.updateModelValue(o.state.doc.toString())},input:t=>{e.onInput&&e.onInput(t);const{data:l}=t;e.maxlength&&e.modelValue.length+l.length>e.maxlength&&Ge.emit(o,at,{name:"overlength",message:"The input text is too long",data:l})}},x=[me.of(y()),p.of(Te()),s.of(fe({codeLanguages:he})),pe.lineWrapping,pe.updateListener.of(t=>{t.docChanged&&(e.onChange(t.state.doc.toString()),a.value||e.updateModelValue(t.state.doc.toString()))}),g.of(pe.domEventHandlers(w)),ve()],$=()=>{const t=[...x,u.of("light"===l.value?Jo:Wo),m.of(tl(e.completions))];return ze.codeMirrorExtensions(l.value,t,y(),{editorId:o})};return c(()=>{const l=new pe({doc:e.modelValue,parent:n.value,extensions:[$()]}),a=new ll(l);i.value=a,setTimeout(()=>{a.setTabSize(t),a.setDisabled(e.disabled),a.setReadOnly(e.readonly),e.placeholder&&a.setPlaceholder(e.placeholder),"number"==typeof e.maxlength&&a.setMaxLength(e.maxlength),e.autofocus&&l.focus()},0),Ge.on(o,{name:ct,callback(){Se(l)}}),Ge.on(o,{name:ut,callback(){Ee(l)}}),Ge.on(o,{name:rt,async callback(t,l={}){var n,a;if("image"===t&&l.transform){const a=e.transformImgUrl(l.url);if(a instanceof Promise)a.then(async e=>{var n;const{text:a,options:r}=await Co(t,i.value,{...l,url:e});null==(n=i.value)||n.replaceSelectedText(a,r,o)}).catch(e=>{});else{const{text:e,options:r}=await Co(t,i.value,{...l,url:a});null==(n=i.value)||n.replaceSelectedText(e,r,o)}}else{const{text:e,options:n}=await Co(t,i.value,l);null==(a=i.value)||a.replaceSelectedText(e,n,o)}}}),Ge.on(o,{name:gt,callback:r(e=>{var t;const o={...w},l=Object.keys(w);for(const n in e){const t=n;l.includes(t)?o[t]=(o,l)=>{e[t](o,l),o.defaultPrevented||w[t](o,l)}:o[t]=e[t]}null==(t=i.value)||t.view.dispatch({effects:g.reconfigure(pe.domEventHandlers(o))})})}),Ge.on(o,{name:ht,callback:(e,t)=>{const o=l.state.doc.line(e);l.dispatch(l.state.update({changes:{from:o.from,to:o.to,insert:t}}))}}),Ge.on(o,{name:ft,callback(){Ge.emit(o,bt,l)}}),Ge.emit(o,bt,l)}),d(l,()=>{var e;null==(e=i.value)||e.view.dispatch({effects:u.reconfigure("light"===l.value?Jo:Wo)})},{deep:!0}),d(()=>e.completions,()=>{var t;null==(t=i.value)||t.view.dispatch({effects:m.reconfigure(tl(e.completions))})},{deep:!0}),d(()=>e.modelValue,()=>{var t,o;(null==(t=i.value)?void 0:t.getValue())!==e.modelValue&&(null==(o=i.value)||o.setValue(e.modelValue))}),d(()=>e.placeholder,()=>{var t;null==(t=i.value)||t.setPlaceholder(e.placeholder)}),d(()=>e.disabled,()=>{var t;null==(t=i.value)||t.setDisabled(e.disabled)}),d(()=>e.readonly,()=>{var t;null==(t=i.value)||t.setDisabled(e.readonly)}),d(()=>e.maxlength,()=>{var t;e.maxlength&&(null==(t=i.value)||t.setMaxLength(e.maxlength))}),{inputWrapperRef:n,codeMirrorUt:i,resetHistory(){var e,t;null==(e=i.value)||e.view.dispatch({effects:p.reconfigure([])}),null==(t=i.value)||t.view.dispatch({effects:p.reconfigure(Te())})}}})(e),{inputWrapperStyle:g,resizeOperateStyle:f}=((e,t,o)=>{const l=h(()=>/px$/.test(`${e.inputBoxWidth}`)?"50%":e.inputBoxWidth),n=$({resizedWidth:l.value}),i=$({width:l.value}),a=$({left:l.value,display:"initial"}),r=o=>{var l,r,s;const d=(null==(l=t.value)?void 0:l.offsetWidth)||0,c=(null==(r=t.value)?void 0:r.getBoundingClientRect().x)||0;let u=o.x-c;u/d<qe?u=d*qe:u>d-d*qe&&(u=d-d*qe);const m=u/d*100+"%";i.width=m,a.left=m,n.resizedWidth=m,null==(s=e.oninputBoxWidthChange)||s.call(e,m)},s=e=>{e.target===o.value&&document.addEventListener("mousemove",r)},m=()=>{document.removeEventListener("mousemove",r)};return d([o],()=>{document.removeEventListener("mousedown",s),document.removeEventListener("mouseup",m),document.addEventListener("mousedown",s),document.addEventListener("mouseup",m)}),c(()=>{document.addEventListener("mousedown",s),document.addEventListener("mouseup",m)}),u(()=>{document.removeEventListener("mousedown",s),document.removeEventListener("mouseup",m)}),d([l],([e])=>{n.resizedWidth=e,i.width=e,a.left=e}),d([T(e.setting,"htmlPreview"),T(e.setting,"preview"),T(e.setting,"previewOnly")],()=>{e.setting.previewOnly?(i.width="0%",a.display="none"):e.setting.htmlPreview||e.setting.preview?(i.width=n.resizedWidth,a.display="initial"):(i.width="100%",a.display="none")},{immediate:!0}),{inputWrapperStyle:i,resizeOperateStyle:a}})(e,n,i);return((e,t,o)=>{const l=v("editorId");let n=()=>{},i=()=>{};const a=()=>{var t;n();const a=null==(t=o.value)?void 0:t.view.contentDOM.getRootNode(),r=a.querySelector(`#${l} .cm-scroller`),s=a.querySelector(`[id="${l}-preview-wrapper"]`),d=a.querySelector(`[id="${l}-html-wrapper"]`);if(s||d){const t=s?ao:io,l=s||d;[i,n]=t(r,l,o.value),e.scrollAuto&&i()}};d([t,T(e.setting,"preview"),T(e.setting,"htmlPreview"),T(e.setting,"fullscreen"),T(e.setting,"pageFullscreen")],()=>{y(a)}),d(()=>e.scrollAuto,e=>{e?i():n()}),d(()=>e.setting.previewOnly,e=>{e?n():i()}),c(a)})(e,l,s),t.expose({getSelectedText(){var e;return null==(e=s.value)?void 0:e.getSelectedText()},focus(e){var t;null==(t=s.value)||t.focus(e)},resetHistory:m,getEditorView(){var e;return null==(e=s.value)?void 0:e.view}}),()=>p("div",{class:`${Be}-content`},[p("div",{class:`${Be}-content-wrapper`,ref:n},[p("div",{class:`${Be}-input-wrapper`,style:g,ref:a},null),(e.setting.htmlPreview||e.setting.preview)&&p("div",{class:`${Be}-resize-operate`,style:f,ref:i},null),p(_t,{modelValue:e.modelValue,onChange:e.onChange,setting:e.setting,onHtmlChanged:t=>{l.value=t,e.onHtmlChanged(t)},onGetCatalog:e.onGetCatalog,mdHeadingId:e.mdHeadingId,noMermaid:e.noMermaid,sanitize:e.sanitize,noKatex:e.noKatex,formatCopiedText:e.formatCopiedText,noHighlight:e.noHighlight,noImgZoomIn:e.noImgZoomIn,sanitizeMermaid:e.sanitizeMermaid,codeFoldable:e.codeFoldable,autoFoldThreshold:e.autoFoldThreshold,onRemount:e.onRemount},null)]),e.catalogVisible&&p(so,{theme:e.theme,class:`${Be}-catalog-editor ${Be}-catalog-${e.catalogLayout}`,editorId:o,mdHeadingId:e.mdHeadingId,key:"internal-catalog",scrollElementOffsetTop:2,syncWith:e.setting.preview?"preview":"editor",onClick:(t,o)=>{var l,n;if(!e.setting.preview&&void 0!==o.line){t.preventDefault();const e=null==(l=s.value)?void 0:l.view;if(e){const t=e.state.doc.line(o.line+1),l=null==(n=e.lineBlockAt(t.from))?void 0:n.top,i=e.scrollDOM;nl(i,l)}}},catalogMaxDepth:e.catalogMaxDepth},null)])}}),al=s({props:{modelValue:{type:String,default:""}},setup(e){const t=v("usedLanguageText");return()=>{var o,l;return p("div",{class:`${Be}-footer-item`},[p("label",{class:`${Be}-footer-label`},[`${null==(o=t.value.footer)?void 0:o.markdownTotal}:`]),p("span",null,[(null==(l=e.modelValue)?void 0:l.length)||0])])}}}),rl={checked:{type:Boolean,default:!1},onChange:{type:Function,default:()=>{}},disabled:{type:Boolean,default:void 0}},sl=s({name:`${Be}-checkbox`,props:rl,setup:e=>()=>p("div",{class:[`${Be}-checkbox`,e.checked&&`${Be}-checkbox-checked`,e.disabled&&`${Be}-disabled`],onClick:()=>{e.disabled||e.onChange(!e.checked)}},null)}),dl=s({props:{scrollAuto:{type:Boolean},onScrollAutoChange:{type:Function,default:()=>{}}},setup(e){const t=v("usedLanguageText"),o=v("disabled");return()=>{var l;return p("div",{class:[`${Be}-footer-item`,(null==o?void 0:o.value)&&`${Be}-disabled`]},[p("label",{class:`${Be}-footer-label`,onClick:()=>{e.onScrollAutoChange(!e.scrollAuto)}},[null==(l=null==t?void 0:t.value.footer)?void 0:l.scrollAuto]),p(sl,{checked:e.scrollAuto,onChange:e.onScrollAutoChange,disabled:null==o?void 0:o.value},null)])}}}),cl=s({name:"MDEditorFooter",props:{modelValue:{type:String,default:""},footers:{type:Array,default:[]},scrollAuto:{type:Boolean},noScrollAuto:{type:Boolean},onScrollAutoChange:{type:Function,default:()=>{}},defFooters:{type:Object}},setup(e){const t=v("theme"),o=v("language"),l=v("disabled"),n=h(()=>{const t=e.footers.indexOf("=");return[-1===t?e.footers:e.footers.slice(0,t),-1===t?[]:e.footers.slice(t,Number.MAX_SAFE_INTEGER)]}),i=n=>{var i,a,r,s,d,c;if(!Pe.includes(n)){if(e.defFooters instanceof Array){const s=e.defFooters[n];return s?m(s,{theme:(null==(i=s.props)?void 0:i.theme)||t.value,language:(null==(a=s.props)?void 0:a.language)||o.value,disabled:(null==(r=s.props)?void 0:r.disabled)||(null==l?void 0:l.value)}):""}if(e.defFooters&&e.defFooters.children instanceof Array){const i=e.defFooters.children[n];return i?m(i,{theme:(null==(s=i.props)?void 0:s.theme)||t.value,language:(null==(d=i.props)?void 0:d.language)||o.value,disabled:(null==(c=i.props)?void 0:c.disabled)||(null==l?void 0:l.value)}):""}return""}switch(n){case"markdownTotal":return p(al,{modelValue:e.modelValue},null);case"scrollSwitch":return!e.noScrollAuto&&p(dl,{scrollAuto:e.scrollAuto,onScrollAutoChange:e.onScrollAutoChange},null)}};return()=>{const e=n.value[0].map(e=>i(e)),t=n.value[1].map(e=>i(e));return p("div",{class:`${Be}-footer`},[p("div",{class:`${Be}-footer-left`},[e]),p("div",{class:`${Be}-footer-right`},[t])])}}}),ul=s({name:"MdEditorV3",props:Gt,emits:Zt,setup(e,t){const{noKatex:o,noMermaid:l,noPrettier:n,noUploadImg:i,noHighlight:a}=e,r=$({scrollAuto:e.scrollAuto}),s=C(),m=C(),{editorId:v}=((e,t)=>(g("tabWidth",e.tabWidth),g("disabled",h(()=>e.disabled)),Ut(e,t)))(e,s),[f,b]=((e,t,o)=>{const{editorId:l}=o,n=$({pageFullscreen:e.pageFullscreen,fullscreen:!1,preview:e.preview,htmlPreview:!e.preview&&e.htmlPreview,previewOnly:!1}),i=$({...n});let a="";const r=()=>{n.pageFullscreen||n.fullscreen?document.body.style.overflow="hidden":document.body.style.overflow=a};return d(()=>[n.pageFullscreen,n.fullscreen],r),c(()=>{Ge.on(l,{name:st,callback(o,n){const i=e=>{Ge.emit(l,rt,"image",{desc:"",urls:e}),null==n||n()};e.onUploadImg?e.onUploadImg(o,i):t.emit("onUploadImg",o,i)}}),a=document.body.style.overflow,r()}),[n,(e,t)=>{const o=void 0===t?!n[e]:t;switch(e){case"preview":n.htmlPreview=!1,n.previewOnly=!1;break;case"htmlPreview":n.preview=!1,n.previewOnly=!1;break;case"previewOnly":o?n.preview||n.htmlPreview||(n.preview=!0):(i.preview||(n.preview=!1),i.htmlPreview||(n.htmlPreview=!1))}i[e]=o,n[e]=o}]})(e,t,{editorId:v}),y=((e,t)=>{const{editorId:o}=t,l=C(!1);return c(()=>{Ge.on(o,{name:Ze,callback:e=>{l.value=void 0===e?!l.value:e}})}),l})(0,{editorId:v});return((e,t,o)=>{const{editorId:l}=o,n=$({buildFinished:!1,html:""});d(()=>e.modelValue,()=>{n.buildFinished=!1}),c(()=>{Ge.on(l,{name:it,callback(e){n.buildFinished=!0,n.html=e}}),Ge.on(l,{name:Ye,callback(){const o=new Promise(e=>{if(n.buildFinished)e(n.html);else{const t=o=>{e(o),Ge.remove(l,it,t)};Ge.on(l,{name:it,callback:t})}});e.onSave?e.onSave(e.modelValue,o):t.emit("onSave",e.modelValue,o)}})})})(e,t,{editorId:v}),(e=>{const{noPrettier:t,noUploadImg:o}=e,{editorExtensions:l,editorExtensionsAttrs:n}=ze,i=t||l.prettier.prettierInstance,a=t||l.prettier.parserMarkdownInstance,r=o||l.cropper.instance;c(()=>{if(!r){const{js:e={},css:t={}}=n.cropper||{};xt("link",{...t,rel:"stylesheet",href:l.cropper.css,id:Et.croppercss}),xt("script",{...e,src:l.cropper.js,id:Et.cropperjs})}if(!i){const{standaloneJs:e={}}=n.prettier||{};xt("script",{...e,src:l.prettier.standaloneJs,id:Et.prettier})}if(!a){const{parserMarkdownJs:e={}}=n.prettier||{};xt("script",{...e,src:l.prettier.parserMarkdownJs,id:Et.prettierMD})}})})(e),((e,t,o)=>{const{editorId:l}=o;c(()=>{Ge.on(l,{name:at,callback:o=>{var l;null==(l=e.onError)||l.call(e,o),t.emit("onError",o)}})})})(e,t,{editorId:v}),((e,t,o)=>{const{editorId:l,catalogVisible:n,setting:i,updateSetting:a,codeRef:r}=o;d(()=>i.pageFullscreen,e=>{Ge.emit(l,Qe,e)}),d(()=>i.fullscreen,e=>{Ge.emit(l,et,e)}),d(()=>i.preview,e=>{Ge.emit(l,tt,e)}),d(()=>i.previewOnly,e=>{Ge.emit(l,ot,e)}),d(()=>i.htmlPreview,e=>{Ge.emit(l,lt,e)}),d(n,e=>{Ge.emit(l,nt,e)});const s={on(e,t){switch(e){case"pageFullscreen":Ge.on(l,{name:Qe,callback(e){t(e)}});break;case"fullscreen":Ge.on(l,{name:et,callback(e){t(e)}});break;case"preview":Ge.on(l,{name:tt,callback(e){t(e)}});break;case"previewOnly":Ge.on(l,{name:ot,callback(e){t(e)}});break;case"htmlPreview":Ge.on(l,{name:lt,callback(e){t(e)}});break;case"catalog":Ge.on(l,{name:nt,callback(e){t(e)}})}},togglePageFullscreen(e){a("pageFullscreen",e)},toggleFullscreen(e){Ge.emit(l,Je,e)},togglePreview(e){a("preview",e)},togglePreviewOnly(e){a("previewOnly",e)},toggleHtmlPreview(e){a("htmlPreview",e)},toggleCatalog(e){Ge.emit(l,Ze,e)},triggerSave(){Ge.emit(l,Ye)},insert(e){Ge.emit(l,rt,"universal",{generate:e})},focus(e){var t;null==(t=r.value)||t.focus(e)},rerender(){Ge.emit(l,vt)},getSelectedText(){var e;return null==(e=r.value)?void 0:e.getSelectedText()},resetHistory(){var e;null==(e=r.value)||e.resetHistory()},domEventHandlers(e){Ge.emit(l,gt,e)},execCommand(e){Ge.emit(l,rt,e)},getEditorView(){var e;return null==(e=r.value)?void 0:e.getEditorView()}};t.expose(s)})(0,t,{editorId:v,catalogVisible:y,setting:f,updateSetting:b,codeRef:m}),u(()=>{Ge.clear(v)}),()=>{const d=We({props:e,ctx:t},"defToolbars"),c=We({props:e,ctx:t},"defFooters");return p("div",{id:v,class:[Be,e.class,"dark"===e.theme&&`${Be}-dark`,f.fullscreen||f.pageFullscreen?`${Be}-fullscreen`:""],style:e.style,ref:s},[e.toolbars.length>0&&p($o,{noPrettier:n,toolbars:e.toolbars,toolbarsExclude:e.toolbarsExclude,setting:f,updateSetting:b,tableShape:e.tableShape,defToolbars:d,noUploadImg:i,showToolbarName:e.showToolbarName,catalogVisible:y.value,codeTheme:e.codeTheme,insertLinkDirect:e.insertLinkDirect},null),p(il,{ref:m,modelValue:e.modelValue,setting:f,mdHeadingId:e.mdHeadingId,noMermaid:l,noPrettier:n,sanitize:e.sanitize,placeholder:e.placeholder,noKatex:o,scrollAuto:r.scrollAuto,formatCopiedText:e.formatCopiedText,autofocus:e.autoFocus,disabled:e.disabled,readonly:e.readOnly,maxlength:e.maxLength,autoDetectCode:e.autoDetectCode,noHighlight:a,updateModelValue:e=>{t.emit("update:modelValue",e)},onChange:o=>{var l;null==(l=e.onChange)||l.call(e,o),t.emit("onChange",o)},onHtmlChanged:o=>{var l;null==(l=e.onHtmlChanged)||l.call(e,o),t.emit("onHtmlChanged",o)},onGetCatalog:o=>{var l;null==(l=e.onGetCatalog)||l.call(e,o),t.emit("onGetCatalog",o)},onBlur:o=>{var l;null==(l=e.onBlur)||l.call(e,o),t.emit("onBlur",o)},onFocus:o=>{var l;null==(l=e.onFocus)||l.call(e,o),t.emit("onFocus",o)},onInput:o=>{var l;null==(l=e.onInput)||l.call(e,o),t.emit("onInput",o)},completions:e.completions,catalogVisible:y.value,theme:e.theme,noImgZoomIn:e.noImgZoomIn,onDrop:o=>{var l;null==(l=e.onDrop)||l.call(e,o),t.emit("onDrop",o)},inputBoxWidth:e.inputBoxWidth,oninputBoxWidthChange:o=>{var l;null==(l=e.oninputBoxWidthChange)||l.call(e,o),t.emit("oninputBoxWidthChange",o)},sanitizeMermaid:e.sanitizeMermaid,transformImgUrl:e.transformImgUrl,codeFoldable:e.codeFoldable,autoFoldThreshold:e.autoFoldThreshold,onRemount:()=>{var o;null==(o=e.onRemount)||o.call(e),t.emit("onRemount")},catalogLayout:e.catalogLayout,catalogMaxDepth:e.catalogMaxDepth},null),e.footers.length>0&&p(cl,{modelValue:e.modelValue,footers:e.footers,defFooters:c,noScrollAuto:!f.preview&&!f.htmlPreview||f.previewOnly,scrollAuto:r.scrollAuto,onScrollAutoChange:e=>r.scrollAuto=e},null)])}}});ul.install=e=>(e.component(ul.name,ul),e.use(co).use(Ke).use(uo).use(so).use(Jt),e);const ml=s({name:"NormalFooterToolbar",props:{onClick:{type:Function,default:void 0},language:{type:String,default:void 0},theme:{type:String,default:void 0},disabled:{type:Boolean,default:void 0}},emits:["onClick"],setup:(e,t)=>()=>{const o=We({props:e,ctx:t});return p("div",{class:[`${Be}-footer-item`,e.disabled&&`${Be}-disabled`],onClick:o=>{var l;e.disabled||(null==(l=e.onClick)||l.call(e,o),t.emit("onClick",o))}},[o])}});ml.install=e=>(e.component(ml.name,ml),e);var pl={exports:{}},vl={},gl={exports:{}},hl={};var fl=/javascript\s*\:/gim;hl.whiteList={"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1},hl.getDefaultWhiteList=function(){return{"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1}},hl.onAttr=function(e,t,o){},hl.onIgnoreAttr=function(e,t,o){},hl.safeAttrValue=function(e,t){return fl.test(t)?"":t};var bl=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},yl=hl;function kl(e){return null==e}function wl(e){(e=function(e){var t={};for(var o in e)t[o]=e[o];return t}(e||{})).whiteList=e.whiteList||yl.whiteList,e.onAttr=e.onAttr||yl.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||yl.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||yl.safeAttrValue,this.options=e}wl.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,o=t.whiteList,l=t.onAttr,n=t.onIgnoreAttr,i=t.safeAttrValue;return function(e,t){var o;";"!==(o=e,e=String.prototype.trimRight?o.trimRight():o.replace(/(\s*$)/g,""))[e.length-1]&&(e+=";");var l=e.length,n=!1,i=0,a=0,r="";function s(){if(!n){var o=bl(e.slice(i,a)),l=o.indexOf(":");if(-1!==l){var s=bl(o.slice(0,l)),d=bl(o.slice(l+1));if(s){var c=t(i,r.length,s,d,o);c&&(r+=c+"; ")}}}i=a+1}for(;a<l;a++){var d=e[a];if("/"===d&&"*"===e[a+1]){var c=e.indexOf("*/",a+2);if(-1===c)break;i=(a=c+1)+1,n=!1}else"("===d?n=!0:")"===d?n=!1:";"===d?n||s():"\n"===d&&s()}return bl(r)}(e,function(e,t,a,r,s){var d=o[a],c=!1;if(!0===d?c=d:"function"==typeof d?c=d(r):d instanceof RegExp&&(c=d.test(r)),!0!==c&&(c=!1),r=i(a,r)){var u,m={position:t,sourcePosition:e,source:s,isWhite:c};return c?kl(u=l(a,r,m))?a+":"+r:u:kl(u=n(a,r,m))?void 0:u}})};var xl=wl;!function(e,t){var o=hl,l=xl;for(var n in(t=e.exports=function(e,t){return new l(t).process(e)}).FilterCSS=l,o)t[n]=o[n];"undefined"!=typeof window&&(window.filterCSS=e.exports)}(gl,gl.exports);var $l=gl.exports,Cl={indexOf:function(e,t){var o,l;if(Array.prototype.indexOf)return e.indexOf(t);for(o=0,l=e.length;o<l;o++)if(e[o]===t)return o;return-1},forEach:function(e,t,o){var l,n;if(Array.prototype.forEach)return e.forEach(t,o);for(l=0,n=e.length;l<n;l++)t.call(o,e[l],l,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/.exec(e);return t?t.index:-1}},Tl=$l.FilterCSS,Sl=$l.getDefaultWhiteList,El=Cl,Il=new Tl;function Al(e){return e.replace(Ll,"&lt;").replace(Fl,"&gt;")}var Ll=/</g,Fl=/>/g,jl=/"/g,Ml=/&quot;/g,Hl=/&#([a-zA-Z0-9]*);?/gim,Bl=/&colon;?/gim,Ol=/&newline;?/gim,Nl=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,Dl=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,Vl=/u\s*r\s*l\s*\(.*/gi;function Pl(e){return e.replace(jl,"&quot;")}function Rl(e){return e.replace(Ml,'"')}function zl(e){return e.replace(Hl,function(e,t){return"x"===t[0]||"X"===t[0]?String.fromCharCode(parseInt(t.substr(1),16)):String.fromCharCode(parseInt(t,10))})}function ql(e){return e.replace(Bl,":").replace(Ol," ")}function Wl(e){for(var t="",o=0,l=e.length;o<l;o++)t+=e.charCodeAt(o)<32?" ":e.charAt(o);return El.trim(t)}function _l(e){return Wl(e=ql(e=zl(e=Rl(e))))}function Ul(e){return Al(e=Pl(e))}vl.whiteList={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height","loading"],ins:["datetime"],kbd:[],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]},vl.getDefaultWhiteList=function(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height","loading"],ins:["datetime"],kbd:[],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}},vl.onTag=function(e,t,o){},vl.onIgnoreTag=function(e,t,o){},vl.onTagAttr=function(e,t,o){},vl.onIgnoreTagAttr=function(e,t,o){},vl.safeAttrValue=function(e,t,o,l){if(o=_l(o),"href"===t||"src"===t){if("#"===(o=El.trim(o)))return"#";if("http://"!==o.substr(0,7)&&"https://"!==o.substr(0,8)&&"mailto:"!==o.substr(0,7)&&"tel:"!==o.substr(0,4)&&"data:image/"!==o.substr(0,11)&&"ftp://"!==o.substr(0,6)&&"./"!==o.substr(0,2)&&"../"!==o.substr(0,3)&&"#"!==o[0]&&"/"!==o[0])return""}else if("background"===t){if(Nl.lastIndex=0,Nl.test(o))return""}else if("style"===t){if(Dl.lastIndex=0,Dl.test(o))return"";if(Vl.lastIndex=0,Vl.test(o)&&(Nl.lastIndex=0,Nl.test(o)))return"";!1!==l&&(o=(l=l||Il).process(o))}return Ul(o)},vl.escapeHtml=Al,vl.escapeQuote=Pl,vl.unescapeQuote=Rl,vl.escapeHtmlEntities=zl,vl.escapeDangerHtml5Entities=ql,vl.clearNonPrintableCharacter=Wl,vl.friendlyAttrValue=_l,vl.escapeAttrValue=Ul,vl.onIgnoreTagStripAll=function(){return""},vl.StripTagBody=function(e,t){"function"!=typeof t&&(t=function(){});var o=!Array.isArray(e),l=[],n=!1;return{onIgnoreTag:function(i,a,r){if(function(t){return!!o||-1!==El.indexOf(e,t)}(i)){if(r.isClosing){var s=r.position+10;return l.push([!1!==n?n:r.position,s]),n=!1,"[/removed]"}return n||(n=r.position),"[removed]"}return t(i,a,r)},remove:function(e){var t="",o=0;return El.forEach(l,function(l){t+=e.slice(o,l[0]),o=l[1]}),t+=e.slice(o)}}},vl.stripCommentTag=function(e){for(var t="",o=0;o<e.length;){var l=e.indexOf("\x3c!--",o);if(-1===l){t+=e.slice(o);break}t+=e.slice(o,l);var n=e.indexOf("--\x3e",l);if(-1===n)break;o=n+3}return t},vl.stripBlankChar=function(e){var t=e.split("");return(t=t.filter(function(e){var t=e.charCodeAt(0);return!(127===t||t<=31&&10!==t&&13!==t)})).join("")},vl.attributeWrapSign='"',vl.cssFilter=Il,vl.getDefaultCSSWhiteList=Sl;var Kl={},Xl=Cl;function Gl(e){var t,o=Xl.spaceIndex(e);return t=-1===o?e.slice(1,-1):e.slice(1,o+1),"/"===(t=Xl.trim(t).toLowerCase()).slice(0,1)&&(t=t.slice(1)),"/"===t.slice(-1)&&(t=t.slice(0,-1)),t}function Yl(e){return"</"===e.slice(0,2)}var Zl=/[^a-zA-Z0-9\\_:.-]/gim;function Jl(e,t){for(;t<e.length;t++){var o=e[t];if(" "!==o)return"="===o?t:-1}}function Ql(e,t){for(;t<e.length;t++){var o=e[t];if(" "!==o)return"'"===o||'"'===o?t:-1}}function en(e,t){for(;t>0;t--){var o=e[t];if(" "!==o)return"="===o?t:-1}}function tn(e){return function(e){return'"'===e[0]&&'"'===e[e.length-1]||"'"===e[0]&&"'"===e[e.length-1]}(e)?e.substr(1,e.length-2):e}Kl.parseTag=function(e,t,o){var l="",n=0,i=!1,a=!1,r=0,s=e.length,d="",c="";e:for(r=0;r<s;r++){var u=e.charAt(r);if(!1===i){if("<"===u){i=r;continue}}else if(!1===a){if("<"===u){l+=o(e.slice(n,r)),i=r,n=r;continue}if(">"===u||r===s-1){l+=o(e.slice(n,i)),d=Gl(c=e.slice(i,r+1)),l+=t(i,l.length,d,c,Yl(c)),n=r+1,i=!1;continue}if('"'===u||"'"===u)for(var m=1,p=e.charAt(r-m);""===p.trim()||"="===p;){if("="===p){a=u;continue e}p=e.charAt(r-++m)}}else if(u===a){a=!1;continue}}return n<s&&(l+=o(e.substr(n))),l},Kl.parseAttr=function(e,t){var o=0,l=0,n=[],i=!1,a=e.length;function r(e,o){if(!((e=(e=Xl.trim(e)).replace(Zl,"").toLowerCase()).length<1)){var l=t(e,o||"");l&&n.push(l)}}for(var s=0;s<a;s++){var d,c=e.charAt(s);if(!1!==i||"="!==c)if(!1===i||s!==l){if(/\s|\n|\t/.test(c)){if(e=e.replace(/\s|\n|\t/g," "),!1===i){if(-1===(d=Jl(e,s))){r(Xl.trim(e.slice(o,s))),i=!1,o=s+1;continue}s=d-1;continue}if(-1===(d=en(e,s-1))){r(i,tn(Xl.trim(e.slice(o,s)))),i=!1,o=s+1;continue}}}else{if(-1===(d=e.indexOf(c,s+1)))break;r(i,Xl.trim(e.slice(l+1,d))),i=!1,o=(s=d)+1}else i=e.slice(o,s),o=s+1,l='"'===e.charAt(o)||"'"===e.charAt(o)?o:Ql(e,s+1)}return o<e.length&&(!1===i?r(e.slice(o)):r(i,tn(Xl.trim(e.slice(o))))),Xl.trim(n.join(" "))};var on=$l.FilterCSS,ln=vl,nn=Kl,an=nn.parseTag,rn=nn.parseAttr,sn=Cl;function dn(e){return null==e}function cn(e){(e=function(e){var t={};for(var o in e)t[o]=e[o];return t}(e||{})).stripIgnoreTag&&(e.onIgnoreTag,e.onIgnoreTag=ln.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=function(e){var t={};for(var o in e)Array.isArray(e[o])?t[o.toLowerCase()]=e[o].map(function(e){return e.toLowerCase()}):t[o.toLowerCase()]=e[o];return t}(e.whiteList||e.allowList):e.whiteList=ln.whiteList,this.attributeWrapSign=!0===e.singleQuotedAttributeValue?"'":ln.attributeWrapSign,e.onTag=e.onTag||ln.onTag,e.onTagAttr=e.onTagAttr||ln.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||ln.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||ln.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||ln.safeAttrValue,e.escapeHtml=e.escapeHtml||ln.escapeHtml,this.options=e,!1===e.css?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new on(e.css))}cn.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this,o=t.options,l=o.whiteList,n=o.onTag,i=o.onIgnoreTag,a=o.onTagAttr,r=o.onIgnoreTagAttr,s=o.safeAttrValue,d=o.escapeHtml,c=t.attributeWrapSign,u=t.cssFilter;o.stripBlankChar&&(e=ln.stripBlankChar(e)),o.allowCommentTag||(e=ln.stripCommentTag(e));var m=!1;o.stripIgnoreTagBody&&(m=ln.StripTagBody(o.stripIgnoreTagBody,i),i=m.onIgnoreTag);var p=an(e,function(e,t,o,m,p){var v={sourcePosition:e,position:t,isClosing:p,isWhite:Object.prototype.hasOwnProperty.call(l,o)},g=n(o,m,v);if(!dn(g))return g;if(v.isWhite){if(v.isClosing)return"</"+o+">";var h=function(e){var t=sn.spaceIndex(e);if(-1===t)return{html:"",closing:"/"===e[e.length-2]};var o="/"===(e=sn.trim(e.slice(t+1,-1)))[e.length-1];return o&&(e=sn.trim(e.slice(0,-1))),{html:e,closing:o}}(m),f=l[o],b=rn(h.html,function(e,t){var l=-1!==sn.indexOf(f,e),n=a(o,e,t,l);return dn(n)?l?(t=s(o,e,t,u))?e+"="+c+t+c:e:dn(n=r(o,e,t,l))?void 0:n:n});return m="<"+o,b&&(m+=" "+b),h.closing&&(m+=" /"),m+">"}return dn(g=i(o,m,v))?d(m):g},d);return m&&(p=m.remove(p)),p};var un=cn;!function(e,t){var o=vl,l=Kl,n=un;function i(e,t){return new n(t).process(e)}(t=e.exports=i).filterXSS=i,t.FilterXSS=n,function(){for(var e in o)t[e]=o[e];for(var n in l)t[n]=l[n]}(),"undefined"!=typeof window&&(window.filterXSS=e.exports),"undefined"!=typeof self&&"undefined"!=typeof DedicatedWorkerGlobalScope&&self instanceof DedicatedWorkerGlobalScope&&(self.filterXSS=e.exports)}(pl,pl.exports);export{ul as E,Jt as M};
