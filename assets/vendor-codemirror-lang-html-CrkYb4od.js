import{c as e,p as l}from"./vendor-lezer-html-tLnryuX4.js";import{cssLanguage as t,css as a}from"./vendor-codemirror-lang-css-C8Vb684c.js";import{typescriptLanguage as r,jsxLanguage as n,tsxLanguage as o,javascriptLanguage as s,javascript as i}from"./vendor-codemirror-lang-javascript-GVwct36_.js";import{E as u}from"./vendor-codemirror-view-DVzN21hM.js";import{E as d}from"./vendor-codemirror-state-D88w-V9V.js";import{L as c,c as p,d as m,f,l as g,s as b}from"./vendor-codemirror-language-C3hkV707.js";import"./vendor-lezer-lr-CZr-wB1l.js";import"./vendor-lezer-common-QPiu6Hcj.js";import"./vendor-lezer-highlight-4-fykoed.js";import"./vendor-lezer-css-zR3a2mIT.js";import"./vendor-marijn-find-cluster-break-BFVNO93u.js";import"./vendor-style-mod-tLAqh-pC.js";import"./vendor-w3c-keyname-BorKtCV5.js";import"./vendor-lezer-javascript-DQFFX--0.js";import"./vendor-codemirror-autocomplete-BSg-hdYo.js";const h=["_blank","_self","_top","_parent"],y=["ascii","utf-8","utf-16","latin1","latin1"],v=["get","post","put","delete"],w=["application/x-www-form-urlencoded","multipart/form-data","text/plain"],x=["true","false"],k={},j={a:{attrs:{href:null,ping:null,type:null,media:null,target:h,hreflang:null}},abbr:k,address:k,area:{attrs:{alt:null,coords:null,href:null,target:null,ping:null,media:null,hreflang:null,type:null,shape:["default","rect","circle","poly"]}},article:k,aside:k,audio:{attrs:{src:null,mediagroup:null,crossorigin:["anonymous","use-credentials"],preload:["none","metadata","auto"],autoplay:["autoplay"],loop:["loop"],controls:["controls"]}},b:k,base:{attrs:{href:null,target:h}},bdi:k,bdo:k,blockquote:{attrs:{cite:null}},body:k,br:k,button:{attrs:{form:null,formaction:null,name:null,value:null,autofocus:["autofocus"],disabled:["autofocus"],formenctype:w,formmethod:v,formnovalidate:["novalidate"],formtarget:h,type:["submit","reset","button"]}},canvas:{attrs:{width:null,height:null}},caption:k,center:k,cite:k,code:k,col:{attrs:{span:null}},colgroup:{attrs:{span:null}},command:{attrs:{type:["command","checkbox","radio"],label:null,icon:null,radiogroup:null,command:null,title:null,disabled:["disabled"],checked:["checked"]}},data:{attrs:{value:null}},datagrid:{attrs:{disabled:["disabled"],multiple:["multiple"]}},datalist:{attrs:{data:null}},dd:k,del:{attrs:{cite:null,datetime:null}},details:{attrs:{open:["open"]}},dfn:k,div:k,dl:k,dt:k,em:k,embed:{attrs:{src:null,type:null,width:null,height:null}},eventsource:{attrs:{src:null}},fieldset:{attrs:{disabled:["disabled"],form:null,name:null}},figcaption:k,figure:k,footer:k,form:{attrs:{action:null,name:null,"accept-charset":y,autocomplete:["on","off"],enctype:w,method:v,novalidate:["novalidate"],target:h}},h1:k,h2:k,h3:k,h4:k,h5:k,h6:k,head:{children:["title","base","link","style","meta","script","noscript","command"]},header:k,hgroup:k,hr:k,html:{attrs:{manifest:null}},i:k,iframe:{attrs:{src:null,srcdoc:null,name:null,width:null,height:null,sandbox:["allow-top-navigation","allow-same-origin","allow-forms","allow-scripts"],seamless:["seamless"]}},img:{attrs:{alt:null,src:null,ismap:null,usemap:null,width:null,height:null,crossorigin:["anonymous","use-credentials"]}},input:{attrs:{alt:null,dirname:null,form:null,formaction:null,height:null,list:null,max:null,maxlength:null,min:null,name:null,pattern:null,placeholder:null,size:null,src:null,step:null,value:null,width:null,accept:["audio/*","video/*","image/*"],autocomplete:["on","off"],autofocus:["autofocus"],checked:["checked"],disabled:["disabled"],formenctype:w,formmethod:v,formnovalidate:["novalidate"],formtarget:h,multiple:["multiple"],readonly:["readonly"],required:["required"],type:["hidden","text","search","tel","url","email","password","datetime","date","month","week","time","datetime-local","number","range","color","checkbox","radio","file","submit","image","reset","button"]}},ins:{attrs:{cite:null,datetime:null}},kbd:k,keygen:{attrs:{challenge:null,form:null,name:null,autofocus:["autofocus"],disabled:["disabled"],keytype:["RSA"]}},label:{attrs:{for:null,form:null}},legend:k,li:{attrs:{value:null}},link:{attrs:{href:null,type:null,hreflang:null,media:null,sizes:["all","16x16","16x16 32x32","16x16 32x32 64x64"]}},map:{attrs:{name:null}},mark:k,menu:{attrs:{label:null,type:["list","context","toolbar"]}},meta:{attrs:{content:null,charset:y,name:["viewport","application-name","author","description","generator","keywords"],"http-equiv":["content-language","content-type","default-style","refresh"]}},meter:{attrs:{value:null,min:null,low:null,high:null,max:null,optimum:null}},nav:k,noscript:k,object:{attrs:{data:null,type:null,name:null,usemap:null,form:null,width:null,height:null,typemustmatch:["typemustmatch"]}},ol:{attrs:{reversed:["reversed"],start:null,type:["1","a","A","i","I"]},children:["li","script","template","ul","ol"]},optgroup:{attrs:{disabled:["disabled"],label:null}},option:{attrs:{disabled:["disabled"],label:null,selected:["selected"],value:null}},output:{attrs:{for:null,form:null,name:null}},p:k,param:{attrs:{name:null,value:null}},pre:k,progress:{attrs:{value:null,max:null}},q:{attrs:{cite:null}},rp:k,rt:k,ruby:k,samp:k,script:{attrs:{type:["text/javascript"],src:null,async:["async"],defer:["defer"],charset:y}},section:k,select:{attrs:{form:null,name:null,size:null,autofocus:["autofocus"],disabled:["disabled"],multiple:["multiple"]}},slot:{attrs:{name:null}},small:k,source:{attrs:{src:null,type:null,media:null}},span:k,strong:k,style:{attrs:{type:["text/css"],media:null,scoped:null}},sub:k,summary:k,sup:k,table:k,tbody:k,td:{attrs:{colspan:null,rowspan:null,headers:null}},template:k,textarea:{attrs:{dirname:null,form:null,maxlength:null,name:null,placeholder:null,rows:null,cols:null,autofocus:["autofocus"],disabled:["disabled"],readonly:["readonly"],required:["required"],wrap:["soft","hard"]}},tfoot:k,th:{attrs:{colspan:null,rowspan:null,headers:null,scope:["row","col","rowgroup","colgroup"]}},thead:k,time:{attrs:{datetime:null}},title:k,tr:k,track:{attrs:{src:null,label:null,default:null,kind:["subtitles","captions","descriptions","chapters","metadata"],srclang:null}},ul:{children:["li","script","template","ul","ol"]},var:k,video:{attrs:{src:null,poster:null,width:null,height:null,crossorigin:["anonymous","use-credentials"],preload:["auto","metadata","none"],autoplay:["autoplay"],mediagroup:["movie"],muted:["muted"],controls:["controls"]}},wbr:k},T={accesskey:null,class:null,contenteditable:x,contextmenu:null,dir:["ltr","rtl","auto"],draggable:["true","false","auto"],dropzone:["copy","move","link","string:","file:"],hidden:["hidden"],id:null,inert:["inert"],itemid:null,itemprop:null,itemref:null,itemscope:["itemscope"],itemtype:null,lang:["ar","bn","de","en-GB","en-US","es","fr","hi","id","ja","pa","pt","ru","tr","zh"],spellcheck:x,autocorrect:x,autocapitalize:x,style:null,tabindex:null,title:null,translate:["yes","no"],rel:["stylesheet","alternate","author","bookmark","help","license","next","nofollow","noreferrer","prefetch","prev","search","tag"],role:"alert application article banner button cell checkbox complementary contentinfo dialog document feed figure form grid gridcell heading img list listbox listitem main navigation region row rowgroup search switch tab table tabpanel textbox timer".split(" "),"aria-activedescendant":null,"aria-atomic":x,"aria-autocomplete":["inline","list","both","none"],"aria-busy":x,"aria-checked":["true","false","mixed","undefined"],"aria-controls":null,"aria-describedby":null,"aria-disabled":x,"aria-dropeffect":null,"aria-expanded":["true","false","undefined"],"aria-flowto":null,"aria-grabbed":["true","false","undefined"],"aria-haspopup":x,"aria-hidden":x,"aria-invalid":["true","false","grammar","spelling"],"aria-label":null,"aria-labelledby":null,"aria-level":null,"aria-live":["off","polite","assertive"],"aria-multiline":x,"aria-multiselectable":x,"aria-owns":null,"aria-posinset":null,"aria-pressed":["true","false","mixed","undefined"],"aria-readonly":x,"aria-relevant":null,"aria-required":x,"aria-selected":["true","false","undefined"],"aria-setsize":null,"aria-sort":["ascending","descending","none","other"],"aria-valuemax":null,"aria-valuemin":null,"aria-valuenow":null,"aria-valuetext":null},C="beforeunload copy cut dragstart dragover dragleave dragenter dragend drag paste focus blur change click load mousedown mouseenter mouseleave mouseup keydown keyup resize scroll unload".split(" ").map(e=>"on"+e);for(let R of C)T[R]=null;class ${constructor(e,l){this.tags=Object.assign(Object.assign({},j),e),this.globalAttrs=Object.assign(Object.assign({},T),l),this.allTags=Object.keys(this.tags),this.globalAttrNames=Object.keys(this.globalAttrs)}}function z(e,l,t=e.length){if(!l)return"";let a=l.firstChild,r=a&&a.getChild("TagName");return r?e.sliceString(r.from,Math.min(r.to,t)):""}function O(e,l=!1){for(;e;e=e.parent)if("Element"==e.name){if(!l)return e;l=!1}return null}function E(e,l,t){let a=t.tags[z(e,O(l))];return(null==a?void 0:a.children)||t.allTags}function S(e,l){let t=[];for(let a=O(l);a&&!a.type.isTop;a=O(a.parent)){let r=z(e,a);if(r&&"CloseTag"==a.lastChild.name)break;r&&t.indexOf(r)<0&&("EndTag"==l.name||l.from>=a.firstChild.to)&&t.push(r)}return t}$.default=new $;const q=/^[:\-\.\w\u00b7-\uffff]*$/;function A(e,l,t,a,r){let n=/\s*>/.test(e.sliceDoc(r,r+5))?"":">",o=O(t,!0);return{from:a,to:r,options:E(e.doc,o,l).map(e=>({label:e,type:"type"})).concat(S(e.doc,t).map((e,l)=>({label:"/"+e,apply:"/"+e+n,type:"type",boost:99-l}))),validFor:/^\/?[:\-\.\w\u00b7-\uffff]*$/}}function I(e,l,t,a){let r=/\s*>/.test(e.sliceDoc(a,a+5))?"":">";return{from:t,to:a,options:S(e.doc,l).map((e,l)=>({label:e,apply:e+r,type:"type",boost:99-l})),validFor:q}}function N(e,l){let{state:t,pos:a}=l,r=b(t).resolveInner(a,-1),n=r.resolve(a);for(let o,s=a;n==r&&(o=r.childBefore(s));){let e=o.lastChild;if(!e||!e.type.isError||e.from<e.to)break;n=r=o,s=e.from}return"TagName"==r.name?r.parent&&/CloseTag$/.test(r.parent.name)?I(t,r,r.from,a):A(t,e,r,r.from,a):"StartTag"==r.name?A(t,e,r,a,a):"StartCloseTag"==r.name||"IncompleteCloseTag"==r.name?I(t,r,a,a):"OpenTag"==r.name||"SelfClosingTag"==r.name||"AttributeName"==r.name?function(e,l,t,a,r){let n=O(t),o=n?l.tags[z(e.doc,n)]:null,s=o&&o.attrs?Object.keys(o.attrs):[];return{from:a,to:r,options:(o&&!1===o.globalAttrs?s:s.length?s.concat(l.globalAttrNames):l.globalAttrNames).map(e=>({label:e,type:"property"})),validFor:q}}(t,e,r,"AttributeName"==r.name?r.from:a,a):"Is"==r.name||"AttributeValue"==r.name||"UnquotedAttributeValue"==r.name?function(e,l,t,a,r){var n;let o,s=null===(n=t.parent)||void 0===n?void 0:n.getChild("AttributeName"),i=[];if(s){let n=e.sliceDoc(s.from,s.to),u=l.globalAttrs[n];if(!u){let a=O(t),r=a?l.tags[z(e.doc,a)]:null;u=(null==r?void 0:r.attrs)&&r.attrs[n]}if(u){let l=e.sliceDoc(a,r).toLowerCase(),t='"',n='"';/^['"]/.test(l)?(o='"'==l[0]?/^[^"]*$/:/^[^']*$/,t="",n=e.sliceDoc(r,r+1)==l[0]?"":l[0],l=l.slice(1),a++):o=/^[^\s<>='"]*$/;for(let e of u)i.push({label:e,apply:t+e+n,type:"constant"})}}return{from:a,to:r,options:i,validFor:o}}(t,e,r,"Is"==r.name?a:r.from,a):!l.explicit||"Element"!=n.name&&"Text"!=n.name&&"Document"!=n.name?null:function(e,l,t,a){let r=[],n=0;for(let o of E(e.doc,t,l))r.push({label:"<"+o,type:"type"});for(let o of S(e.doc,t))r.push({label:"</"+o+">",type:"type",boost:99-n++});return{from:a,to:a,options:r,validFor:/^<\/?[:\-\.\w\u00b7-\uffff]*$/}}(t,e,r,a)}function F(e){return N($.default,e)}function _(e){let{extraTags:l,extraGlobalAttributes:t}=e,a=t||l?new $(l,t):$.default;return e=>N(a,e)}const V=s.parser.configure({top:"SingleExpression"}),D=[{tag:"script",attrs:e=>"text/typescript"==e.type||"ts"==e.lang,parser:r.parser},{tag:"script",attrs:e=>"text/babel"==e.type||"text/jsx"==e.type,parser:n.parser},{tag:"script",attrs:e=>"text/typescript-jsx"==e.type,parser:o.parser},{tag:"script",attrs:e=>/^(importmap|speculationrules|application\/(.+\+)?json)$/i.test(e.type),parser:V},{tag:"script",attrs:e=>!e.type||/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i.test(e.type),parser:s.parser},{tag:"style",attrs:e=>(!e.lang||"css"==e.lang)&&(!e.type||/^(text\/)?(x-)?(stylesheet|css)$/i.test(e.type)),parser:t.parser}],U=[{name:"style",parser:t.parser.configure({top:"Styles"})}].concat(C.map(e=>({name:e,parser:s.parser}))),G=c.define({name:"html",parser:l.configure({props:[m.add({Element(e){let l=/^(\s*)(<\/)?/.exec(e.textAfter);return e.node.to<=e.pos+l[0].length?e.continue():e.lineIndent(e.node.from)+(l[2]?0:e.unit)},"OpenTag CloseTag SelfClosingTag":e=>e.column(e.node.from)+e.unit,Document(e){if(e.pos+/\s*/.exec(e.textAfter)[0].length<e.node.to)return e.continue();let l,t=null;for(let a=e.node;;){let e=a.lastChild;if(!e||"Element"!=e.name||e.to!=a.to)break;t=a=e}return t&&(!(l=t.lastChild)||"CloseTag"!=l.name&&"SelfClosingTag"!=l.name)?e.lineIndent(t.from)+e.unit:null}}),f.add({Element(e){let l=e.firstChild,t=e.lastChild;return l&&"OpenTag"==l.name?{from:l.to,to:"CloseTag"==t.name?t.from:e.to}:null}}),g.add({"OpenTag CloseTag":e=>e.getChild("TagName")})]}),languageData:{commentTokens:{block:{open:"\x3c!--",close:"--\x3e"}},indentOnInput:/^\s*<\/\w+\W$/,wordChars:"-._"}}),M=G.configure({wrap:e(D,U)});function W(l={}){let t,r="";!1===l.matchClosingTags&&(r="noMatch"),!0===l.selfClosingTags&&(r=(r?r+" ":"")+"selfClosing"),(l.nestedLanguages&&l.nestedLanguages.length||l.nestedAttributes&&l.nestedAttributes.length)&&(t=e((l.nestedLanguages||[]).concat(D),(l.nestedAttributes||[]).concat(U)));let n=t?G.configure({wrap:t,dialect:r}):r?M.configure({dialect:r}):M;return new p(n,[M.data.of({autocomplete:_(l)}),!1!==l.autoCloseTags?L:[],i().support,a().support])}const B=new Set("area base br col command embed frame hr img input keygen link meta param source track wbr menuitem".split(" ")),L=u.inputHandler.of((e,l,t,a,r)=>{if(e.composing||e.state.readOnly||l!=t||">"!=a&&"/"!=a||!M.isActiveAt(e.state,l,-1))return!1;let n=r(),{state:o}=n,s=o.changeByRange(e=>{var l,t,r;let n,s=o.doc.sliceString(e.from-1,e.to)==a,{head:i}=e,u=b(o).resolveInner(i,-1);if(s&&">"==a&&"EndTag"==u.name){let a=u.parent;if("CloseTag"!=(null===(t=null===(l=a.parent)||void 0===l?void 0:l.lastChild)||void 0===t?void 0:t.name)&&(n=z(o.doc,a.parent,i))&&!B.has(n))return{range:e,changes:{from:i,to:i+(">"===o.doc.sliceString(i,i+1)?1:0),insert:`</${n}>`}}}else if(s&&"/"==a&&"IncompleteCloseTag"==u.name){let e=u.parent;if(u.from==i-2&&"CloseTag"!=(null===(r=e.lastChild)||void 0===r?void 0:r.name)&&(n=z(o.doc,e,i))&&!B.has(n)){let e=i+(">"===o.doc.sliceString(i,i+1)?1:0),l=`${n}>`;return{range:d.cursor(i+l.length,-1),changes:{from:i,to:e,insert:l}}}}return{range:e}});return!s.changes.empty&&(e.dispatch([n,o.update(s,{userEvent:"input.complete",scrollIntoView:!0})]),!0)});export{L as autoCloseTags,W as html,F as htmlCompletionSource,_ as htmlCompletionSourceWith,M as htmlLanguage,G as htmlPlain};
