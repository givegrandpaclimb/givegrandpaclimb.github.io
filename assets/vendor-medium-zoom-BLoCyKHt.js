var o=Object.assign||function(o){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(o[t]=e[t])}return o},n=function(o){return"IMG"===o.tagName},e=function(o){return o&&1===o.nodeType},t=function(o){return".svg"===(o.currentSrc||o.src).substr(-4).toLowerCase()},i=function(o){try{return Array.isArray(o)?o.filter(n):function(o){return NodeList.prototype.isPrototypeOf(o)}(o)?[].slice.call(o).filter(n):e(o)?[o].filter(n):"string"==typeof o?[].slice.call(document.querySelectorAll(o)).filter(n):[]}catch(t){throw new TypeError("The provided selector is invalid.\nExpects a CSS selector, a Node element, a NodeList or an array.\nSee: https://github.com/francoischalifour/medium-zoom")}},u=function(n,e){var t=o({bubbles:!1,cancelable:!1,detail:void 0},e);if("function"==typeof window.CustomEvent)return new CustomEvent(n,t);var i=document.createEvent("CustomEvent");return i.initCustomEvent(n,t.bubbles,t.cancelable,t.detail),i},r=function n(r){var m=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=window.Promise||function(o){function n(){}o(n,n)},d=function(){for(var o=arguments.length,n=Array(o),e=0;e<o;e++)n[e]=arguments[e];var t=n.reduce(function(o,n){return[].concat(o,i(n))},[]);return t.filter(function(o){return-1===s.indexOf(o)}).forEach(function(o){s.push(o),o.classList.add("medium-zoom-image")}),v.forEach(function(o){var n=o.type,e=o.listener,i=o.options;t.forEach(function(o){o.addEventListener(n,e,i)})}),y},a=function(){var n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).target,i=function(){var n={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight,left:0,top:0,right:0,bottom:0},i=void 0,u=void 0;if(g.container)if(g.container instanceof Object)i=(n=o({},n,g.container)).width-n.left-n.right-2*g.margin,u=n.height-n.top-n.bottom-2*g.margin;else{var r=(e(g.container)?g.container:document.querySelector(g.container)).getBoundingClientRect(),m=r.width,c=r.height,d=r.left,a=r.top;n=o({},n,{width:m,height:c,left:d,top:a})}i=i||n.width-2*g.margin,u=u||n.height-2*g.margin;var f=h.zoomedHd||h.original,l=t(f)?i:f.naturalWidth||i,s=t(f)?u:f.naturalHeight||u,v=f.getBoundingClientRect(),p=v.top,z=v.left,w=v.width,y=v.height,b=Math.min(Math.max(w,l),i)/w,x=Math.min(Math.max(y,s),u)/y,O=Math.min(b,x),j="scale("+O+") translate3d("+((i-w)/2-z+g.margin+n.left)/O+"px, "+((u-y)/2-p+g.margin+n.top)/O+"px, 0)";h.zoomed.style.transform=j,h.zoomedHd&&(h.zoomedHd.style.transform=j)};return new c(function(o){if(n&&-1===s.indexOf(n))o(y);else if(h.zoomed)o(y);else{if(n)h.original=n;else{if(!(s.length>0))return void o(y);var t=s;h.original=t[0]}if(h.original.dispatchEvent(u("medium-zoom:open",{detail:{zoom:y}})),z=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,p=!0,h.zoomed=function(o){var n=o.getBoundingClientRect(),e=n.top,t=n.left,i=n.width,u=n.height,r=o.cloneNode(),m=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,c=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;return r.removeAttribute("id"),r.style.position="absolute",r.style.top=e+m+"px",r.style.left=t+c+"px",r.style.width=i+"px",r.style.height=u+"px",r.style.transform="",r}(h.original),document.body.appendChild(w),g.template){var r=e(g.template)?g.template:document.querySelector(g.template);h.template=document.createElement("div"),h.template.appendChild(r.content.cloneNode(!0)),document.body.appendChild(h.template)}if(h.original.parentElement&&"PICTURE"===h.original.parentElement.tagName&&h.original.currentSrc&&(h.zoomed.src=h.original.currentSrc),document.body.appendChild(h.zoomed),window.requestAnimationFrame(function(){document.body.classList.add("medium-zoom--opened")}),h.original.classList.add("medium-zoom-image--hidden"),h.zoomed.classList.add("medium-zoom-image--opened"),h.zoomed.addEventListener("click",f),h.zoomed.addEventListener("transitionend",function n(){p=!1,h.zoomed.removeEventListener("transitionend",n),h.original.dispatchEvent(u("medium-zoom:opened",{detail:{zoom:y}})),o(y)}),h.original.getAttribute("data-zoom-src")){h.zoomedHd=h.zoomed.cloneNode(),h.zoomedHd.removeAttribute("srcset"),h.zoomedHd.removeAttribute("sizes"),h.zoomedHd.removeAttribute("loading"),h.zoomedHd.src=h.zoomed.getAttribute("data-zoom-src"),h.zoomedHd.onerror=function(){clearInterval(m),h.zoomedHd=null,i()};var m=setInterval(function(){h.zoomedHd.complete&&(clearInterval(m),h.zoomedHd.classList.add("medium-zoom-image--opened"),h.zoomedHd.addEventListener("click",f),document.body.appendChild(h.zoomedHd),i())},10)}else if(h.original.hasAttribute("srcset")){h.zoomedHd=h.zoomed.cloneNode(),h.zoomedHd.removeAttribute("sizes"),h.zoomedHd.removeAttribute("loading");var c=h.zoomedHd.addEventListener("load",function(){h.zoomedHd.removeEventListener("load",c),h.zoomedHd.classList.add("medium-zoom-image--opened"),h.zoomedHd.addEventListener("click",f),document.body.appendChild(h.zoomedHd),i()})}else i()}})},f=function(){return new c(function(o){!p&&h.original?(p=!0,document.body.classList.remove("medium-zoom--opened"),h.zoomed.style.transform="",h.zoomedHd&&(h.zoomedHd.style.transform=""),h.template&&(h.template.style.transition="opacity 150ms",h.template.style.opacity=0),h.original.dispatchEvent(u("medium-zoom:close",{detail:{zoom:y}})),h.zoomed.addEventListener("transitionend",function n(){h.original.classList.remove("medium-zoom-image--hidden"),document.body.removeChild(h.zoomed),h.zoomedHd&&document.body.removeChild(h.zoomedHd),document.body.removeChild(w),h.zoomed.classList.remove("medium-zoom-image--opened"),h.template&&document.body.removeChild(h.template),p=!1,h.zoomed.removeEventListener("transitionend",n),h.original.dispatchEvent(u("medium-zoom:closed",{detail:{zoom:y}})),h.original=null,h.zoomed=null,h.zoomedHd=null,h.template=null,o(y)})):o(y)})},l=function(){var o=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).target;return h.original?f():a({target:o})},s=[],v=[],p=!1,z=0,g=m,h={original:null,zoomed:null,zoomedHd:null,template:null};"[object Object]"===Object.prototype.toString.call(r)?g=r:(r||"string"==typeof r)&&d(r);var w=function(o){var n=document.createElement("div");return n.classList.add("medium-zoom-overlay"),n.style.background=o,n}((g=o({margin:0,background:"#fff",scrollOffset:40,container:null,template:null},g)).background);document.addEventListener("click",function(o){var n=o.target;n!==w?-1!==s.indexOf(n)&&l({target:n}):f()}),document.addEventListener("keyup",function(o){var n=o.key||o.keyCode;"Escape"!==n&&"Esc"!==n&&27!==n||f()}),document.addEventListener("scroll",function(){if(!p&&h.original){var o=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;Math.abs(z-o)>g.scrollOffset&&setTimeout(f,150)}}),window.addEventListener("resize",f);var y={open:a,close:f,toggle:l,update:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n;if(n.background&&(w.style.background=n.background),n.container&&n.container instanceof Object&&(t.container=o({},g.container,n.container)),n.template){var i=e(n.template)?n.template:document.querySelector(n.template);t.template=i}return g=o({},g,t),s.forEach(function(o){o.dispatchEvent(u("medium-zoom:update",{detail:{zoom:y}}))}),y},clone:function(){return n(o({},g,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}))},attach:d,detach:function(){for(var o=arguments.length,n=Array(o),e=0;e<o;e++)n[e]=arguments[e];h.zoomed&&f();var t=n.length>0?n.reduce(function(o,n){return[].concat(o,i(n))},[]):s;return t.forEach(function(o){o.classList.remove("medium-zoom-image"),o.dispatchEvent(u("medium-zoom:detach",{detail:{zoom:y}}))}),s=s.filter(function(o){return-1===t.indexOf(o)}),y},on:function(o,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return s.forEach(function(t){t.addEventListener("medium-zoom:"+o,n,e)}),v.push({type:"medium-zoom:"+o,listener:n,options:e}),y},off:function(o,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return s.forEach(function(t){t.removeEventListener("medium-zoom:"+o,n,e)}),v=v.filter(function(e){return!(e.type==="medium-zoom:"+o&&e.listener.toString()===n.toString())}),y},getOptions:function(){return g},getImages:function(){return s},getZoomedImage:function(){return h.original}};return y};!function(o,n){void 0===n&&(n={});var e=n.insertAt;if("undefined"!=typeof document){var t=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===e&&t.firstChild?t.insertBefore(i,t.firstChild):t.appendChild(i),i.styleSheet?i.styleSheet.cssText=o:i.appendChild(document.createTextNode(o))}}(".medium-zoom-overlay{position:fixed;top:0;right:0;bottom:0;left:0;opacity:0;transition:opacity .3s;will-change:opacity}.medium-zoom--opened .medium-zoom-overlay{cursor:pointer;cursor:zoom-out;opacity:1}.medium-zoom-image{cursor:pointer;cursor:zoom-in;transition:transform .3s cubic-bezier(.2,0,.2,1)!important}.medium-zoom-image--hidden{visibility:hidden}.medium-zoom-image--opened{position:relative;cursor:pointer;cursor:zoom-out;will-change:transform}");export{r as m};
