import{N as t}from"./vendor-lezer-common-3JYFuo68.js";let e=0;class a{constructor(t,a,i,r){this.name=t,this.set=a,this.base=i,this.modified=r,this.id=e++}toString(){let{name:t}=this;for(let e of this.modified)e.name&&(t=`${e.name}(${t})`);return t}static define(t,e){let i="string"==typeof t?t:"?";if(t instanceof a&&(e=t),null==e?void 0:e.base)throw new Error("Can not derive from a modified tag");let r=new a(i,[],null,[]);if(r.set.push(r),e)for(let a of e.set)r.set.push(a);return r}static defineModifier(t){let e=new r(t);return t=>t.modified.indexOf(e)>-1?t:r.get(t.base||t,t.modified.concat(e).sort((t,e)=>t.id-e.id))}}let i=0;class r{constructor(t){this.name=t,this.instances=[],this.id=i++}static get(t,e){if(!e.length)return t;let i=e[0].instances.find(a=>{return a.base==t&&(i=e,r=a.modified,i.length==r.length&&i.every((t,e)=>t==r[e]));var i,r});if(i)return i;let o=[],s=new a(t.name,o,t,e);for(let a of e)a.instances.push(s);let n=function(t){let e=[[]];for(let a=0;a<t.length;a++)for(let i=0,r=e.length;i<r;i++)e.push(e[i].concat(t[a]));return e.sort((t,e)=>e.length-t.length)}(e);for(let a of t.set)if(!a.modified.length)for(let t of n)o.push(r.get(a,t));return s}}function o(t){let e=Object.create(null);for(let a in t){let i=t[a];Array.isArray(i)||(i=[i]);for(let t of a.split(" "))if(t){let a=[],r=2,o=t;for(let e=0;;){if("..."==o&&e>0&&e+3==t.length){r=1;break}let i=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(o);if(!i)throw new RangeError("Invalid path: "+t);if(a.push("*"==i[0]?"":'"'==i[0][0]?JSON.parse(i[0]):i[0]),e+=i[0].length,e==t.length)break;let s=t[e++];if(e==t.length&&"!"==s){r=0;break}if("/"!=s)throw new RangeError("Invalid path: "+t);o=t.slice(e)}let s=a.length-1,l=a[s];if(!l)throw new RangeError("Invalid path: "+t);let c=new n(i,r,s>0?a.slice(0,s):null);e[l]=c.sort(e[l])}}return s.add(e)}const s=new t;class n{constructor(t,e,a,i){this.tags=t,this.mode=e,this.context=a,this.next=i}get opaque(){return 0==this.mode}get inherit(){return 1==this.mode}sort(t){return!t||t.depth<this.depth?(this.next=t,this):(t.next=this.sort(t.next),t)}get depth(){return this.context?this.context.length:0}}function l(t,e){let a=Object.create(null);for(let o of t)if(Array.isArray(o.tag))for(let t of o.tag)a[t.id]=o.class;else a[o.tag.id]=o.class;let{scope:i,all:r=null}=e||{};return{style:t=>{let e=r;for(let i of t)for(let t of i.set){let i=a[t.id];if(i){e=e?e+" "+i:i;break}}return e},scope:i}}function c(t,e,a,i=0,r=t.length){let o=new h(i,Array.isArray(e)?e:[e],a);o.highlightRange(t.cursor(),i,r,"",o.highlighters),o.flush(r)}n.empty=new n([],2,null);class h{constructor(t,e,a){this.at=t,this.highlighters=e,this.span=a,this.class=""}startSpan(t,e){e!=this.class&&(this.flush(t),t>this.at&&(this.at=t),this.class=e)}flush(t){t>this.at&&this.class&&this.span(this.at,t,this.class)}highlightRange(e,a,i,r,o){let{type:l,from:c,to:h}=e;if(c>=i||h<=a)return;l.isTop&&(o=this.highlighters.filter(t=>!t.scope||t.scope(l)));let f=r,g=function(t){let e=t.type.prop(s);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}(e)||n.empty,d=function(t,e){let a=null;for(let i of t){let t=i.style(e);t&&(a=a?a+" "+t:t)}return a}(o,g.tags);if(d&&(f&&(f+=" "),f+=d,1==g.mode&&(r+=(r?" ":"")+d)),this.startSpan(Math.max(a,c),f),g.opaque)return;let m=e.tree&&e.tree.prop(t.mounted);if(m&&m.overlay){let t=e.node.enter(m.overlay[0].from+c,1),s=this.highlighters.filter(t=>!t.scope||t.scope(m.tree.type)),n=e.firstChild();for(let l=0,g=c;;l++){let d=l<m.overlay.length?m.overlay[l]:null,p=d?d.from+c:h,u=Math.max(a,g),k=Math.min(i,p);if(u<k&&n)for(;e.from<k&&(this.highlightRange(e,u,k,r,o),this.startSpan(Math.min(k,e.to),f),!(e.to>=p)&&e.nextSibling()););if(!d||p>i)break;g=d.to+c,g>a&&(this.highlightRange(t.cursor(),Math.max(a,d.from+c),Math.min(i,g),"",s),this.startSpan(Math.min(i,g),f))}n&&e.parent()}else if(e.firstChild()){m&&(r="");do{if(!(e.to<=a)){if(e.from>=i)break;this.highlightRange(e,a,i,r,o),this.startSpan(Math.min(i,e.to),f)}}while(e.nextSibling());e.parent()}}}const f=a.define,g=f(),d=f(),m=f(d),p=f(d),u=f(),k=f(u),b=f(u),y=f(),N=f(y),v=f(),w=f(),x=f(),M=f(x),O=f(),S={comment:g,lineComment:f(g),blockComment:f(g),docComment:f(g),name:d,variableName:f(d),typeName:m,tagName:f(m),propertyName:p,attributeName:f(p),className:f(d),labelName:f(d),namespace:f(d),macroName:f(d),literal:u,string:k,docString:f(k),character:f(k),attributeValue:f(k),number:b,integer:f(b),float:f(b),bool:f(u),regexp:f(u),escape:f(u),color:f(u),url:f(u),keyword:v,self:f(v),null:f(v),atom:f(v),unit:f(v),modifier:f(v),operatorKeyword:f(v),controlKeyword:f(v),definitionKeyword:f(v),moduleKeyword:f(v),operator:w,derefOperator:f(w),arithmeticOperator:f(w),logicOperator:f(w),bitwiseOperator:f(w),compareOperator:f(w),updateOperator:f(w),definitionOperator:f(w),typeOperator:f(w),controlOperator:f(w),punctuation:x,separator:f(x),bracket:M,angleBracket:f(M),squareBracket:f(M),paren:f(M),brace:f(M),content:y,heading:N,heading1:f(N),heading2:f(N),heading3:f(N),heading4:f(N),heading5:f(N),heading6:f(N),contentSeparator:f(y),list:f(y),quote:f(y),emphasis:f(y),strong:f(y),link:f(y),monospace:f(y),strikethrough:f(y),inserted:f(),deleted:f(),changed:f(),invalid:f(),meta:O,documentMeta:f(O),annotation:f(O),processingInstruction:f(O),definition:a.defineModifier("definition"),constant:a.defineModifier("constant"),function:a.defineModifier("function"),standard:a.defineModifier("standard"),local:a.defineModifier("local"),special:a.defineModifier("special")};for(let R in S){let t=S[R];t instanceof a&&(t.name=R)}l([{tag:S.link,class:"tok-link"},{tag:S.heading,class:"tok-heading"},{tag:S.emphasis,class:"tok-emphasis"},{tag:S.strong,class:"tok-strong"},{tag:S.keyword,class:"tok-keyword"},{tag:S.atom,class:"tok-atom"},{tag:S.bool,class:"tok-bool"},{tag:S.url,class:"tok-url"},{tag:S.labelName,class:"tok-labelName"},{tag:S.inserted,class:"tok-inserted"},{tag:S.deleted,class:"tok-deleted"},{tag:S.literal,class:"tok-literal"},{tag:S.string,class:"tok-string"},{tag:S.number,class:"tok-number"},{tag:[S.regexp,S.escape,S.special(S.string)],class:"tok-string2"},{tag:S.variableName,class:"tok-variableName"},{tag:S.local(S.variableName),class:"tok-variableName tok-local"},{tag:S.definition(S.variableName),class:"tok-variableName tok-definition"},{tag:S.special(S.variableName),class:"tok-variableName2"},{tag:S.definition(S.propertyName),class:"tok-propertyName tok-definition"},{tag:S.typeName,class:"tok-typeName"},{tag:S.namespace,class:"tok-namespace"},{tag:S.className,class:"tok-className"},{tag:S.macroName,class:"tok-macroName"},{tag:S.propertyName,class:"tok-propertyName"},{tag:S.operator,class:"tok-operator"},{tag:S.comment,class:"tok-comment"},{tag:S.meta,class:"tok-meta"},{tag:S.invalid,class:"tok-invalid"},{tag:S.punctuation,class:"tok-punctuation"}]);export{a as T,l as a,c as h,o as s,S as t};
