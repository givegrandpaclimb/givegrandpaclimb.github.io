import{l as n}from"./vendor-aws-sdk-util-locate-window-DyHfrE-U.js";import{s as r}from"./vendor-aws-crypto-supports-web-crypto-CFHIL1Tf.js";import{c as t}from"./vendor-aws-crypto-util-Cihfljgq.js";function i(n){return"string"==typeof n?0===n.length:0===n.byteLength}var o={name:"SHA-1"},e={name:"HMAC",hash:o},s=new Uint8Array([218,57,163,238,94,107,75,13,50,85,191,239,149,96,24,144,175,216,7,9]),u=function(){function r(r){this.toHash=new Uint8Array(0),void 0!==r&&(this.key=new Promise(function(t,i){n().crypto.subtle.importKey("raw",a(r),e,!1,["sign"]).then(t,i)}),this.key.catch(function(){}))}return r.prototype.update=function(n){if(!i(n)){var r=a(n),t=new Uint8Array(this.toHash.byteLength+r.byteLength);t.set(this.toHash,0),t.set(r,this.toHash.byteLength),this.toHash=t}},r.prototype.digest=function(){var r=this;return this.key?this.key.then(function(t){return n().crypto.subtle.sign(e,t,r.toHash).then(function(n){return new Uint8Array(n)})}):i(this.toHash)?Promise.resolve(s):Promise.resolve().then(function(){return n().crypto.subtle.digest(o,r.toHash)}).then(function(n){return Promise.resolve(new Uint8Array(n))})},r.prototype.reset=function(){this.toHash=new Uint8Array(0)},r}();function a(n){return"string"==typeof n?(r=n,(new TextEncoder).encode(r)):ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(n);var r}var f=function(){function i(t){if(!r(n()))throw new Error("SHA1 not supported");this.hash=new u(t)}return i.prototype.update=function(n,r){this.hash.update(t(n))},i.prototype.digest=function(){return this.hash.digest()},i.prototype.reset=function(){this.hash.reset()},i}();export{f as S};
