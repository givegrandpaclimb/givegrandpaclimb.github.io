import{i as t,c as e}from"./vendor-aws-crypto-util-BWmqBKNk.js";import{l as s}from"./vendor-aws-sdk-util-locate-window-DyHfrE-U.js";import{S as r}from"./vendor-aws-crypto-sha256-js-BKrN0MDw.js";import{s as n}from"./vendor-aws-crypto-supports-web-crypto-BM5mncbd.js";var o={name:"SHA-256"},i={name:"HMAC",hash:o},h=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85]),a=function(){function r(t){this.toHash=new Uint8Array(0),this.secret=t,this.reset()}return r.prototype.update=function(s){if(!t(s)){var r=e(s),n=new Uint8Array(this.toHash.byteLength+r.byteLength);n.set(this.toHash,0),n.set(r,this.toHash.byteLength),this.toHash=n}},r.prototype.digest=function(){var e=this;return this.key?this.key.then(function(t){return s().crypto.subtle.sign(i,t,e.toHash).then(function(t){return new Uint8Array(t)})}):t(this.toHash)?Promise.resolve(h):Promise.resolve().then(function(){return s().crypto.subtle.digest(o,e.toHash)}).then(function(t){return Promise.resolve(new Uint8Array(t))})},r.prototype.reset=function(){var t=this;this.toHash=new Uint8Array(0),this.secret&&void 0!==this.secret&&(this.key=new Promise(function(r,n){s().crypto.subtle.importKey("raw",e(t.secret),i,!1,["sign"]).then(r,n)}),this.key.catch(function(){}))},r}(),u=function(){function t(t){n(s())?this.hash=new a(t):this.hash=new r(t)}return t.prototype.update=function(t,s){this.hash.update(e(t))},t.prototype.digest=function(){return this.hash.digest()},t.prototype.reset=function(){this.hash.reset()},t}();export{u as S};
