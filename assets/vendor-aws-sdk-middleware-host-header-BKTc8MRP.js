import{a as e}from"./vendor-smithy-protocol-http-D-24QeOr.js";function t(e){return e}const r={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},o=t=>({applyToStack:o=>{o.add((t=>r=>async o=>{if(!e.isInstance(o.request))return r(o);const{request:a}=o,{handlerProtocol:s=""}=t.requestHandler.metadata||{};if(s.indexOf("h2")>=0&&!a.headers[":authority"])delete a.headers.host,a.headers[":authority"]=a.hostname+(a.port?":"+a.port:"");else if(!a.headers.host){let e=a.hostname;null!=a.port&&(e+=`:${a.port}`),a.headers.host=e}return r(o)})(t),r)}});export{o as g,t as r};
