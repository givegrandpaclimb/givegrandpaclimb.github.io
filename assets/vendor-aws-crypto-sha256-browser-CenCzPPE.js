import{i as t,c as n}from"./vendor-aws-crypto-util-Cihfljgq.js";import{l as i}from"./vendor-aws-sdk-util-locate-window-DyHfrE-U.js";import{S as r}from"./vendor-aws-crypto-sha256-js-BVIpSl1y.js";import{s}from"./vendor-aws-crypto-supports-web-crypto-CFHIL1Tf.js";var o={name:"SHA-256"},e={name:"HMAC",hash:o},u=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85]),a=function(){function r(t){this.toHash=new Uint8Array(0),this.secret=t,this.reset()}return r.prototype.update=function(i){if(!t(i)){var r=n(i),s=new Uint8Array(this.toHash.byteLength+r.byteLength);s.set(this.toHash,0),s.set(r,this.toHash.byteLength),this.toHash=s}},r.prototype.digest=function(){var n=this;return this.key?this.key.then(function(t){return i().crypto.subtle.sign(e,t,n.toHash).then(function(t){return new Uint8Array(t)})}):t(this.toHash)?Promise.resolve(u):Promise.resolve().then(function(){return i().crypto.subtle.digest(o,n.toHash)}).then(function(t){return Promise.resolve(new Uint8Array(t))})},r.prototype.reset=function(){var t=this;this.toHash=new Uint8Array(0),this.secret&&void 0!==this.secret&&(this.key=new Promise(function(r,s){i().crypto.subtle.importKey("raw",n(t.secret),e,!1,["sign"]).then(r,s)}),this.key.catch(function(){}))},r}(),h=function(){function t(t){s(i())?this.hash=new a(t):this.hash=new r(t)}return t.prototype.update=function(t,i){this.hash.update(n(t))},t.prototype.digest=function(){return this.hash.digest()},t.prototype.reset=function(){this.hash.reset()},t}();export{h as S};
