import{M as e,u as t,U as o,k as n,x as l,I as i,C as a,$ as r}from"./vendor-vavt-util-DXQ7wXY0.js";import{d as s,w as d,o as c,a as u,c as m,b as p,i as f,p as g,e as v,F as h,u as b,n as y,h as k,T as $,f as w}from"./vendor-vue-runtime-core-CYyz6kX_.js";import{r as x,a as C,t as S,s as j}from"./vendor-vue-reactivity-9a3aNdvb.js";import{m as T}from"./vendor-medium-zoom-BLoCyKHt.js";import{c as I}from"./vendor-vavt-copy2clipboard-CDKw0SZT.js";import{M as F}from"./vendor-markdown-it-B7WnhrPV.js";import{r as B}from"./vendor-markdown-it-image-figures-DS07bss9.js";import{s as A}from"./vendor-markdown-it-sub-BhxW8ZY6.js";import{s as M}from"./vendor-markdown-it-sup-Bf7E6rkm.js";import{L}from"./vendor-lru-cache-26w99f4F.js";import{U as O,T as E,X as H,S as z,C as R,L as D,a as N,E as P,V,b as q,c as W,M as _,d as U,e as G,f as K,F as Z,R as J,g as X,I as Y,h as Q,i as ee,j as te,k as oe,l as ne,Q as le,m as ie,n as ae,H as re,o as se,p as de,q as ce,B as ue}from"./vendor-lucide-vue-next-DrmM7VH-.js";import{k as me,E as pe,d as fe,p as ge}from"./vendor-codemirror-view-DVzN21hM.js";import{l as ve}from"./vendor-codemirror-language-data-Ctr-BaxI.js";import{markdown as he}from"./vendor-codemirror-lang-markdown-DLbKznxg.js";import{o as be,j as ye,E as ke,a as $e}from"./vendor-codemirror-state-D88w-V9V.js";import{d as we,h as xe,i as Ce,a as Se,u as je,r as Te,b as Ie}from"./vendor-codemirror-commands-PBOUL2CY.js";import{u as Fe,i as Be,H as Ae}from"./vendor-codemirror-language-C3hkV707.js";import{t as Me}from"./vendor-lezer-highlight-4-fykoed.js";import{a as Le}from"./vendor-codemirror-autocomplete-BSg-hdYo.js";import{s as Oe}from"./vendor-codemirror-search-CCzgMxxw.js";const Ee="md-editor",He="https://unpkg.com",ze={main:`${He}/prettier@3.3.3/standalone.js`,markdown:`${He}/prettier@3.3.3/plugins/markdown.js`},Re={a11y:{light:`${He}/@highlightjs/cdn-assets@11.10.0/styles/a11y-light.min.css`,dark:`${He}/@highlightjs/cdn-assets@11.10.0/styles/a11y-dark.min.css`},atom:{light:`${He}/@highlightjs/cdn-assets@11.10.0/styles/atom-one-light.min.css`,dark:`${He}/@highlightjs/cdn-assets@11.10.0/styles/atom-one-dark.min.css`},github:{light:`${He}/@highlightjs/cdn-assets@11.10.0/styles/github.min.css`,dark:`${He}/@highlightjs/cdn-assets@11.10.0/styles/github-dark.min.css`},gradient:{light:`${He}/@highlightjs/cdn-assets@11.10.0/styles/gradient-light.min.css`,dark:`${He}/@highlightjs/cdn-assets@11.10.0/styles/gradient-dark.min.css`},kimbie:{light:`${He}/@highlightjs/cdn-assets@11.10.0/styles/kimbie-light.min.css`,dark:`${He}/@highlightjs/cdn-assets@11.10.0/styles/kimbie-dark.min.css`},paraiso:{light:`${He}/@highlightjs/cdn-assets@11.10.0/styles/paraiso-light.min.css`,dark:`${He}/@highlightjs/cdn-assets@11.10.0/styles/paraiso-dark.min.css`},qtcreator:{light:`${He}/@highlightjs/cdn-assets@11.10.0/styles/qtcreator-light.min.css`,dark:`${He}/@highlightjs/cdn-assets@11.10.0/styles/qtcreator-dark.min.css`},stackoverflow:{light:`${He}/@highlightjs/cdn-assets@11.10.0/styles/stackoverflow-light.min.css`,dark:`${He}/@highlightjs/cdn-assets@11.10.0/styles/stackoverflow-dark.min.css`}},De=["bold","underline","italic","strikeThrough","-","title","sub","sup","quote","unorderedList","orderedList","task","-","codeRow","code","link","image","table","mermaid","katex","-","revoke","next","save","=","prettier","pageFullscreen","fullscreen","preview","previewOnly","htmlPreview","catalog","github"],Ne=["markdownTotal","=","scrollSwitch"],Pe={"zh-CN":{toolbarTips:{bold:"加粗",underline:"下划线",italic:"斜体",strikeThrough:"删除线",title:"标题",sub:"下标",sup:"上标",quote:"引用",unorderedList:"无序列表",orderedList:"有序列表",task:"任务列表",codeRow:"行内代码",code:"块级代码",link:"链接",image:"图片",table:"表格",mermaid:"mermaid图",katex:"katex公式",revoke:"后退",next:"前进",save:"保存",prettier:"美化",pageFullscreen:"浏览器全屏",fullscreen:"屏幕全屏",preview:"预览",previewOnly:"仅预览",htmlPreview:"html代码预览",catalog:"目录",github:"源码地址"},titleItem:{h1:"一级标题",h2:"二级标题",h3:"三级标题",h4:"四级标题",h5:"五级标题",h6:"六级标题"},imgTitleItem:{link:"添加链接",upload:"上传图片",clip2upload:"裁剪上传"},linkModalTips:{linkTitle:"添加链接",imageTitle:"添加图片",descLabel:"链接描述：",descLabelPlaceHolder:"请输入描述...",urlLabel:"链接地址：",urlLabelPlaceHolder:"请输入链接...",buttonOK:"确定"},clipModalTips:{title:"裁剪图片上传",buttonUpload:"上传"},copyCode:{text:"复制代码",successTips:"已复制！",failTips:"复制失败！"},mermaid:{flow:"流程图",sequence:"时序图",gantt:"甘特图",class:"类图",state:"状态图",pie:"饼图",relationship:"关系图",journey:"旅程图"},katex:{inline:"行内公式",block:"块级公式"},footer:{markdownTotal:"字数",scrollAuto:"同步滚动"}},"en-US":{toolbarTips:{bold:"bold",underline:"underline",italic:"italic",strikeThrough:"strikeThrough",title:"title",sub:"subscript",sup:"superscript",quote:"quote",unorderedList:"unordered list",orderedList:"ordered list",task:"task list",codeRow:"inline code",code:"block-level code",link:"link",image:"image",table:"table",mermaid:"mermaid",katex:"formula",revoke:"revoke",next:"undo revoke",save:"save",prettier:"prettier",pageFullscreen:"fullscreen in page",fullscreen:"fullscreen",preview:"preview",previewOnly:"preview only",htmlPreview:"html preview",catalog:"catalog",github:"source code"},titleItem:{h1:"Lv1 Heading",h2:"Lv2 Heading",h3:"Lv3 Heading",h4:"Lv4 Heading",h5:"Lv5 Heading",h6:"Lv6 Heading"},imgTitleItem:{link:"Add Image Link",upload:"Upload Images",clip2upload:"Crop And Upload"},linkModalTips:{linkTitle:"Add Link",imageTitle:"Add Image",descLabel:"Desc:",descLabelPlaceHolder:"Enter a description...",urlLabel:"Link:",urlLabelPlaceHolder:"Enter a link...",buttonOK:"OK"},clipModalTips:{title:"Crop Image",buttonUpload:"Upload"},copyCode:{text:"Copy",successTips:"Copied!",failTips:"Copy failed!"},mermaid:{flow:"flow",sequence:"sequence",gantt:"gantt",class:"class",state:"state",pie:"pie",relationship:"relationship",journey:"journey"},katex:{inline:"inline",block:"block"},footer:{markdownTotal:"Character Count",scrollAuto:"Scroll Auto"}}},Ve={editorExtensions:{highlight:{js:`${He}/@highlightjs/cdn-assets@11.10.0/highlight.min.js`,css:Re},prettier:{standaloneJs:ze.main,parserMarkdownJs:ze.markdown},cropper:{css:`${He}/cropperjs@1.6.2/dist/cropper.min.css`,js:`${He}/cropperjs@1.6.2/dist/cropper.min.js`},screenfull:{js:`${He}/screenfull@5.2.0/dist/screenfull.js`},mermaid:{js:`${He}/mermaid@11.9.0/dist/mermaid.min.js`,enableZoom:!0},katex:{js:`${He}/katex@0.16.22/dist/katex.min.js`,css:`${He}/katex@0.16.22/dist/katex.min.css`}},editorExtensionsAttrs:{},editorConfig:{languageUserDefined:{},mermaidTemplate:{},renderDelay:500,zIndex:2e4},codeMirrorExtensions:(e,t)=>t,markdownItConfig:()=>{},markdownItPlugins:e=>e,mermaidConfig:e=>e,katexConfig:e=>e},qe=.1,We=({instance:e,ctx:t,props:o={}},n="default")=>{const l=(null==e?void 0:e.$slots[n])||(null==t?void 0:t.slots[n]);return(l?l(e):"")||o[n]},_e={overlay:{type:[String,Object],default:""},visible:{type:Boolean,default:!1},onChange:{type:Function,default:()=>{}},relative:{type:String,default:"html"},disabled:{type:Boolean,default:void 0}},Ue=s({name:`${Ee}-dropdown`,props:_e,setup(e,t){const o=`${Ee}-dropdown-hidden`,n=x({overlayClass:[o],overlayStyle:{},triggerHover:!1,overlayHover:!1}),l=C(),i=C(),a=()=>{var t,o;if(e.disabled)return!1;n.triggerHover=!0;const a=l.value,r=i.value;if(!a||!r)return;const s=a.getBoundingClientRect(),d=a.offsetTop,c=a.offsetLeft,u=s.height,m=s.width,p=a.getRootNode(),f=(null==(t=p.querySelector(e.relative))?void 0:t.scrollLeft)||0,g=(null==(o=p.querySelector(e.relative))?void 0:o.clientWidth)||0;let v=c-r.offsetWidth/2+m/2-f;v+r.offsetWidth>f+g&&(v=f+g-r.offsetWidth),v<0&&(v=0),n.overlayStyle={...n.overlayStyle,top:d+u+"px",left:v+"px"},e.onChange(!0)},r=()=>{if(e.disabled)return!1;n.overlayHover=!0};d(()=>e.visible,e=>{e?n.overlayClass=n.overlayClass.filter(e=>e!==o):n.overlayClass.push(o)});let s=-1;const f=t=>{l.value===t.target?n.triggerHover=!1:n.overlayHover=!1,clearTimeout(s),s=window.setTimeout(()=>{n.overlayHover||n.triggerHover||e.onChange(!1)},10)};return c(()=>{l.value.addEventListener("mouseenter",a),l.value.addEventListener("mouseleave",f),i.value.addEventListener("mouseenter",r),i.value.addEventListener("mouseleave",f)}),u(()=>{l.value.removeEventListener("mouseenter",a),l.value.removeEventListener("mouseleave",f),i.value.removeEventListener("mouseenter",r),i.value.removeEventListener("mouseleave",f)}),()=>{const o=We({ctx:t}),a=We({props:e,ctx:t},"overlay");return[m(o instanceof Array?o[0]:o,{ref:l,key:"cloned-dropdown-trigger"}),p("div",{class:[`${Ee}-dropdown`,n.overlayClass],style:n.overlayStyle,ref:i},[p("div",{class:`${Ee}-dropdown-overlay`},[a instanceof Array?a[0]:a])])]}}}),Ge=s({name:"DropdownToolbar",props:{title:{type:String,default:""},visible:{type:Boolean,default:void 0},trigger:{type:[String,Object],default:void 0},onChange:{type:Function,default:void 0},overlay:{type:[String,Object],default:void 0},insert:{type:Function,default:void 0},language:{type:String,default:void 0},theme:{type:String,default:void 0},previewTheme:{type:String,default:void 0},codeTheme:{type:String,default:void 0},disabled:{type:Boolean,default:void 0},showToolbarName:{type:Boolean,default:void 0}},emits:["onChange"],setup(e,t){const o=f("editorId");return()=>{const n=We({props:e,ctx:t},"trigger"),l=We({props:e,ctx:t},"overlay"),i=We({props:e,ctx:t});return p(Ue,{relative:`#${o}-toolbar-wrapper`,visible:e.visible,onChange:o=>{var n;null==(n=e.onChange)||n.call(e,o),t.emit("onChange",o)},overlay:l,disabled:e.disabled},{default:()=>[p("div",{class:[`${Ee}-toolbar-item`,e.disabled&&`${Ee}-disabled`],title:e.title||""},[i||n])]})}}});Ge.install=e=>(e.component(Ge.name,Ge),e);var Ke=Object.defineProperty;const Ze=new class{constructor(){var e,t,o;o={},(t="pools")in(e=this)?Ke(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o}remove(e,t,o){const n=this.pools[e]&&this.pools[e][t];n&&(this.pools[e][t]=n.filter(e=>e!==o))}clear(e){this.pools[e]={}}on(e,t){return this.pools[e]||(this.pools[e]={}),this.pools[e][t.name]||(this.pools[e][t.name]=[]),this.pools[e][t.name].push(t.callback),this.pools[e][t.name].includes(t.callback)}emit(e,t,...o){this.pools[e]||(this.pools[e]={});const n=this.pools[e][t];n&&n.forEach(e=>{try{e(...o)}catch(t){}})}},Je="onSave",Xe="changeCatalogVisible",Ye="changeFullscreen",Qe="pageFullscreenChanged",et="fullscreenChanged",tt="previewChanged",ot="previewOnlyChanged",nt="htmlPreviewChanged",lt="catalogVisibleChanged",it="buildFinished",at="errorCatcher",rt="replace",st="uploadImage",dt="openModals",ct="ctrlZ",ut="ctrlShiftZ",mt="catalogChanged",pt="pushCatalog",ft="rerender",gt="eventListener",vt="taskStateChanged",ht="sendEditorView",bt="getEditorView",yt={copy:`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy ${Ee}-icon"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg>`,"collapse-tips":`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-chevron-left ${Ee}-icon"><circle cx="12" cy="12" r="10"/><path d="m14 16-4-4 4-4"/></svg>`,pin:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-pin"><path d="M12 17v5"/><path d="M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z"/></svg>',"pin-off":'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-pin-off"><path d="M12 17v5"/><path d="M15 9.34V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H7.89"/><path d="m2 2 20 20"/><path d="M9 9v1.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h11"/></svg>'},kt=(e,t)=>"string"==typeof t[e]?t[e]:yt[e],$t=(e,t)=>{const o=o=>{const n=e.parentElement||document.body,l=n.offsetWidth,i=n.offsetHeight,{clientWidth:a,clientHeight:r}=document.documentElement,s=o.offsetX,d=o.offsetY,c=e=>{let o=e.x+document.body.scrollLeft-document.body.clientLeft-s,c=e.y+document.body.scrollTop-document.body.clientTop-d;o=o<1?1:o<a-l-1?o:a-l-1,c=c<1?1:c<r-i-1?c:r-i-1,t?t(o,c):(n.style.left=`${o}px`,n.style.top=`${c}px`)};document.addEventListener("mousemove",c);const u=()=>{document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",u)};document.addEventListener("mouseup",u)};return e.addEventListener("mousedown",o),()=>{e.removeEventListener("mousedown",o)}},wt=(e,t,o="")=>{var n;const l=document.getElementById(t.id);if(l)""!==o&&(Reflect.get(window,o)?null==(n=t.onload)||n.call(l,new Event("load")):t.onload&&l.addEventListener("load",t.onload));else{const o={...t};o.onload=null;const n=xt(e,o);t.onload&&n.addEventListener("load",t.onload),document.head.appendChild(n)}},xt=(e,t)=>{const o=document.createElement(e);return Object.keys(t).forEach(e=>{void 0!==t[e]&&(o[e]=t[e])}),o},Ct=(()=>(e,t)=>{const o=new Map;return null==e||e.forEach(e=>{let n=e.querySelector(`.${Ee}-mermaid-action`);n||(e.insertAdjacentHTML("beforeend",`<div class="${Ee}-mermaid-action">${kt("pin-off",t.customIcon)}</div>`),n=e.querySelector(`.${Ee}-mermaid-action`));const l=()=>{const l=o.get(e);if(null==l?void 0:l.removeEvent)l.removeEvent(),e.removeAttribute("data-grab"),o.set(e,{removeClick:l.removeClick}),n.innerHTML=kt("pin-off",t.customIcon);else{const i=(e=>{if(!e)return()=>{};const t=e.firstChild;let o,n,l,i=1,a=0,r=0,s=!1,d=1;const c=()=>{t.style.transform=`translate(${a}px, ${r}px) scale(${i})`},u=e=>{1===e.touches.length?(s=!0,o=e.touches[0].clientX-a,n=e.touches[0].clientY-r):2===e.touches.length&&(l=Math.hypot(e.touches[0].clientX-e.touches[1].clientX,e.touches[0].clientY-e.touches[1].clientY),d=i)},m=e=>{if(e.preventDefault(),s&&1===e.touches.length)a=e.touches[0].clientX-o,r=e.touches[0].clientY-n,c();else if(2===e.touches.length){const o=Math.hypot(e.touches[0].clientX-e.touches[1].clientX,e.touches[0].clientY-e.touches[1].clientY),n=i;i=d*(o/l-1+1);const s=(e.touches[0].clientX+e.touches[1].clientX)/2,u=(e.touches[0].clientY+e.touches[1].clientY)/2,m=t.getBoundingClientRect(),p=(s-m.left)/n,f=(u-m.top)/n;a-=p*(i-n),r-=f*(i-n),c()}},p=()=>{s=!1},f=e=>{e.preventDefault();const o=i;e.deltaY<0?i+=.02:i=Math.max(.1,i-.02);const n=t.getBoundingClientRect(),l=e.clientX-n.left,s=e.clientY-n.top;a-=l/o*(i-o),r-=s/o*(i-o),c()},g=e=>{s=!0,o=e.clientX-a,n=e.clientY-r},v=e=>{s&&(a=e.clientX-o,r=e.clientY-n,c())},h=()=>{s=!1},b=()=>{s=!1};return e.addEventListener("touchstart",u,{passive:!1}),e.addEventListener("touchmove",m,{passive:!1}),e.addEventListener("touchend",p),e.addEventListener("wheel",f,{passive:!1}),e.addEventListener("mousedown",g),e.addEventListener("mousemove",v),e.addEventListener("mouseup",h),e.addEventListener("mouseleave",b),()=>{e.removeEventListener("touchstart",u),e.removeEventListener("touchmove",m),e.removeEventListener("touchend",p),e.removeEventListener("wheel",f),e.removeEventListener("mousedown",g),e.removeEventListener("mousemove",v),e.removeEventListener("mouseup",h),e.removeEventListener("mouseleave",b)}})(e);e.setAttribute("data-grab",""),o.set(e,{removeEvent:i,removeClick:null==l?void 0:l.removeClick}),n.innerHTML=kt("pin",t.customIcon)}};n.addEventListener("click",l),o.set(e,{removeClick:()=>n.removeEventListener("click",l)})}),()=>{o.forEach(({removeEvent:e,removeClick:t})=>{null==e||e(),null==t||t()}),o.clear()}})(),St=(e,t="image.png")=>{const o=e.split(","),n=o[0].match(/:(.*?);/);if(n){const e=n[1],l=atob(o[1]);let i=l.length;const a=new Uint8Array(i);for(;i--;)a[i]=l.charCodeAt(i);return new File([a],t,{type:e})}return null},jt=(()=>{let e=0;return()=>++e})(),Tt={hljs:`${Ee}-hljs`,hlcss:`${Ee}-hlCss`,prettier:`${Ee}-prettier`,prettierMD:`${Ee}-prettierMD`,cropperjs:`${Ee}-cropper`,croppercss:`${Ee}-cropperCss`,screenfull:`${Ee}-screenfull`,mermaidM:`${Ee}-mermaid-m`,mermaid:`${Ee}-mermaid`,katexjs:`${Ee}-katex`,katexcss:`${Ee}-katexCss`},It=new L({max:1e3,ttl:6e5}),Ft=(e,t)=>{const o=e.renderer.rules.fence.bind(e.renderer.rules);e.renderer.rules.fence=(n,l,i,a,r)=>{const s=n[l],d=s.content.trim();if("mermaid"===s.info){let o;n[l].map&&0===n[l].level&&(o=n[l].map[0],n[l].attrSet("data-line",String(o)));const i=It.get(d);return i?`<p class="${Ee}-mermaid" ${void 0!==o?"data-line="+o:""} data-processed>${i}</p>`:`<div class="${Ee}-mermaid" ${void 0!==o?"data-line="+o:""} data-mermaid-theme=${t.themeRef.value}">${e.utils.escapeHtml(d)}</div>`}return o(n,l,i,a,r)}},Bt=(e,t)=>{const o=e.attrs?e.attrs.slice():[];return t.forEach(t=>{const n=e.attrIndex(t[0]);n<0?o.push(t):(o[n]=o[n].slice(),o[n][1]+=` ${t[1]}`)}),o},At={block:[{open:"$$",close:"$$"},{open:"\\[",close:"\\]"}],inline:[{open:"$$",close:"$$"},{open:"$",close:"$"},{open:"\\[",close:"\\]"},{open:"\\(",close:"\\)"}]},Mt=(e,{katexRef:t,inlineDelimiters:o,blockDelimiters:n})=>{var l;e.inline.ruler.before("escape","math_inline",(l={delimiters:o||At.inline},(e,t)=>{const o=l.delimiters;let n,i,a;for(const l of o)if(e.src.startsWith(l.open,e.pos)){const o=e.pos+l.open.length;for(n=o;-1!==(n=e.src.indexOf(l.close,n));){for(a=n-1;"\\"===e.src[a];)a-=1;if((n-a)%2==1)break;n+=l.close.length}if(-1===n)return t||(e.pending+=l.open),e.pos=o,!0;if(n-o===0)return t||(e.pending+=l.open+l.close),e.pos=o+l.close.length,!0;if(!t){const t=e.src.slice(o,n);i=e.push("math_inline","math",0),i.markup=l.open,i.content=t}return e.pos=n+l.close.length,!0}return!1})),e.block.ruler.after("blockquote","math_block",(e=>(t,o,n,l)=>{const i=e.delimiters;let a,r,s,d,c=!1,u=t.bMarks[o]+t.tShift[o],m=t.eMarks[o];for(const e of i)if(t.src.slice(u,u+e.open.length)===e.open&&t.src.slice(m-e.close.length,m)===e.close){if(u+=e.open.length,a=t.src.slice(u,m),l)return!0;for(a.trim().slice(-e.close.length)===e.close&&(a=a.trim().slice(0,-e.close.length),c=!0),s=o;!(c||(s++,s>=n)||(u=t.bMarks[s]+t.tShift[s],m=t.eMarks[s],u<m&&t.tShift[s]<t.blkIndent));)t.src.slice(u,m).trim().slice(-e.close.length)===e.close&&(d=t.src.slice(0,m).lastIndexOf(e.close),r=t.src.slice(u,d),c=!0);t.line=s+1;const i=t.push("math_block","math",0);return i.block=!0,i.content=(a&&a.trim()?a+"\n":"")+t.getLines(o+1,s,t.tShift[o],!0)+(r&&r.trim()?r:""),i.map=[o,t.line],i.markup=e.open,!0}return!1})({delimiters:n||At.block}),{alt:["paragraph","reference","blockquote","list"]}),e.renderer.rules.math_inline=(e,o,n,l,i)=>{const a=e[o],r={attrs:Bt(a,[["class",`${Ee}-katex-inline`]])};if(t.value){const e=t.value.renderToString(a.content,Ve.katexConfig({throwOnError:!1}));return`<span ${i.renderAttrs(r)} data-processed>${e}</span>`}return`<span ${i.renderAttrs(r)}>${a.content}</span>`},e.renderer.rules.math_block=(e,o,n,l,i)=>{const a=e[o],r={attrs:Bt(a,[["class",`${Ee}-katex-block`]])};if(t.value){const e=t.value.renderToString(a.content,Ve.katexConfig({throwOnError:!1,displayMode:!0}));return`<p ${i.renderAttrs(r)} data-processed>${e}</p>`}return`<p ${i.renderAttrs(r)}>${a.content}</p>`}},Lt=(e,t)=>{const o=(t=t||{}).marker||"!",n=o.charCodeAt(0),l=o.length;let i="",a="";const r=(e,t,o,n,l)=>{const i=e[t];return"admonition_open"===i.type?e[t].attrPush(["class",`${Ee}-admonition ${Ee}-admonition-${i.info}`]):"admonition_title_open"===i.type&&e[t].attrPush(["class",`${Ee}-admonition-title`]),l.renderToken(e,t,o)};e.block.ruler.before("code","admonition",(e,t,r,s)=>{let d,c,u,m=!1,p=e.bMarks[t]+e.tShift[t],f=e.eMarks[t];if(n!==e.src.charCodeAt(p))return!1;for(d=p+1;d<=f&&o[(d-p)%l]===e.src[d];d++);const g=Math.floor((d-p)/l);if(3!==g)return!1;d-=(d-p)%l;const v=e.src.slice(p,d);if((e=>{const t=e.trim().split(" ",2);a="",i=t[0],t.length>1&&(a=e.substring(i.length+2))})(e.src.slice(d,f)),s)return!0;for(c=t;c++,!(c>=r||(p=e.bMarks[c]+e.tShift[c],f=e.eMarks[c],p<f&&e.sCount[c]<e.blkIndent));)if(n===e.src.charCodeAt(p)&&!(e.sCount[c]-e.blkIndent>=4)){for(d=p+1;d<=f&&o[(d-p)%l]===e.src[d];d++);if(!(Math.floor((d-p)/l)<g||(d-=(d-p)%l,d=e.skipSpaces(d),d<f))){m=!0;break}}const h=e.parentType,b=e.lineMax;return e.parentType="root",e.lineMax=c,u=e.push("admonition_open","div",1),u.markup=v,u.block=!0,u.info=i,u.map=[t,c],a&&(u=e.push("admonition_title_open","p",1),u.markup=v+" "+i,u.map=[t,c],u=e.push("inline","",0),u.content=a,u.map=[t,e.line-1],u.children=[],u=e.push("admonition_title_close","p",-1),u.markup=v+" "+i),e.md.block.tokenize(e,t+1,c),u=e.push("admonition_close","div",-1),u.markup=e.src.slice(p,d),u.block=!0,e.parentType=h,e.lineMax=b,e.line=c+(m?1:0),!0},{alt:["paragraph","reference","blockquote","list"]}),e.renderer.rules.admonition_open=r,e.renderer.rules.admonition_title_open=r,e.renderer.rules.admonition_title_close=r,e.renderer.rules.admonition_close=r},Ot=(e,t)=>{e.renderer.rules.heading_open=(o,n)=>{var l;const i=o[n],a=(null==(l=o[n+1].children)?void 0:l.reduce((e,t)=>e+(["text","code_inline","math_inline"].includes(t.type)&&t.content||""),""))||"",r=i.markup.length;return t.headsRef.value.push({text:a,level:r,line:i.map[0]}),i.map&&0===i.level&&i.attrSet("id",t.mdHeadingId(a,r,t.headsRef.value.length)),e.renderer.renderToken(o,n,t)},e.renderer.rules.heading_close=(e,t,o,n,l)=>l.renderToken(e,t,o)},Et=(e,t)=>{const o=e.renderer.rules.fence,n=e.utils.unescapeAll,l=/\[(\w*)(?::([\w ]*))?\]/,i=/::(open|close)/,a=e=>e.info?n(e.info).trim():"",r=e=>{const t=a(e),[o=null,n=""]=(l.exec(t)||[]).slice(1);return[o,n]},s=e=>{const t=a(e);return t?t.split(/(\s+)/g)[0]:""},d=e=>{const o=e.info.match(i)||[];return{open:"open"===o[1]||"close"!==o[1]&&t.codeFoldable&&e.content.trim().split("\n").length<t.autoFoldThreshold,tagContainer:o[1]||t.codeFoldable?"details":"div",tagHeader:o[1]||t.codeFoldable?"summary":"div"}},c=(e,n,a,c,u)=>{var m;if(e[n].hidden)return"";const p=null==(m=t.usedLanguageTextRef.value)?void 0:m.copyCode.text,f=t.customIconRef.value.copy||p,g=!!t.customIconRef.value.copy,v=`<span class="${Ee}-collapse-tips">${kt("collapse-tips",t.customIconRef.value)}</span>`,[h]=r(e[n]);if(null===h){const{open:l,tagContainer:r,tagHeader:s}=d(e[n]),m=[["class",`${Ee}-code`]];l&&m.push(["open",""]);const h={attrs:Bt(e[n],m)};e[n].info=e[n].info.replace(i,"");const b=o(e,n,a,c,u);return`\n        <${r} ${u.renderAttrs(h)}>\n          <${s} class="${Ee}-code-head">\n            <div class="${Ee}-code-flag"><span></span><span></span><span></span></div>\n            <div class="${Ee}-code-action">\n              <span class="${Ee}-code-lang">${e[n].info.trim()}</span>\n              <span class="${Ee}-copy-button" data-tips="${p}"${g?" data-is-icon=true":""}>${f}</span>\n              ${t.extraTools instanceof Function?t.extraTools({lang:e[n].info.trim()}):t.extraTools||""}\n              ${"details"===r?v:""}\n            </div>\n          </${s}>\n          ${b}\n        </${r}>\n      `}let b,y,k,$,w="",x="",C="";const{open:S,tagContainer:j,tagHeader:T}=d(e[n]),I=[["class",`${Ee}-code`]];S&&I.push(["open",""]);const F={attrs:Bt(e[n],I)};for(let d=n;d<e.length&&(b=e[d],[y,k]=r(b),y===h);d++){b.info=b.info.replace(l,"").replace(i,""),b.hidden=!0;const r=`${Ee}-codetab-${t.editorId}-${n}-${d-n}`;$=d-n>0?"":"checked",w+=`\n        <li>\n          <input\n            type="radio"\n            id="label-${Ee}-codetab-label-1-${t.editorId}-${n}-${d-n}"\n            name="${Ee}-codetab-label-${t.editorId}-${n}"\n            class="${r}"\n            ${$}\n          >\n          <label\n            for="label-${Ee}-codetab-label-1-${t.editorId}-${n}-${d-n}"\n            onclick="this.getRootNode().querySelectorAll('.${r}').forEach(e => e.click())"\n          >\n            ${k||s(b)}\n          </label>\n        </li>`,x+=`\n        <div role="tabpanel">\n          <input\n            type="radio"\n            name="${Ee}-codetab-pre-${t.editorId}-${n}"\n            class="${r}"\n            ${$}\n            role="presentation">\n          ${o(e,d,a,c,u)}\n        </div>`,C+=`\n        <input\n          type="radio"\n          name="${Ee}-codetab-lang-${t.editorId}-${n}"\n          class="${r}"\n          ${$}\n          role="presentation">\n        <span class=${Ee}-code-lang role="note">${s(b)}</span>`}return`\n      <${j} ${u.renderAttrs(F)}>\n        <${T} class="${Ee}-code-head">\n          <div class="${Ee}-code-flag">\n            <ul class="${Ee}-codetab-label" role="tablist">${w}</ul>\n          </div>\n          <div class="${Ee}-code-action">\n            <span class="${Ee}-codetab-lang">${C}</span>\n            <span class="${Ee}-copy-button" data-tips="${p}"${g?" data-is-icon=true":""}>${f}</span>\n            ${t.extraTools instanceof Function?t.extraTools({lang:e[n].info.trim()}):t.extraTools||""}\n            ${"details"===j?v:""}\n          </div>\n        </${T}>\n        ${x}\n      </${j}>\n    `};e.renderer.rules.fence=c,e.renderer.rules.code_block=c},Ht=(e,t,o)=>{const n=e.attrIndex(t),l=[t,o];n<0?e.attrPush(l):(e.attrs=e.attrs||[],e.attrs[n]=l)},zt=(e,t)=>"inline"===e[t].type&&"paragraph_open"===e[t-1].type&&"list_item_open"===e[t-2].type&&(e=>0===e.content.indexOf("[ ] ")||0===e.content.indexOf("[x] ")||0===e.content.indexOf("[X] "))(e[t]),Rt=(e,t)=>{const o=e[t].level-1;for(let n=t-1;n>=0;n--)if(e[n].level===o)return n;return-1},Dt=(e,t,o)=>{if(e.children=e.children||[],e.children.unshift(((e,t,o)=>{const n=new t("html_inline","",0),l=o.enabled?" ":' disabled="" ';return 0===e.content.indexOf("[ ] ")?n.content='<input class="task-list-item-checkbox"'+l+'type="checkbox">':0!==e.content.indexOf("[x] ")&&0!==e.content.indexOf("[X] ")||(n.content='<input class="task-list-item-checkbox" checked=""'+l+'type="checkbox">'),n})(e,t,o)),e.children[1].content=e.children[1].content.slice(3),e.content=e.content.slice(3),o.label)if(o.labelAfter){e.children.pop();const o="task-item-"+Math.ceil(1e7*Math.random()-1e3);e.children[0].content=e.children[0].content.slice(0,-1)+' id="'+o+'">',e.children.push(((e,t,o)=>{const n=new o("html_inline","",0);return n.content='<label class="task-list-item-label" for="'+t+'">'+e+"</label>",n.attrs=[{for:t}],n})(e.content,o,t))}else e.children.unshift((e=>{const t=new e("html_inline","",0);return t.content="<label>",t})(t)),e.children.push((e=>{const t=new e("html_inline","",0);return t.content="</label>",t})(t))},Nt=(e,t={})=>{e.core.ruler.after("inline","github-task-lists",e=>{const o=e.tokens;for(let n=2;n<o.length;n++)zt(o,n)&&(Dt(o[n],e.Token,t),Ht(o[n-2],"class","task-list-item"+(t.enabled?" enabled":" ")),Ht(o[Rt(o,n-2)],"class","contains-task-list"))})},Pt={checked:{regexp:/- \[x\]/,value:"- [ ]"},unChecked:{regexp:/- \[\s\]/,value:"- [x]"}},Vt={modelValue:{type:String,default:""},onChange:{type:Function,default:()=>{}},setting:{type:Object,default:()=>({preview:!0})},onHtmlChanged:{type:Function,default:()=>{}},onGetCatalog:{type:Function,default:()=>{}},mdHeadingId:{type:Function,default:()=>""},noMermaid:{type:Boolean,default:!1},sanitize:{type:Function,default:e=>e},noKatex:{type:Boolean,default:!1},formatCopiedText:{type:Function,default:e=>e},noHighlight:{type:Boolean,default:!1},previewOnly:{type:Boolean,default:!1},noImgZoomIn:{type:Boolean},sanitizeMermaid:{type:Function},codeFoldable:{type:Boolean},autoFoldThreshold:{type:Number},onRemount:{type:Function}},qt={...Vt,updateModelValue:{type:Function,default:()=>{}},placeholder:{type:String,default:""},scrollAuto:{type:Boolean},autofocus:{type:Boolean},disabled:{type:Boolean},readonly:{type:Boolean},maxlength:{type:Number},autoDetectCode:{type:Boolean},onBlur:{type:Function,default:()=>{}},onFocus:{type:Function,default:()=>{}},noPrettier:{type:Boolean},completions:{type:Array},catalogVisible:{type:Boolean},theme:{type:String,default:"light"},onInput:{type:Function},onDrop:{type:Function,default:()=>{}},inputBoxWidth:{type:String},oninputBoxWidthChange:{type:Function},transformImgUrl:{type:Function,default:e=>e},catalogLayout:{type:String},catalogMaxDepth:{type:Number}},Wt=s({name:"UpdateOnDemand",props:{html:{type:String,required:!0}},setup(e){const t=f("editorId"),o=f("previewTheme"),n=f("showCodeRowNumber"),l=C(),i=e.html;return d(()=>e.html,e=>{var t;const o=(e=>{const t=(new DOMParser).parseFromString(e,"text/html");return Array.from(t.body.childNodes)})(e),n=Array.from((null==(t=l.value)?void 0:t.childNodes)||[]),{updates:i,deletes:a}=((e,t)=>{const o=[],n=[];if(e.forEach((e,n)=>{const l=t[n];l?(e.nodeType!==l.nodeType||e.textContent!==l.textContent||1===e.nodeType&&e.outerHTML!==l.outerHTML)&&o.push({index:n,newNode:e}):o.push({index:n,newNode:e})}),t.length>e.length)for(let l=e.length;l<t.length;l++)n.push(t[l]);return{updates:o,deletes:n}})(o,n);((e,t)=>{l.value&&(t.forEach(e=>{e.remove()}),e.forEach(({index:e,newNode:t})=>{var o,n,i;const a=null==(o=l.value)?void 0:o.childNodes[e];a?null==(i=l.value)||i.replaceChild(t.cloneNode(!0),a):null==(n=l.value)||n.appendChild(t.cloneNode(!0))}))})(i,a)}),()=>p("div",{id:`${t}-preview`,class:[`${Ee}-preview`,`${null==o?void 0:o.value}-theme`,n&&`${Ee}-scrn`],innerHTML:i,ref:l},null)}}),_t=s({name:"ContentPreview",props:Vt,setup(e){const t=f("editorId"),{html:l,key:i}=((e,t)=>{const{editorConfig:n,markdownItPlugins:l,editorExtensions:i}=Ve,a=f("editorId"),r=f("language"),s=f("usedLanguageText"),m=f("showCodeRowNumber"),p=f("theme"),g=f("customIcon"),h=f("rootRef"),b=C([]);let k=()=>{};const $=(e=>{const t=f("highlight"),o=j(Ve.editorExtensions.highlight.instance);return c(()=>{e.noHighlight||o.value||(wt("link",{...t.value.css,rel:"stylesheet",id:Tt.hlcss}),wt("script",{...t.value.js,id:Tt.hljs,onload(){o.value=window.hljs}},"hljs"))}),d(()=>t.value.css,()=>{e.noHighlight||Ve.editorExtensions.highlight.instance||((e,t)=>{const o=document.getElementById(t.id);null==o||o.remove(),wt("link",t)})(0,{...t.value.css,rel:"stylesheet",id:Tt.hlcss})}),o})(e),w=(e=>{const t=j(Ve.editorExtensions.katex.instance);return c(()=>{var o,n;if(e.noKatex||t.value)return;const{editorExtensions:l,editorExtensionsAttrs:i}=Ve;wt("script",{...null==(o=i.katex)?void 0:o.js,src:l.katex.js,id:Tt.katexjs,onload(){t.value=window.katex}},"katex"),wt("link",{...null==(n=i.katex)?void 0:n.css,rel:"stylesheet",href:l.katex.css,id:Tt.katexcss})}),t})(e),{reRenderRef:x,replaceMermaid:T}=(e=>{const t=f("editorId"),n=f("theme"),l=f("rootRef"),{editorExtensions:i,editorExtensionsAttrs:a,mermaidConfig:r}=Ve;let s=i.mermaid.instance;const u=j(-1),m=()=>{!e.noMermaid&&s&&(s.initialize(r({startOnLoad:!1,theme:"dark"===n.value?"dark":"default"})),u.value=u.value+1)};return d(()=>n.value,()=>{It.clear(),m()}),c(()=>{var t,o;if(e.noMermaid||s)return;const n=i.mermaid.js;/\.mjs/.test(n)?(wt("link",{...null==(t=a.mermaid)?void 0:t.js,rel:"modulepreload",href:n,id:Tt.mermaidM}),import(n).then(e=>{s=e.default,m()})):wt("script",{...null==(o=a.mermaid)?void 0:o.js,src:n,id:Tt.mermaid,onload(){s=window.mermaid,m()}},"mermaid")}),{reRenderRef:u,replaceMermaid:async()=>{if(!e.noMermaid&&s){const n=l.value.querySelectorAll(`div.${Ee}-mermaid`),i=document.createElement("div"),a=document.body.offsetWidth>1366?document.body.offsetWidth:1366,r=document.body.offsetHeight>768?document.body.offsetHeight:768;i.style.width=a+"px",i.style.height=r+"px",i.style.position="fixed",i.style.zIndex="-10000",i.style.top="-10000";let d=n.length;d>0&&document.body.appendChild(i),await Promise.allSettled(Array.from(n).map(n=>(async n=>{var l;const a=n.innerText;let r=It.get(a);if(!r){const u=o();let m={svg:""};try{m=await s.render(u,a,i),r=await e.sanitizeMermaid(m.svg);const t=document.createElement("p");t.className=`${Ee}-mermaid`,t.setAttribute("data-processed",""),t.innerHTML=r,null==(l=t.children[0])||l.removeAttribute("height"),It.set(a,t.innerHTML),void 0!==n.dataset.line&&(t.dataset.line=n.dataset.line),n.replaceWith(t)}catch(c){Ze.emit(t,at,{name:"mermaid",message:c.message,error:c})}0===--d&&i.remove()}})(n)))}}}})(e),I=F({html:!0,breaks:!0,linkify:!0}),L=[{type:"image",plugin:B,options:{figcaption:!0,classes:"md-zoom"}},{type:"admonition",plugin:Lt,options:{}},{type:"taskList",plugin:Nt,options:{}},{type:"heading",plugin:Ot,options:{mdHeadingId:e.mdHeadingId,headsRef:b}},{type:"code",plugin:Et,options:{editorId:a,usedLanguageTextRef:s,codeFoldable:e.codeFoldable,autoFoldThreshold:e.autoFoldThreshold,customIconRef:g}},{type:"sub",plugin:A,options:{}},{type:"sup",plugin:M,options:{}}];e.noKatex||L.push({type:"katex",plugin:Mt,options:{katexRef:w}}),e.noMermaid||L.push({type:"mermaid",plugin:Ft,options:{themeRef:p}}),l(L,{editorId:a}).forEach(e=>{I.use(e.plugin,e.options)});const O=I.options.highlight;I.set({highlight:(t,o,n)=>{if(O){const e=O(t,o,n);if(e)return e}let l;return l=!e.noHighlight&&$.value?$.value.getLanguage(o)?$.value.highlight(t,{language:o,ignoreIllegals:!0}).value:$.value.highlightAuto(t).value:I.utils.escapeHtml(t),`<pre><code class="language-${o}" language=${o}>${m?((e,t)=>{if(!e)return e;const o=t.split("\n"),n=['<span rn-wrapper aria-hidden="true">'];return o.forEach(()=>{n.push("<span></span>")}),n.push("</span>"),`<span class="${Ee}-code-block">${e}</span>${n.join("")}`})(l.replace(/^\n+|\n+$/g,""),t.replace(/^\n+|\n+$/g,"")):`<span class="${Ee}-code-block">${l.replace(/^\n+|\n+$/g,"")}</span>`}</code></pre>`}}),(e=>{e.core.ruler.push("init-line-number",e=>(e.tokens.forEach(e=>{e.map&&(e.attrs||(e.attrs=[]),e.attrs.push(["data-line",e.map[0].toString()]))}),!0))})(I);const E=C(`_article-key_${o()}`),H=C(e.sanitize(I.render(e.modelValue))),z=()=>{Ze.emit(a,it,H.value),e.onHtmlChanged(H.value),e.onGetCatalog(b.value),Ze.emit(a,mt,b.value),y(()=>{T().then(()=>{var e,t;(null==(e=i.mermaid)?void 0:e.enableZoom)&&(k(),k=Ct(null==(t=h.value)?void 0:t.querySelectorAll(`#${a} p.${Ee}-mermaid`),{customIcon:g.value}))})})},R=()=>{b.value=[],H.value=e.sanitize(I.render(e.modelValue)),z()},D=v(()=>(e.noKatex||w.value)&&(e.noHighlight||$.value));let N=-1;return d([S(e,"modelValue"),D,x,r],()=>{N=window.setTimeout(()=>{R()},t?0:n.renderDelay)}),d(()=>e.setting.preview,()=>{e.setting.preview&&y(()=>{T().then(()=>{var e,t;(null==(e=i.mermaid)?void 0:e.enableZoom)&&(k(),k=Ct(null==(t=h.value)?void 0:t.querySelectorAll(`#${a} p.${Ee}-mermaid`),{customIcon:g.value}))}),Ze.emit(a,mt,b.value)})}),c(z),c(()=>{Ze.on(a,{name:pt,callback(){Ze.emit(a,mt,b.value)}}),Ze.on(a,{name:ft,callback:()=>{E.value=`_article-key_${o()}`,R()}})}),u(()=>{k(),clearTimeout(N)}),{html:H,key:E}})(e,e.previewOnly);return((e,t,o)=>{const n=f("editorId"),l=f("rootRef"),i=f("usedLanguageText"),a=()=>{l.value.querySelectorAll(`#${n} .${Ee}-preview .${Ee}-code`).forEach(t=>{let o=-1;const n=t.querySelector(`.${Ee}-copy-button`);n&&(n.onclick=l=>{l.preventDefault(),clearTimeout(o);const a=(t.querySelector("input:checked + pre code")||t.querySelector("pre code")).textContent,{text:r,successTips:s,failTips:d}=i.value.copyCode;let c=s;I(e.formatCopiedText(a)).catch(()=>{c=d}).finally(()=>{n.dataset.isIcon?n.dataset.tips=c:n.innerHTML=c,o=window.setTimeout(()=>{n.dataset.isIcon?n.dataset.tips=r:n.innerHTML=r},1500)})})})},r=e=>{e&&y(a)};d([t,o],()=>{y(a)}),d(()=>e.setting.preview,r),d(()=>e.setting.htmlPreview,r),c(a)})(e,l,i),((e,t)=>{const o=f("editorId"),{noImgZoomIn:l}=e,i=n(()=>{const e=document.querySelectorAll(`#${o}-preview img:not(.not-zoom):not(.medium-zoom-image)`);0!==e.length&&T(e,{background:"#00000073"})});c(()=>{!l&&e.setting.preview&&i()}),d([t,S(e.setting,"preview")],()=>{!l&&e.setting.preview&&i()})})(e,l),((e,t)=>{const o=f("editorId"),n=f("rootRef");let l=()=>{};const i=()=>{if(!n.value)return!1;const t=n.value.querySelectorAll(".task-list-item.enabled"),i=t=>{var n;t.preventDefault();const l=t.target.checked?"unChecked":"checked",i=null==(n=t.target.parentElement)?void 0:n.dataset.line;if(!i)return;const a=Number(i),r=e.modelValue.split("\n"),s=r[Number(a)].replace(Pt[l].regexp,Pt[l].value);e.previewOnly?(r[Number(a)]=s,e.onChange(r.join("\n"))):Ze.emit(o,vt,a+1,s)};t.forEach(e=>{e.addEventListener("click",i)}),l=()=>{t.forEach(e=>{e.removeEventListener("click",i)})}};u(()=>{l()}),d([t],()=>{l(),y(i)},{immediate:!0})})(e,l),((e,t,o)=>{const n=()=>{y(()=>{var t;null==(t=e.onRemount)||t.call(e)})},l=e=>{e&&n()};d([t,o],n),d(()=>e.setting.preview,l),d(()=>e.setting.htmlPreview,l),c(n)})(e,l,i),()=>p(h,null,[e.setting.preview&&p("div",{id:`${t}-preview-wrapper`,class:`${Ee}-preview-wrapper`,key:"content-preview-wrapper"},[p(Wt,{key:i.value,html:l.value},null)]),!e.previewOnly&&e.setting.htmlPreview&&p("div",{id:`${t}-html-wrapper`,class:`${Ee}-preview-wrapper`,key:"html-preview-wrapper"},[p("div",{class:`${Ee}-html`},[l.value])])])}}),Ut=(o,n)=>{const l=Ve.editorExtensions.highlight,i=Ve.editorExtensionsAttrs.highlight,a=Gt(o);g("editorId",a),g("rootRef",n),g("theme",v(()=>o.theme)),g("language",v(()=>o.language)),g("highlight",v(()=>{const{js:e}=l,t={...Re,...l.css},{js:n,css:a={}}=i||{},r=o.codeStyleReverse&&o.codeStyleReverseList.includes(o.previewTheme)?"dark":o.theme;return{js:{src:e,...n},css:{href:t[o.codeTheme]?t[o.codeTheme][r]:Re.atom[r],...t[o.codeTheme]&&a[o.codeTheme]?a[o.codeTheme][r]:a.atom?a.atom[r]:{}}}})),g("showCodeRowNumber",o.showCodeRowNumber);const r=v(()=>{const n={...Pe,...Ve.editorConfig.languageUserDefined};return e(t(Pe["en-US"]),n[o.language]||{})});return g("usedLanguageText",r),g("previewTheme",v(()=>o.previewTheme)),g("customIcon",v(()=>o.customIcon)),{editorId:a}},Gt=e=>{const t=b();return e.id||e.editorId||`${Ee}-${t}`},Kt={modelValue:{type:String,default:""},onChange:{type:Function,default:void 0},theme:{type:String,default:"light"},class:{type:String,default:""},language:{type:String,default:"zh-CN"},onHtmlChanged:{type:Function,default:void 0},onGetCatalog:{type:Function,default:void 0},editorId:{type:String,default:void 0},id:{type:String,default:void 0},showCodeRowNumber:{type:Boolean,default:!0},previewTheme:{type:String,default:"default"},style:{type:Object,default:()=>({})},mdHeadingId:{type:Function,default:e=>e},sanitize:{type:Function,default:e=>e},noMermaid:{type:Boolean,default:!1},noKatex:{type:Boolean,default:!1},codeTheme:{type:String,default:"atom"},formatCopiedText:{type:Function,default:e=>e},codeStyleReverse:{type:Boolean,default:!0},codeStyleReverseList:{type:Array,default:["default","mk-cute"]},noHighlight:{type:Boolean,default:!1},noImgZoomIn:{type:Boolean,default:!1},customIcon:{type:Object,default:{}},sanitizeMermaid:{type:Function,default:e=>Promise.resolve(e)},codeFoldable:{type:Boolean,default:!0},autoFoldThreshold:{type:Number,default:30},onRemount:{type:Function,default:void 0}},Zt={...Kt,onSave:{type:Function,default:void 0},onUploadImg:{type:Function,default:void 0},pageFullscreen:{type:Boolean,default:!1},preview:{type:Boolean,default:!0},htmlPreview:{type:Boolean,default:!1},toolbars:{type:Array,default:De},toolbarsExclude:{type:Array,default:[]},noPrettier:{type:Boolean,default:!1},tabWidth:{type:Number,default:2},tableShape:{type:Array,default:[6,4]},placeholder:{type:String,default:""},defToolbars:{type:[String,Object],default:void 0},onError:{type:Function,default:void 0},footers:{type:Array,default:Ne},scrollAuto:{type:Boolean,default:!0},defFooters:{type:[String,Object],default:void 0},noUploadImg:{type:Boolean,default:!1},autoFocus:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},readOnly:{type:Boolean,default:!1},maxLength:{type:Number,default:void 0},autoDetectCode:{type:Boolean,default:!1},onBlur:{type:Function,default:void 0},onFocus:{type:Function,default:void 0},completions:{type:Array,default:void 0},showToolbarName:{type:Boolean,default:!1},onInput:{type:Function,default:void 0},onDrop:{type:Function,default:void 0},inputBoxWidth:{type:String,default:"50%"},oninputBoxWidthChange:{type:Function,default:void 0},transformImgUrl:{type:Function,default:e=>e},catalogLayout:{type:String,default:"fixed"},catalogMaxDepth:{type:Number,default:void 0},insertLinkDirect:{type:Boolean,default:!1}},Jt=["onHtmlChanged","onGetCatalog","onChange","onRemount","update:modelValue"],Xt=[...Jt,"onSave","onUploadImg","onError","onBlur","onFocus","onInput","onDrop","oninputBoxWidthChange"],Yt=s({name:"MdPreview",props:Kt,emits:Jt,setup(e,t){const{noKatex:o,noMermaid:n,noHighlight:l}=e,i=C(),{editorId:a}=Ut(e,i);return((e,t,o)=>{const{editorId:n}=o,l={rerender(){Ze.emit(n,ft)}};t.expose(l)})(0,t,{editorId:a}),u(()=>{Ze.clear(a)}),()=>p("div",{id:a,class:[Ee,e.class,"dark"===e.theme&&`${Ee}-dark`,`${Ee}-previewOnly`],style:e.style,ref:i},[p(_t,{modelValue:e.modelValue,onChange:o=>{var n;null==(n=e.onChange)||n.call(e,o),t.emit("onChange",o),t.emit("update:modelValue",o)},onHtmlChanged:o=>{var n;null==(n=e.onHtmlChanged)||n.call(e,o),t.emit("onHtmlChanged",o)},onGetCatalog:o=>{var n;null==(n=e.onGetCatalog)||n.call(e,o),t.emit("onGetCatalog",o)},mdHeadingId:e.mdHeadingId,noMermaid:n,sanitize:e.sanitize,noKatex:o,formatCopiedText:e.formatCopiedText,noHighlight:l,noImgZoomIn:e.noImgZoomIn,previewOnly:!0,sanitizeMermaid:e.sanitizeMermaid,codeFoldable:e.codeFoldable,autoFoldThreshold:e.autoFoldThreshold,onRemount:()=>{var o;null==(o=e.onRemount)||o.call(e),t.emit("onRemount")}},null)])}});Yt.install=e=>(e.component(Yt.name,Yt),e);const Qt={bold:ue,underline:ce,italic:de,"strike-through":se,title:re,sub:ae,sup:ie,quote:le,"unordered-list":ne,"ordered-list":oe,task:te,"code-row":ee,code:G,link:Q,image:Y,table:X,revoke:J,next:Z,save:K,prettier:G,minimize:U,maximize:_,"fullscreen-exit":W,fullscreen:q,"preview-only":V,preview:P,"preview-html":N,catalog:D,github:()=>p("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-github-icon"},[p("path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"},null),p("path",{d:"M9 18c-4.51 2-5-2-7-2"},null)]),mermaid:R,formula:z,close:H,delete:E,upload:O},eo=s({name:`${Ee}-icon-set`,props:{name:{type:String,default:""}},setup:e=>()=>k(Qt[e.name],{class:`${Ee}-icon`})}),to=s({name:`${Ee}-icon`,props:{name:{type:String,default:""}},setup(e){const t=f("customIcon");return()=>{const o=t.value[e.name];return"object"==typeof o?"object"==typeof o.component?k(o.component,o.props):p("span",{innerHTML:o.component},null):p(eo,{name:e.name},null)}}}),oo=s({name:"MdModal",props:{title:{type:[String,Object],default:""},visible:{type:Boolean,default:!1},width:{type:String,default:"auto"},height:{type:String,default:"auto"},onClose:{type:Function},showAdjust:{type:Boolean,default:!1},isFullscreen:{type:Boolean,default:!1},onAdjust:{type:Function,default:()=>{}},class:{type:String,default:void 0},style:{type:[Object,String],default:()=>({})},showMask:{type:Boolean,default:!0}},emits:["onClose"],setup(e,t){const o=f("theme"),n=f("rootRef"),l=C(e.visible),i=C([`${Ee}-modal`]),a=C(),r=C(),s=C(),u=j();let m=()=>{};const g=x({maskStyle:{zIndex:-1},modalStyle:{zIndex:-1},initPos:{left:"0px",top:"0px"},historyPos:{left:"0px",top:"0px"}}),h=v(()=>e.isFullscreen?{width:"100%",height:"100%"}:{width:e.width,height:e.height});d(()=>e.isFullscreen,e=>{e?m():y(()=>{m=$t(r.value,(e,t)=>{g.initPos.left=e+"px",g.initPos.top=t+"px"})})}),d(()=>e.visible,t=>{t?(g.maskStyle.zIndex=Ve.editorConfig.zIndex+jt(),g.modalStyle.zIndex=Ve.editorConfig.zIndex+jt(),i.value.push("zoom-in"),l.value=t,y(()=>{const t=a.value.offsetWidth/2,o=a.value.offsetHeight/2,n=document.documentElement.clientWidth/2,l=document.documentElement.clientHeight/2;g.initPos.left=n-t+"px",g.initPos.top=l-o+"px",e.isFullscreen||(m=$t(r.value,(e,t)=>{g.initPos.left=e+"px",g.initPos.top=t+"px"}))}),setTimeout(()=>{i.value=i.value.filter(e=>"zoom-in"!==e)},140)):(i.value.push("zoom-out"),m(),setTimeout(()=>{i.value=i.value.filter(e=>"zoom-out"!==e),l.value=t},130))});const b=v(()=>({display:l.value?"block":"none"})),k=v(()=>"string"==typeof e.style?[e.style,b.value].join("; "):e.style instanceof Object?{...b.value,...e.style}:b.value);return c(()=>{var e;const t=null==(e=n.value)?void 0:e.getRootNode();s.value=t instanceof Document?document.body:t}),()=>{const n=We({ctx:t}),l=We({props:e,ctx:t},"title");return s.value?p($,{to:s.value},{default:()=>[p("div",{ref:u,class:`${Ee}-modal-container`,"data-theme":o.value},[p("div",{class:e.class,style:k.value},[e.showMask&&p("div",{class:`${Ee}-modal-mask`,style:g.maskStyle,onClick:()=>{var o;null==(o=e.onClose)||o.call(e),t.emit("onClose")}},null),p("div",{class:i.value,style:{...g.modalStyle,...g.initPos,...h.value},ref:a},[p("div",{class:`${Ee}-modal-header`,ref:r},[l||""]),p("div",{class:`${Ee}-modal-body`},[n]),p("div",{class:`${Ee}-modal-func`},[e.showAdjust&&p("div",{class:`${Ee}-modal-adjust`,onClick:t=>{t.stopPropagation(),e.isFullscreen?g.initPos=g.historyPos:(g.historyPos=g.initPos,g.initPos={left:"0",top:"0"}),e.onAdjust(!e.isFullscreen)}},[p(to,{name:e.isFullscreen?"minimize":"maximize"},null)]),p("div",{class:`${Ee}-modal-close`,onClick:o=>{var n;o.stopPropagation(),null==(n=e.onClose)||n.call(e),t.emit("onClose")}},[p(to,{name:"close"},null)])])])])])]}):""}}});oo.install=e=>(e.component(oo.name,oo),e);const no=`.${Ee}-preview > [data-line]`,lo=(e,t)=>+getComputedStyle(e).getPropertyValue(t).replace("px",""),io=(e,t)=>{const o=n(()=>{e.removeEventListener("scroll",l),e.addEventListener("scroll",l),t.removeEventListener("scroll",l),t.addEventListener("scroll",l)},50),l=n=>{const i=e.clientHeight,a=t.clientHeight,r=(e.scrollHeight-i)/(t.scrollHeight-a);n.target===e?(t.removeEventListener("scroll",l),t.scrollTo({top:e.scrollTop/r}),o()):(e.removeEventListener("scroll",l),e.scrollTo({top:t.scrollTop*r}),o())};return[()=>{o().finally(()=>{e.dispatchEvent(new Event("scroll"))})},()=>{e.removeEventListener("scroll",l),t.removeEventListener("scroll",l)}]},ao=(e,t,o)=>{const{view:n}=o,i=l(),a=e=>n.lineBlockAt(n.state.doc.line(e+1).from).top,r=e=>n.lineBlockAt(n.state.doc.line(e+1).from).bottom;let s=[],d=[],c=[];const u=(e,t)=>{let o=1;for(let n=d.length-1;n-1>=0;n--){const e=d[n],l=d[n-1];if(e.offsetTop+e.offsetHeight>t&&l.offsetTop<t){o=Number(l.dataset.line);break}}for(let n=s.length-1;n>=0;n--){const t=r(s[n].end),l=a(s[n].start);if(t>e&&l<=e){o=o<s[n].start?o:s[n].start;break}}return o};let m=0,p=0;const f=o=>{var l;const{scrollDOM:f,contentHeight:g}=n;return!(g<=f.clientHeight||t.firstElementChild.clientHeight<=t.clientHeight)&&!(n.state.doc.lines<=(null==(l=s[s.length-1])?void 0:l.end))&&void(o.target===e?(()=>{var e,o,l;if(0!==p)return!1;m++;const{scrollDOM:d,contentHeight:c}=n;let f=lo(t,"padding-top");const g=n.lineBlockAtHeight(d.scrollTop),{number:v}=n.state.doc.lineAt(g.from),h=s[v-1];if(!h)return!1;let b=1;const y=t.querySelector(`[data-line="${h.start}"]`)||(null==(e=t.firstElementChild)?void 0:e.firstElementChild),k=t.querySelector(`[data-line="${h.end+1}"]`)||(null==(o=t.lastElementChild)?void 0:o.lastElementChild),$=d.scrollHeight-d.clientHeight,w=t.scrollHeight-t.clientHeight;let x=a(h.start),C=r(h.end),S=y.offsetTop,j=k.offsetTop-S;0===x&&(S=0,y===k?(f=0,C=c-d.offsetHeight,j=w):j=k.offsetTop),b=(d.scrollTop-x)/(C-x);const T=k==(null==(l=t.lastElementChild)?void 0:l.lastElementChild)?k.offsetTop+k.clientHeight:k.offsetTop;if(C>=$||T>w){const e=u($,w);x=a(e),b=(d.scrollTop-x)/($-x);const o=t.querySelector(`[data-line="${e}"]`);x>0&&o&&(S=o.offsetTop),j=w-S+lo(t,"padding-top")}i(t,S-f+j*b,()=>{m--})})():(()=>{var o,l,r,f,g,v;if(0!==m)return;p++;const{scrollDOM:h}=n,b=t.scrollTop,y=t.scrollHeight,k=h.scrollHeight-h.clientHeight,$=t.scrollHeight-t.clientHeight;let w=null==(o=t.firstElementChild)?void 0:o.firstElementChild,x=null==(l=t.firstElementChild)?void 0:l.lastElementChild;if(c.length>0){let e=Math.ceil(c[c.length-1]*(b/y)),o=c.findLastIndex(t=>t<=e);o=-1===o?0:o,e=c[o];for(let t=o;t>=0&&t<c.length;){if(d[t].offsetTop>b){if(t-1>=0){t--;continue}e=-1,o=t;break}if(!(t+1<c.length&&d[t+1].offsetTop<b)){e=c[t],o=t;break}t++}switch(o){case-1:w=null==(r=t.firstElementChild)?void 0:r.firstElementChild,x=d[o];break;case c.length-1:w=d[o],x=null==(f=t.firstElementChild)?void 0:f.lastElementChild;break;default:w=d[o],x=d[o+1===d.length?o:o+1]}}let C=w===(null==(g=t.firstElementChild)?void 0:g.firstElementChild)?0:w.offsetTop-lo(w,"margin-top"),S=x.offsetTop,j=0;const{start:T,end:I}=s[Number(w.dataset.line||0)];let F=a(T);const B=a(I+1===n.state.doc.lines?I:I+1);let A=0;if(B>k||x.offsetTop+x.offsetHeight>$){const e=u(k,$),o=t.querySelector(`[data-line="${e}"]`);C=o?o.offsetTop-lo(o,"margin-top"):C,F=a(e),j=(b-C)/($-C),A=k-F}else w===(null==(v=t.firstElementChild)?void 0:v.firstElementChild)?(w===x?(S=x.offsetTop+x.offsetHeight+ +getComputedStyle(x).marginBottom.replace("px",""),A=B):A=B,j=Math.max(b/S,0)):(j=Math.max((b-C)/(S-C),0),A=B-F);i(e,F+A*j,()=>{p--})})())};return[()=>{(()=>{s=[],d=Array.from(t.querySelectorAll(no)),c=d.map(e=>Number(e.dataset.line));const e=[...c],{lines:o}=n.state.doc;let l=e.shift()||0,i=e.shift()||o;for(let t=0;t<o;t++)t===i&&(l=t,i=e.shift()||o),s.push({start:l,end:i-1})})(),e.addEventListener("scroll",f),t.addEventListener("scroll",f),e.dispatchEvent(new Event("scroll"))},()=>{e.removeEventListener("scroll",f),t.removeEventListener("scroll",f)}]},ro=s({props:{tocItem:{type:Object,default:()=>({})},mdHeadingId:{type:Function,default:()=>{}},onActive:{type:Function,default:()=>{}},onClick:{type:Function,default:()=>{}},scrollElementOffsetTop:{type:Number,default:0}},setup(e){const t=f("scrollElementRef"),o=f("roorNodeRef"),n=C();return d(()=>e.tocItem.active,t=>{t&&e.onActive(e.tocItem,n.value)}),c(()=>{e.tocItem.active&&e.onActive(e.tocItem,n.value)}),()=>{const{tocItem:l,mdHeadingId:i,onClick:a,scrollElementOffsetTop:r}=e;return p("div",{ref:n,class:[`${Ee}-catalog-link`,l.active&&`${Ee}-catalog-active`],onClick:e=>{if(e.stopPropagation(),a(e,l),e.defaultPrevented)return;const n=i(l.text,l.level,l.index),s=o.value.getElementById(n),d=t.value;if(s&&d){let e=s.offsetParent,t=s.offsetTop;if(d.contains(e))for(;e&&d!=e;)t+=null==e?void 0:e.offsetTop,e=null==e?void 0:e.offsetParent;let o=0;s.previousElementSibling||(o=lo(s,"margin-top")),null==d||d.scrollTo({top:t-r-o,behavior:"smooth"})}}},[p("span",{title:l.text},[l.text]),l.children&&l.children.length>0&&p("div",{class:`${Ee}-catalog-wrapper`},[l.children.map(t=>p(ro,{mdHeadingId:i,key:`${l.text}-link-${t.level}-${t.text}`,tocItem:t,onActive:e.onActive,onClick:a,scrollElementOffsetTop:r},null))])])}}}),so=s({name:"MdCatalog",props:{editorId:{type:String,default:void 0},class:{type:String,default:""},mdHeadingId:{type:Function,default:e=>e},scrollElement:{type:[String,Object],default:void 0},theme:{type:String,default:"light"},offsetTop:{type:Number,default:20},scrollElementOffsetTop:{type:Number,default:0},onClick:{type:Function,default:void 0},onActive:{type:Function,default:void 0},isScrollElementInShadow:{type:Boolean,default:!1},syncWith:{type:String,default:"preview"},catalogMaxDepth:{type:Number,default:void 0}},emits:["onClick","onActive"],setup(e,t){const o=e.editorId,n=`#${o}-preview-wrapper`,l=x({list:[],show:!1,scrollElement:e.scrollElement||n}),i=j(),a=C(),r=C(),s=C(),m=C(),f=j(),b=C({});g("scrollElementRef",r),g("roorNodeRef",m);const y=v(()=>{const t=[];return l.list.forEach((o,n)=>{if(e.catalogMaxDepth&&o.level>e.catalogMaxDepth)return;const{text:l,level:a,line:r}=o,s={level:a,text:l,line:r,index:n+1,active:i.value===o};if(0===t.length)t.push(s);else{let e=t[t.length-1];if(s.level>e.level)for(let t=e.level+1;t<=6;t++){const{children:t}=e;if(!t){e.children=[s];break}if(e=t[t.length-1],s.level<=e.level){t.push(s);break}}else t.push(s)}}),t}),k=t=>{if(0===t.length)return i.value=void 0,l.list=[],!1;const{activeHead:o}=t.reduce((t,o,n)=>{var l;let i=0;if("preview"===e.syncWith){const t=null==(l=m.value)?void 0:l.getElementById(e.mdHeadingId(o.text,o.level,n+1));t instanceof HTMLElement&&(i=((e,t)=>{if(!e||!t)return 0;const o=null==e?void 0:e.getBoundingClientRect();if(t===document.documentElement)return o.top-t.clientTop;const n=null==t?void 0:t.getBoundingClientRect();return o.top-n.top})(t,r.value))}else{const e=f.value;e&&(i=e.lineBlockAt(e.state.doc.line(o.line+1).from).top-e.scrollDOM.scrollTop)}return i<e.offsetTop&&i>t.minTop?{activeHead:o,minTop:i}:t},{activeHead:t[0],minTop:Number.MIN_SAFE_INTEGER});i.value=o,l.list=t},$=(o,n)=>{var l;b.value.top=n.offsetTop+lo(n,"padding-top")+"px",null==(l=e.onActive)||l.call(e,o,n),t.emit("onActive",o,n)},w=()=>{k(l.list)},S=t=>{var o,i,d;if(null==(o=s.value)||o.removeEventListener("scroll",w),"editor"===e.syncWith)s.value=null==(i=f.value)?void 0:i.scrollDOM;else{const t=(()=>{var t;if(l.scrollElement instanceof HTMLElement)return l.scrollElement;let o=document;return(l.scrollElement===n||e.isScrollElementInShadow)&&(o=null==(t=a.value)?void 0:t.getRootNode()),o.querySelector(l.scrollElement)})();r.value=t,s.value=t===document.documentElement?document:t}k(t),null==(d=s.value)||d.addEventListener("scroll",w)},T=e=>{f.value=e};return d([()=>e.syncWith,f,()=>e.catalogMaxDepth],()=>{S(l.list)}),c(()=>{m.value=a.value.getRootNode(),Ze.on(o,{name:mt,callback:S}),Ze.on(o,{name:bt,callback:T}),Ze.emit(o,pt),Ze.emit(o,ht)}),u(()=>{var e;Ze.remove(o,mt,S),Ze.remove(o,bt,T),null==(e=s.value)||e.removeEventListener("scroll",w)}),()=>p("div",{class:[`${Ee}-catalog`,"dark"===e.theme&&`${Ee}-catalog-dark`,e.class||""],ref:a},[y.value.length>0&&p(h,null,[p("div",{class:`${Ee}-catalog-indicator`,style:b.value},null),p("div",{class:`${Ee}-catalog-container`},[y.value.map(o=>p(ro,{mdHeadingId:e.mdHeadingId,tocItem:o,key:`link-${o.level}-${o.text}`,onActive:$,onClick:(o,n)=>{var l;null==(l=e.onClick)||l.call(e,o,n),t.emit("onClick",o,n)},scrollElementOffsetTop:e.scrollElementOffsetTop},null))])])])}});so.install=e=>(e.component(so.name,so),e);const co=s({name:"NormalToolbar",props:{title:{type:String,default:""},trigger:{type:[String,Object],default:void 0},onClick:{type:Function,default:void 0},insert:{type:Function,default:void 0},language:{type:String,default:void 0},theme:{type:String,default:void 0},previewTheme:{type:String,default:void 0},codeTheme:{type:String,default:void 0},disabled:{type:Boolean,default:void 0},showToolbarName:{type:Boolean,default:void 0}},emits:["onClick"],setup:(e,t)=>()=>{const o=We({props:e,ctx:t},"trigger"),n=We({props:e,ctx:t});return p("div",{class:[`${Ee}-toolbar-item`,e.disabled&&`${Ee}-disabled`],title:e.title,onClick:o=>{var n;e.disabled||(null==(n=e.onClick)||n.call(e,o),t.emit("onClick",o))}},[n||o])}});co.install=e=>(e.component(co.name,co),e);const uo=s({name:"ModalToolbar",props:{title:{type:String,default:""},modalTitle:{type:[String,Object],default:""},visible:{type:Boolean,default:void 0},width:{type:String,default:"auto"},height:{type:String,default:"auto"},trigger:{type:[String,Object],default:void 0},onClick:{type:Function,default:void 0},onClose:{type:Function,default:void 0},showAdjust:{type:Boolean,default:!1},isFullscreen:{type:Boolean,default:!1},onAdjust:{type:Function,default:void 0},class:{type:String,default:void 0},style:{type:[Object,String],default:void 0},showMask:{type:Boolean,default:!0},insert:{type:Function,default:void 0},language:{type:String,default:void 0},theme:{type:String,default:void 0},previewTheme:{type:String,default:void 0},codeTheme:{type:String,default:void 0},disabled:{type:Boolean,default:void 0},showToolbarName:{type:Boolean,default:void 0}},emits:["onClick","onClose","onAdjust"],setup:(e,t)=>()=>{const o=We({props:e,ctx:t},"trigger"),n=We({props:e,ctx:t},"modalTitle"),l=We({props:e,ctx:t});return p(h,null,[p("div",{class:[`${Ee}-toolbar-item`,e.disabled&&`${Ee}-disabled`],title:e.title,onClick:()=>{var o;e.disabled||(null==(o=e.onClick)||o.call(e),t.emit("onClick"))}},[o]),p(oo,{style:e.style,class:e.class,width:e.width,height:e.height,title:n,visible:e.visible,showMask:e.showMask,onClose:()=>{var o;null==(o=e.onClose)||o.call(e),t.emit("onClose")},showAdjust:e.showAdjust,isFullscreen:e.isFullscreen,onAdjust:o=>{var n;null==(n=e.onAdjust)||n.call(e,o),t.emit("onAdjust",o)}},(i=l,"function"==typeof i||"[object Object]"===Object.prototype.toString.call(i)&&!w(i)?l:{default:()=>[l]}))]);var i}});uo.install=e=>(e.component(uo.name,uo),e);var mo=Object.defineProperty,po=(e,t,o)=>((e,t,o)=>t in e?mo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o)(e,"symbol"!=typeof t?t+"":t,o);const fo=s({name:`${Ee}-divider`,setup:()=>()=>p("div",{class:`${Ee}-divider`},null)}),go={noPrettier:{type:Boolean},toolbars:{type:Array,default:()=>[]},toolbarsExclude:{type:Array,default:()=>[]},setting:{type:Object,default:()=>({})},screenfull:{type:Object,default:null},screenfullJs:{type:String,default:""},updateSetting:{type:Function,default:()=>{}},tableShape:{type:Array,default:()=>[6,4]},defToolbars:{type:Object},noUploadImg:{type:Boolean},showToolbarName:{type:Boolean},catalogVisible:{type:Boolean},codeTheme:{type:String},insertLinkDirect:{type:Boolean}},vo=s({name:"TableShape",props:{tableShape:{type:Array,default:()=>[6,4]},onSelected:{type:Function,default:()=>{}}},setup(e){const t=x({x:-1,y:-1}),o=v(()=>JSON.stringify(e.tableShape)),n=()=>{const e=[...JSON.parse(o.value)];return(!e[2]||e[2]<e[0])&&(e[2]=e[0]),(!e[3]||e[3]<e[3])&&(e[3]=e[1]),e},l=C(n());return d([o],()=>{l.value=n()}),()=>p("div",{class:`${Ee}-table-shape`,onMouseleave:()=>{l.value=n(),t.x=-1,t.y=-1}},[new Array(l.value[1]).fill("").map((o,n)=>p("div",{class:`${Ee}-table-shape-row`,key:`table-shape-row-${n}`},[new Array(l.value[0]).fill("").map((o,i)=>p("div",{class:`${Ee}-table-shape-col`,key:`table-shape-col-${i}`,onMouseenter:()=>{t.x=n,t.y=i,i+1===l.value[0]&&i+1<l.value[2]?l.value[0]++:i+2<l.value[0]&&l.value[0]>e.tableShape[0]&&l.value[0]--,n+1===l.value[1]&&n+1<l.value[3]?l.value[1]++:n+2<l.value[1]&&l.value[1]>e.tableShape[1]&&l.value[1]--},onClick:()=>{e.onSelected(t)}},[p("div",{class:[`${Ee}-table-shape-col-default`,n<=t.x&&i<=t.y&&`${Ee}-table-shape-col-include`]},null)]))]))])}}),ho={type:{type:String,default:"link"},visible:{type:Boolean,default:!1},onCancel:{type:Function,default:()=>{}},onOk:{type:Function,default:()=>{}}},bo=s({name:`${Ee}-modal-link`,props:ho,setup(e){const t=f("usedLanguageText"),o=f("editorId"),n=v(()=>{var o,n;switch(e.type){case"link":return null==(o=t.value.linkModalTips)?void 0:o.linkTitle;case"image":return null==(n=t.value.linkModalTips)?void 0:n.imageTitle;default:return""}}),l=x({desc:"",url:""});return d(()=>e.visible,e=>{e||setTimeout(()=>{l.desc="",l.url=""},200)}),()=>p(oo,{title:n.value,visible:e.visible,onClose:e.onCancel},{default:()=>{var n,i,a,r,s;return[p("div",{class:`${Ee}-form-item`},[p("label",{class:`${Ee}-label`,for:`link-desc-${o}`},[null==(n=t.value.linkModalTips)?void 0:n.descLabel]),p("input",{placeholder:null==(i=t.value.linkModalTips)?void 0:i.descLabelPlaceHolder,class:`${Ee}-input`,id:`link-desc-${o}`,type:"text",value:l.desc,onChange:e=>{l.desc=e.target.value},autocomplete:"off"},null)]),p("div",{class:`${Ee}-form-item`},[p("label",{class:`${Ee}-label`,for:`link-url-${o}`},[null==(a=t.value.linkModalTips)?void 0:a.urlLabel]),p("input",{placeholder:null==(r=t.value.linkModalTips)?void 0:r.urlLabelPlaceHolder,class:`${Ee}-input`,id:`link-url-${o}`,type:"text",value:l.url,onChange:e=>{l.url=e.target.value},autocomplete:"off"},null)]),p("div",{class:`${Ee}-form-item`},[p("button",{class:[`${Ee}-btn`,`${Ee}-btn-row`],type:"button",onClick:()=>{e.onOk(l),l.desc="",l.url=""}},[null==(s=t.value.linkModalTips)?void 0:s.buttonOK])])]}})}}),yo={visible:{type:Boolean,default:!1},onCancel:{type:Function,default:()=>{}},onOk:{type:Function,default:()=>{}}},ko=s({name:`${Ee}-modal-clip`,props:yo,setup(e){const t=f("usedLanguageText"),o=f("editorId"),n=f("rootRef");let l=Ve.editorExtensions.cropper.instance;const i=C(),a=C(),r=C(),s=x({cropperInited:!1,imgSelected:!1,imgSrc:"",isFullscreen:!1});let c=null;d(()=>e.visible,()=>{e.visible&&!s.cropperInited&&(l=l||window.Cropper,i.value.onchange=()=>{if(!l)return void Ze.emit(o,at,{name:"Cropper",message:"Cropper is undefined"});const e=i.value.files||[];if(s.imgSelected=!0,(null==e?void 0:e.length)>0){const t=new FileReader;t.onload=e=>{s.imgSrc=e.target.result},t.readAsDataURL(e[0])}})}),d(()=>[s.imgSelected],()=>{r.value.style=""}),d([S(()=>s.isFullscreen),S(()=>s.imgSrc)],()=>{s.imgSrc&&y(()=>{null==c||c.destroy(),r.value.style="",a.value&&(c=new l(a.value,{viewMode:2,preview:n.value.getRootNode().querySelector(`.${Ee}-clip-preview-target`)}))})});const u=()=>{c.clear(),c.destroy(),c=null,i.value.value="",s.imgSelected=!1};return()=>{var n;return p(oo,{class:`${Ee}-modal-clip`,title:null==(n=t.value.clipModalTips)?void 0:n.title,visible:e.visible,onClose:e.onCancel,showAdjust:!0,isFullscreen:s.isFullscreen,onAdjust:e=>{s.isFullscreen=e},width:"668px",height:"421px"},{default:()=>{var n,l,d;return[p("div",{class:`${Ee}-form-item ${Ee}-clip`},[p("div",{class:`${Ee}-clip-main`},[s.imgSelected?p("div",{class:`${Ee}-clip-cropper`},[p("img",{src:s.imgSrc,ref:a,style:{display:"none"},alt:""},null),p("div",{class:`${Ee}-clip-delete`,onClick:u},[p(to,{name:"delete"},null)])]):p("div",{class:`${Ee}-clip-upload`,onClick:()=>{i.value.click()},role:"button",tabindex:"0","aria-label":null==(n=t.value.imgTitleItem)?void 0:n.upload},[p(to,{name:"upload"},null)])]),p("div",{class:`${Ee}-clip-preview`},[p("div",{class:`${Ee}-clip-preview-target`,ref:r},null)])]),p("div",{class:`${Ee}-form-item`},[p("button",{class:`${Ee}-btn`,type:"button",onClick:()=>{if(c){const t=c.getCroppedCanvas();Ze.emit(o,st,[St(t.toDataURL("image/png"))],e.onOk),u()}}},[(null==(l=t.value.clipModalTips)?void 0:l.buttonUpload)||(null==(d=t.value.linkModalTips)?void 0:d.buttonOK)])]),p("input",{ref:i,accept:"image/*",type:"file",multiple:!1,style:{display:"none"},"aria-hidden":"true"},null)]}})}}}),$o={type:{type:String,default:"link"},linkVisible:{type:Boolean,default:!1},clipVisible:{type:Boolean,default:!1},onCancel:{type:Function,default:()=>{}},onOk:{type:Function,default:()=>{}}},wo=s({name:`${Ee}-modals`,props:$o,setup:e=>()=>p(h,null,[p(bo,{type:e.type,visible:e.linkVisible,onOk:e.onOk,onCancel:e.onCancel},null),p(ko,{visible:e.clipVisible,onOk:e.onOk,onCancel:e.onCancel},null)])}),xo=s({name:"MDEditorToolbar",props:go,setup(e){const t=f("editorId"),o=f("usedLanguageText"),n=f("theme"),l=f("previewTheme"),r=f("language"),s=f("disabled"),{fullscreenHandler:u}=(e=>{const t=f("editorId"),{editorExtensions:o,editorExtensionsAttrs:n}=Ve;let l=o.screenfull.instance;const i=C(!1),a=e=>{l?l.isEnabled&&(i.value=!0,(void 0===e?!l.isFullscreen:e)?l.request():l.exit()):Ze.emit(t,at,{name:"fullscreen",message:"fullscreen is undefined"})},r=()=>{l&&l.isEnabled&&l.on("change",()=>{(i.value||e.setting.fullscreen)&&(i.value=!1,e.updateSetting("fullscreen"))})},s=()=>{l=window.screenfull,r()};return c(()=>{var e;r(),l||wt("script",{...null==(e=n.screenfull)?void 0:e.js,src:o.screenfull.js,id:Tt.screenfull,onload:s},"screenfull")}),c(()=>{Ze.on(t,{name:Ye,callback:a})}),{fullscreenHandler:a}})(e),g=`${t}-toolbar-wrapper`,b=C(),k=x({title:!1,catalog:!1,image:!1,table:!1,mermaid:!1,katex:!1}),$=(e,o)=>{if(null==s?void 0:s.value)return!1;Ze.emit(t,rt,e,o)},w=x({type:"link",linkVisible:!1,clipVisible:!1}),S=C();c(()=>{Ze.on(t,{name:dt,callback(e){w.type=e,w.linkVisible=!0}})});const j=v(()=>{const t=e.toolbars.filter(t=>!e.toolbarsExclude.includes(t)),o=t.indexOf("=");return[-1===o?t:t.slice(0,o+1),-1===o?[]:t.slice(o,Number.MAX_SAFE_INTEGER)]}),T=C(),I=()=>{Ze.emit(t,st,Array.from(T.value.files||[])),T.value.value=""};c(()=>{T.value.addEventListener("change",I)});const F=i=>{var d,c,f,v,h,b,y,x,C,S,j,I,F,B,A,M,L,O,E,H,z,R,D,N,P,V,q,W,_,U,G,K,Z,J,X,Y,Q,ee,te,oe,ne,le,ie,ae,re,se,de,ce,ue,me,pe,fe,ge,ve,he,be,ye,ke,$e,we,xe,Ce,Se,je,Te,Ie,Fe,Be,Ae,Me,Le,Oe,He,ze,Re,Ne,Pe,Ve,qe,We,_e;if(!De.includes(i)){if(e.defToolbars instanceof Array){const o=e.defToolbars[i];return o?m(o,{theme:(null==(Me=o.props)?void 0:Me.theme)||n.value,previewTheme:(null==(Le=o.props)?void 0:Le.theme)||l.value,language:(null==(Oe=o.props)?void 0:Oe.theme)||r.value,codeTheme:(null==(He=o.props)?void 0:He.codeTheme)||e.codeTheme,disabled:(null==(ze=o.props)?void 0:ze.disabled)||(null==s?void 0:s.value),showToolbarName:(null==(Re=o.props)?void 0:Re.showToolbarName)||e.showToolbarName,insert(e){Ze.emit(t,rt,"universal",{generate:e})}}):""}if(e.defToolbars&&e.defToolbars.children instanceof Array){const o=e.defToolbars.children[i];return o?m(o,{theme:(null==(Ne=o.props)?void 0:Ne.theme)||n.value,previewTheme:(null==(Pe=o.props)?void 0:Pe.theme)||l.value,language:(null==(Ve=o.props)?void 0:Ve.theme)||r.value,codeTheme:(null==(qe=o.props)?void 0:qe.codeTheme)||e.codeTheme,disabled:(null==(We=o.props)?void 0:We.disabled)||(null==s?void 0:s.value),showToolbarName:(null==(_e=o.props)?void 0:_e.showToolbarName)||e.showToolbarName,insert(e){Ze.emit(t,rt,"universal",{generate:e})}}):""}return""}switch(i){case"-":return p(fo,null,null);case"bold":return p("div",{class:[`${Ee}-toolbar-item`,(null==s?void 0:s.value)&&`${Ee}-disabled`],title:null==(d=o.value.toolbarTips)?void 0:d.bold,onClick:()=>{$("bold")}},[p(to,{name:"bold"},null),e.showToolbarName&&p("div",{class:`${Ee}-toolbar-item-name`},[null==(c=o.value.toolbarTips)?void 0:c.bold])]);case"underline":return p("div",{class:[`${Ee}-toolbar-item`,(null==s?void 0:s.value)&&`${Ee}-disabled`],title:null==(f=o.value.toolbarTips)?void 0:f.underline,onClick:()=>{$("underline")}},[p(to,{name:"underline"},null),e.showToolbarName&&p("div",{class:`${Ee}-toolbar-item-name`},[null==(v=o.value.toolbarTips)?void 0:v.underline])]);case"italic":return p("div",{class:[`${Ee}-toolbar-item`,(null==s?void 0:s.value)&&`${Ee}-disabled`],title:null==(h=o.value.toolbarTips)?void 0:h.italic,onClick:()=>{$("italic")}},[p(to,{name:"italic"},null),e.showToolbarName&&p("div",{class:`${Ee}-toolbar-item-name`},[null==(b=o.value.toolbarTips)?void 0:b.italic])]);case"strikeThrough":return p("div",{class:[`${Ee}-toolbar-item`,(null==s?void 0:s.value)&&`${Ee}-disabled`],title:null==(y=o.value.toolbarTips)?void 0:y.strikeThrough,onClick:()=>{$("strikeThrough")}},[p(to,{name:"strike-through"},null),e.showToolbarName&&p("div",{class:`${Ee}-toolbar-item-name`},[null==(x=o.value.toolbarTips)?void 0:x.strikeThrough])]);case"title":return p(Ue,{relative:`#${g}`,visible:k.title,onChange:e=>{k.title=e},disabled:null==s?void 0:s.value,overlay:p("ul",{class:`${Ee}-menu`,onClick:()=>{k.title=!1},role:"menu"},[p("li",{class:`${Ee}-menu-item ${Ee}-menu-item-title`,onClick:()=>{$("h1")},role:"menuitem",tabindex:"0"},[null==(C=o.value.titleItem)?void 0:C.h1]),p("li",{class:`${Ee}-menu-item ${Ee}-menu-item-title`,onClick:()=>{$("h2")},role:"menuitem",tabindex:"0"},[null==(S=o.value.titleItem)?void 0:S.h2]),p("li",{class:`${Ee}-menu-item ${Ee}-menu-item-title`,onClick:()=>{$("h3")},role:"menuitem",tabindex:"0"},[null==(j=o.value.titleItem)?void 0:j.h3]),p("li",{class:`${Ee}-menu-item ${Ee}-menu-item-title`,onClick:()=>{$("h4")},role:"menuitem",tabindex:"0"},[null==(I=o.value.titleItem)?void 0:I.h4]),p("li",{class:`${Ee}-menu-item ${Ee}-menu-item-title`,onClick:()=>{$("h5")},role:"menuitem",tabindex:"0"},[null==(F=o.value.titleItem)?void 0:F.h5]),p("li",{class:`${Ee}-menu-item ${Ee}-menu-item-title`,onClick:()=>{$("h6")},role:"menuitem",tabindex:"0"},[null==(B=o.value.titleItem)?void 0:B.h6])])},{default:()=>{var t,n;return[p("div",{class:[`${Ee}-toolbar-item`,(null==s?void 0:s.value)&&`${Ee}-disabled`],title:null==(t=o.value.toolbarTips)?void 0:t.title},[p(to,{name:"title"},null),e.showToolbarName&&p("div",{class:`${Ee}-toolbar-item-name`},[null==(n=o.value.toolbarTips)?void 0:n.title])])]}});case"sub":return p("div",{class:[`${Ee}-toolbar-item`,(null==s?void 0:s.value)&&`${Ee}-disabled`],title:null==(A=o.value.toolbarTips)?void 0:A.sub,onClick:()=>{$("sub")}},[p(to,{name:"sub"},null),e.showToolbarName&&p("div",{class:`${Ee}-toolbar-item-name`},[null==(M=o.value.toolbarTips)?void 0:M.sub])]);case"sup":return p("div",{class:[`${Ee}-toolbar-item`,(null==s?void 0:s.value)&&`${Ee}-disabled`],title:null==(L=o.value.toolbarTips)?void 0:L.sup,onClick:()=>{$("sup")}},[p(to,{name:"sup"},null),e.showToolbarName&&p("div",{class:`${Ee}-toolbar-item-name`},[null==(O=o.value.toolbarTips)?void 0:O.sup])]);case"quote":return p("div",{class:[`${Ee}-toolbar-item`,(null==s?void 0:s.value)&&`${Ee}-disabled`],title:null==(E=o.value.toolbarTips)?void 0:E.quote,onClick:()=>{$("quote")}},[p(to,{name:"quote"},null),e.showToolbarName&&p("div",{class:`${Ee}-toolbar-item-name`},[null==(H=o.value.toolbarTips)?void 0:H.quote])]);case"unorderedList":return p("div",{class:[`${Ee}-toolbar-item`,(null==s?void 0:s.value)&&`${Ee}-disabled`],title:null==(z=o.value.toolbarTips)?void 0:z.unorderedList,onClick:()=>{$("unorderedList")}},[p(to,{name:"unordered-list"},null),e.showToolbarName&&p("div",{class:`${Ee}-toolbar-item-name`},[null==(R=o.value.toolbarTips)?void 0:R.unorderedList])]);case"orderedList":return p("div",{class:[`${Ee}-toolbar-item`,(null==s?void 0:s.value)&&`${Ee}-disabled`],title:null==(D=o.value.toolbarTips)?void 0:D.orderedList,onClick:()=>{$("orderedList")}},[p(to,{name:"ordered-list"},null),e.showToolbarName&&p("div",{class:`${Ee}-toolbar-item-name`},[null==(N=o.value.toolbarTips)?void 0:N.orderedList])]);case"task":return p("div",{class:[`${Ee}-toolbar-item`,(null==s?void 0:s.value)&&`${Ee}-disabled`],title:null==(P=o.value.toolbarTips)?void 0:P.task,onClick:()=>{$("task")}},[p(to,{name:"task"},null),e.showToolbarName&&p("div",{class:`${Ee}-toolbar-item-name`},[null==(V=o.value.toolbarTips)?void 0:V.task])]);case"codeRow":return p("div",{class:[`${Ee}-toolbar-item`,(null==s?void 0:s.value)&&`${Ee}-disabled`],title:null==(q=o.value.toolbarTips)?void 0:q.codeRow,onClick:()=>{$("codeRow")}},[p(to,{name:"code-row"},null),e.showToolbarName&&p("div",{class:`${Ee}-toolbar-item-name`},[null==(W=o.value.toolbarTips)?void 0:W.codeRow])]);case"code":return p("div",{class:[`${Ee}-toolbar-item`,(null==s?void 0:s.value)&&`${Ee}-disabled`],title:null==(_=o.value.toolbarTips)?void 0:_.code,onClick:()=>{$("code")}},[p(to,{name:"code"},null),e.showToolbarName&&p("div",{class:`${Ee}-toolbar-item-name`},[null==(U=o.value.toolbarTips)?void 0:U.code])]);case"link":return p("div",{class:[`${Ee}-toolbar-item`,(null==s?void 0:s.value)&&`${Ee}-disabled`],title:null==(G=o.value.toolbarTips)?void 0:G.link,onClick:()=>{if(null==s?void 0:s.value)return!1;e.insertLinkDirect?$("link"):(w.type="link",w.linkVisible=!0)}},[p(to,{name:"link"},null),e.showToolbarName&&p("div",{class:`${Ee}-toolbar-item-name`},[null==(K=o.value.toolbarTips)?void 0:K.link])]);case"image":return e.noUploadImg?p("div",{class:[`${Ee}-toolbar-item`,(null==s?void 0:s.value)&&`${Ee}-disabled`],title:null==(Z=o.value.toolbarTips)?void 0:Z.image,onClick:()=>{if(null==s?void 0:s.value)return!1;e.insertLinkDirect?$("image"):(w.type="image",w.linkVisible=!0)}},[p(to,{name:"image"},null),e.showToolbarName&&p("div",{class:`${Ee}-toolbar-item-name`},[null==(J=o.value.toolbarTips)?void 0:J.image])]):p(Ue,{relative:`#${g}`,visible:k.image,onChange:e=>{k.image=e},disabled:null==s?void 0:s.value,overlay:p("ul",{class:`${Ee}-menu`,onClick:()=>{k.image=!1},role:"menu"},[p("li",{class:`${Ee}-menu-item ${Ee}-menu-item-image`,onClick:()=>{e.insertLinkDirect?$("image"):(w.type="image",w.linkVisible=!0)},role:"menuitem",tabindex:"0"},[null==(X=o.value.imgTitleItem)?void 0:X.link]),p("li",{class:`${Ee}-menu-item ${Ee}-menu-item-image`,onClick:()=>{T.value.click()},role:"menuitem",tabindex:"0"},[null==(Y=o.value.imgTitleItem)?void 0:Y.upload]),p("li",{class:`${Ee}-menu-item ${Ee}-menu-item-image`,onClick:()=>{w.clipVisible=!0},role:"menuitem",tabindex:"0"},[null==(Q=o.value.imgTitleItem)?void 0:Q.clip2upload])])},{default:()=>{var t,n;return[p("div",{class:[`${Ee}-toolbar-item`,(null==s?void 0:s.value)&&`${Ee}-disabled`],title:null==(t=o.value.toolbarTips)?void 0:t.image},[p(to,{name:"image"},null),e.showToolbarName&&p("div",{class:`${Ee}-toolbar-item-name`},[null==(n=o.value.toolbarTips)?void 0:n.image])])]}});case"table":return p(Ue,{relative:`#${g}`,visible:k.table,onChange:e=>{k.table=e},disabled:null==s?void 0:s.value,key:"bar-table",overlay:p(vo,{tableShape:e.tableShape,onSelected:e=>{$("table",{selectedShape:e})}},null)},{default:()=>{var t,n;return[p("div",{class:[`${Ee}-toolbar-item`,(null==s?void 0:s.value)&&`${Ee}-disabled`],title:null==(t=o.value.toolbarTips)?void 0:t.table},[p(to,{name:"table"},null),e.showToolbarName&&p("div",{class:`${Ee}-toolbar-item-name`},[null==(n=o.value.toolbarTips)?void 0:n.table])])]}});case"revoke":return p("div",{class:[`${Ee}-toolbar-item`,(null==s?void 0:s.value)&&`${Ee}-disabled`],title:null==(ee=o.value.toolbarTips)?void 0:ee.revoke,onClick:()=>{if(null==s?void 0:s.value)return!1;Ze.emit(t,ct)}},[p(to,{name:"revoke"},null),e.showToolbarName&&p("div",{class:`${Ee}-toolbar-item-name`},[null==(te=o.value.toolbarTips)?void 0:te.revoke])]);case"next":return p("div",{class:[`${Ee}-toolbar-item`,(null==s?void 0:s.value)&&`${Ee}-disabled`],title:null==(oe=o.value.toolbarTips)?void 0:oe.next,onClick:()=>{if(null==s?void 0:s.value)return!1;Ze.emit(t,ut)}},[p(to,{name:"next"},null),e.showToolbarName&&p("div",{class:`${Ee}-toolbar-item-name`},[null==(ne=o.value.toolbarTips)?void 0:ne.next])]);case"save":return p("div",{class:[`${Ee}-toolbar-item`,(null==s?void 0:s.value)&&`${Ee}-disabled`],title:null==(le=o.value.toolbarTips)?void 0:le.save,onClick:()=>{if(null==s?void 0:s.value)return!1;Ze.emit(t,Je)}},[p(to,{name:"save"},null),e.showToolbarName&&p("div",{class:`${Ee}-toolbar-item-name`},[null==(ie=o.value.toolbarTips)?void 0:ie.save])]);case"prettier":return e.noPrettier?"":p("div",{class:[`${Ee}-toolbar-item`,(null==s?void 0:s.value)&&`${Ee}-disabled`],title:null==(ae=o.value.toolbarTips)?void 0:ae.prettier,onClick:()=>{$("prettier")}},[p(to,{name:"prettier"},null),e.showToolbarName&&p("div",{class:`${Ee}-toolbar-item-name`},[null==(re=o.value.toolbarTips)?void 0:re.prettier])]);case"pageFullscreen":return!e.setting.fullscreen&&p("div",{class:[`${Ee}-toolbar-item`,e.setting.pageFullscreen&&`${Ee}-toolbar-active`,(null==s?void 0:s.value)&&`${Ee}-disabled`],title:null==(se=o.value.toolbarTips)?void 0:se.pageFullscreen,onClick:()=>{if(null==s?void 0:s.value)return!1;e.updateSetting("pageFullscreen")}},[p(to,{name:e.setting.pageFullscreen?"minimize":"maximize"},null),e.showToolbarName&&p("div",{class:`${Ee}-toolbar-item-name`},[null==(de=o.value.toolbarTips)?void 0:de.pageFullscreen])]);case"fullscreen":return p("div",{class:[`${Ee}-toolbar-item`,e.setting.fullscreen&&`${Ee}-toolbar-active`,(null==s?void 0:s.value)&&`${Ee}-disabled`],title:null==(ce=o.value.toolbarTips)?void 0:ce.fullscreen,onClick:()=>{if(null==s?void 0:s.value)return!1;u()}},[p(to,{name:e.setting.fullscreen?"fullscreen-exit":"fullscreen"},null),e.showToolbarName&&p("div",{class:`${Ee}-toolbar-item-name`},[null==(ue=o.value.toolbarTips)?void 0:ue.fullscreen])]);case"preview":return p("div",{class:[`${Ee}-toolbar-item`,e.setting.preview&&`${Ee}-toolbar-active`,(null==s?void 0:s.value)&&`${Ee}-disabled`],title:null==(me=o.value.toolbarTips)?void 0:me.preview,onClick:()=>{if(null==s?void 0:s.value)return!1;e.updateSetting("preview")}},[p(to,{name:"preview"},null),e.showToolbarName&&p("div",{class:`${Ee}-toolbar-item-name`},[null==(pe=o.value.toolbarTips)?void 0:pe.preview])]);case"previewOnly":return p("div",{class:[`${Ee}-toolbar-item`,e.setting.previewOnly&&`${Ee}-toolbar-active`,(null==s?void 0:s.value)&&`${Ee}-disabled`],title:null==(fe=o.value.toolbarTips)?void 0:fe.previewOnly,onClick:()=>{if(null==s?void 0:s.value)return!1;e.updateSetting("previewOnly")}},[p(to,{name:"preview-only"},null),e.showToolbarName&&p("div",{class:`${Ee}-toolbar-item-name`},[null==(ge=o.value.toolbarTips)?void 0:ge.previewOnly])]);case"htmlPreview":return p("div",{class:[`${Ee}-toolbar-item`,e.setting.htmlPreview&&`${Ee}-toolbar-active`,(null==s?void 0:s.value)&&`${Ee}-disabled`],title:null==(ve=o.value.toolbarTips)?void 0:ve.htmlPreview,onClick:()=>{if(null==s?void 0:s.value)return!1;e.updateSetting("htmlPreview")}},[p(to,{name:"preview-html"},null),e.showToolbarName&&p("div",{class:`${Ee}-toolbar-item-name`},[null==(he=o.value.toolbarTips)?void 0:he.htmlPreview])]);case"catalog":return p("div",{class:[`${Ee}-toolbar-item`,e.catalogVisible&&`${Ee}-toolbar-active`,(null==s?void 0:s.value)&&`${Ee}-disabled`],title:null==(be=o.value.toolbarTips)?void 0:be.catalog,onClick:()=>{if(null==s?void 0:s.value)return!1;Ze.emit(t,Xe)},key:"bar-catalog"},[p(to,{name:"catalog"},null),e.showToolbarName&&p("div",{class:`${Ee}-toolbar-item-name`},[null==(ye=o.value.toolbarTips)?void 0:ye.catalog])]);case"github":return p("div",{class:[`${Ee}-toolbar-item`,(null==s?void 0:s.value)&&`${Ee}-disabled`],title:null==(ke=o.value.toolbarTips)?void 0:ke.github,onClick:()=>{if(null==s?void 0:s.value)return!1;a("https://github.com/imzbf/md-editor-v3")}},[p(to,{name:"github"},null),e.showToolbarName&&p("div",{class:`${Ee}-toolbar-item-name`},[null==($e=o.value.toolbarTips)?void 0:$e.github])]);case"mermaid":return p(Ue,{relative:`#${g}`,visible:k.mermaid,onChange:e=>{k.mermaid=e},disabled:null==s?void 0:s.value,overlay:p("ul",{class:`${Ee}-menu`,onClick:()=>{k.mermaid=!1},role:"menu"},[p("li",{class:`${Ee}-menu-item ${Ee}-menu-item-mermaid`,onClick:()=>{$("flow")},role:"menuitem",tabindex:"0"},[null==(we=o.value.mermaid)?void 0:we.flow]),p("li",{class:`${Ee}-menu-item ${Ee}-menu-item-mermaid`,onClick:()=>{$("sequence")},role:"menuitem",tabindex:"0"},[null==(xe=o.value.mermaid)?void 0:xe.sequence]),p("li",{class:`${Ee}-menu-item ${Ee}-menu-item-mermaid`,onClick:()=>{$("gantt")},role:"menuitem",tabindex:"0"},[null==(Ce=o.value.mermaid)?void 0:Ce.gantt]),p("li",{class:`${Ee}-menu-item ${Ee}-menu-item-mermaid`,onClick:()=>{$("class")},role:"menuitem",tabindex:"0"},[null==(Se=o.value.mermaid)?void 0:Se.class]),p("li",{class:`${Ee}-menu-item ${Ee}-menu-item-mermaid`,onClick:()=>{$("state")},role:"menuitem",tabindex:"0"},[null==(je=o.value.mermaid)?void 0:je.state]),p("li",{class:`${Ee}-menu-item ${Ee}-menu-item-mermaid`,onClick:()=>{$("pie")},role:"menuitem",tabindex:"0"},[null==(Te=o.value.mermaid)?void 0:Te.pie]),p("li",{class:`${Ee}-menu-item ${Ee}-menu-item-mermaid`,onClick:()=>{$("relationship")},role:"menuitem",tabindex:"0"},[null==(Ie=o.value.mermaid)?void 0:Ie.relationship]),p("li",{class:`${Ee}-menu-item ${Ee}-menu-item-mermaid`,onClick:()=>{$("journey")},role:"menuitem",tabindex:"0"},[null==(Fe=o.value.mermaid)?void 0:Fe.journey])]),key:"bar-mermaid"},{default:()=>{var t,n;return[p("div",{class:[`${Ee}-toolbar-item`,(null==s?void 0:s.value)&&`${Ee}-disabled`],title:null==(t=o.value.toolbarTips)?void 0:t.mermaid},[p(to,{name:"mermaid"},null),e.showToolbarName&&p("div",{class:`${Ee}-toolbar-item-name`},[null==(n=o.value.toolbarTips)?void 0:n.mermaid])])]}});case"katex":return p(Ue,{relative:`#${g}`,visible:k.katex,onChange:e=>{k.katex=e},disabled:null==s?void 0:s.value,overlay:p("ul",{class:`${Ee}-menu`,onClick:()=>{k.katex=!1},role:"menu"},[p("li",{class:`${Ee}-menu-item ${Ee}-menu-item-katex`,onClick:()=>{$("katexInline")},role:"menuitem",tabindex:"0"},[null==(Be=o.value.katex)?void 0:Be.inline]),p("li",{class:`${Ee}-menu-item ${Ee}-menu-item-katex`,onClick:()=>{$("katexBlock")},role:"menuitem",tabindex:"0"},[null==(Ae=o.value.katex)?void 0:Ae.block])]),key:"bar-katex"},{default:()=>{var t,n;return[p("div",{class:[`${Ee}-toolbar-item`,(null==s?void 0:s.value)&&`${Ee}-disabled`],title:null==(t=o.value.toolbarTips)?void 0:t.katex},[p(to,{name:"formula"},null),e.showToolbarName&&p("div",{class:`${Ee}-toolbar-item-name`},[null==(n=o.value.toolbarTips)?void 0:n.katex])])]}})}};return d(()=>e.toolbars,()=>{y(()=>{b.value&&i(b.value)})},{immediate:!0}),()=>{var t;const n=j.value[0].map(e=>F(e)),l=j.value[1].map(e=>F(e));return p(h,null,[e.toolbars.length>0&&p("div",{class:`${Ee}-toolbar-wrapper`,ref:b,id:g},[p("div",{class:[`${Ee}-toolbar`,e.showToolbarName&&`${Ee}-stn`]},[p("div",{class:`${Ee}-toolbar-left`,ref:S},[n]),p("div",{class:`${Ee}-toolbar-right`},[l])])]),p("label",{for:`${g}_label`,style:{display:"none"},"aria-label":null==(t=o.value.imgTitleItem)?void 0:t.upload},null),p("input",{id:`${g}_label`,ref:T,accept:"image/*",type:"file",multiple:!0,style:{display:"none"}},null),p(wo,{linkVisible:w.linkVisible,clipVisible:w.clipVisible,type:w.type,onCancel:()=>{w.linkVisible=!1,w.clipVisible=!1},onOk:e=>{e&&$(w.type,{desc:e.desc,url:e.url,transform:"image"===w.type}),w.linkVisible=!1,w.clipVisible=!1}},null)])}}}),Co=async(e,t,o)=>{if(/^h[1-6]$/.test(e))return So(e,t);if("prettier"===e)return await jo(t,o);switch(e){case"bold":case"underline":case"italic":case"strikeThrough":case"sub":case"sup":case"codeRow":case"katexInline":case"katexBlock":return Io(e,t);case"quote":case"orderedList":case"unorderedList":case"task":return Bo(e,t);case"code":return Ao(o,t);case"table":return Oo(o);case"link":{const{desc:e="",url:t=""}=o,n=`[${e}](${t})`;return{text:n,options:{select:""===t,deviationStart:n.length-t.length-1,deviationEnd:-1}}}case"image":return Lo(o);case"flow":case"sequence":case"gantt":case"class":case"state":case"pie":case"relationship":case"journey":return Mo(e);case"universal":return Eo(t.getSelectedText(),o);default:return{text:"",options:{}}}},So=(e,t)=>{const o=e.slice(1),n="#".repeat(Number(o)),[l,i,a]=Ho(t,{wholeLine:!0});return{text:`${n} ${l}`,options:{deviationStart:n.length+1,replaceStart:i,replaceEnd:a}}},jo=async(e,t)=>{var o,n,l;const i=window.prettier||(null==(o=Ve.editorExtensions.prettier)?void 0:o.prettierInstance),a=[(null==(n=window.prettierPlugins)?void 0:n.markdown)||(null==(l=Ve.editorExtensions.prettier)?void 0:l.parserMarkdownInstance)];return i&&a[0]?{text:await i.format(e.getValue(),{parser:"markdown",plugins:a}),options:{select:!1,replaceAll:!0}}:(Ze.emit(t.editorId,at,{name:"prettier",message:"prettier is undefined"}),{text:e.getValue(),options:{select:!1,replaceAll:!0}})},To={bold:["**","**",2,-2],underline:["<u>","</u>",3,-4],italic:["*","*",1,-1],strikeThrough:["~~","~~",2,-2],sub:["~","~",1,-1],sup:["^","^",1,-1],codeRow:["`","`",1,-1],katexInline:["$","$",1,-1],katexBlock:["\n$$\n","\n$$\n",4,-4]},Io=(e,t)=>{const o=t.getSelectedText(),[n,l,i,a]=To[e];return{text:`${n}${o}${l}`,options:{deviationStart:i,deviationEnd:a}}},Fo={quote:"> ",unorderedList:"- ",orderedList:1,task:"- [ ] "},Bo=(e,t)=>{const[o,n,l]=Ho(t,{wholeLine:!0}),i=o.split("\n"),a=Fo[e],r="orderedList"===e?i.map((e,t)=>`${a+t}. ${e}`):i.map(e=>`${a}${e}`),s="orderedList"===e?"1. ":a.toString(),d=1===i.length?s.length:0;return{text:r.join("\n"),options:{deviationStart:d,replaceStart:n,replaceEnd:l}}},Ao=(e,t)=>{const[o,n,l]=Ho(t),i=e.mode||"language",a=`\n\`\`\`${i}\n${e.text||o||""}\n\`\`\`\n`;return{text:a,options:{deviationStart:4,deviationEnd:4+i.length-a.length,replaceStart:n,replaceEnd:l}}},Mo=e=>({text:`\n\`\`\`mermaid\n${{flow:"flowchart TD \n  Start --\x3e Stop",sequence:"sequenceDiagram\n  A->>B: hello!\n  B--\x3e>A: hi!",gantt:"gantt\ntitle Gantt Chart\ndateFormat  YYYY-MM-DD",class:"classDiagram\n  class Animal",state:"stateDiagram-v2\n  s1 --\x3e s2",pie:'pie\n  "Dogs" : 386\n  "Cats" : 85\n  "Rats" : 15',relationship:"erDiagram\n  CAR ||--o{ NAMED-DRIVER : allows",journey:"journey\n  title My Journey",...Ve.editorConfig.mermaidTemplate}[e]}\n\`\`\`\n`,options:{deviationStart:12,deviationEnd:-5}}),Lo=e=>{const{desc:t="",url:o="",urls:n}=e;let l="";const i=""===o&&(!n||n instanceof Array&&0===n.length);return l=n instanceof Array?n.reduce((e,t)=>{const{url:o="",alt:n="",title:l=""}="object"==typeof t?t:{url:t};return e+`![${n}](${o}${l?" '"+l+"'":""})\n`},""):`![${t}](${o})\n`,{text:l,options:{select:""===o,deviationStart:i?l.length-o.length-2:l.length,deviationEnd:i?-2:0}}},Oo=e=>{const{selectedShape:t={x:1,y:1}}=e,{x:o,y:n}=t;let l="\n| Column";for(let i=0;i<=n;i++)l+=" |";l+="\n|";for(let i=0;i<=n;i++)l+=" - |";for(let i=0;i<=o;i++){l+="\n|";for(let e=0;e<=n;e++)l+=" |"}return l+="\n",{text:l,options:{deviationStart:3,deviationEnd:10-l.length}}},Eo=(e,t)=>{const{generate:o}=t,n=o(e);return{text:n.targetValue,options:{select:n.select??!0,deviationStart:n.deviationStart||0,deviationEnd:n.deviationEnd||0}}},Ho=(e,t={wholeLine:!1})=>{const o=e.view.state,n=o.selection.main;if(n.empty){const e=o.doc.lineAt(n.from);return[o.doc.lineAt(n.from).text,e.from,e.to]}if(t.wholeLine){const e=o.doc.lineAt(n.from),t=o.doc.lineAt(n.to);return[o.doc.sliceString(e.from,t.to),e.from,t.to]}return[o.doc.sliceString(n.from,n.to),n.from,n.to]},zo="var(--md-color)",Ro="var(--md-color)",Do="#e5c07b",No="#d19a66",Po="var(--md-bk-color)",Vo="var(--md-bk-color)",qo="#528bff",Wo=[pe.theme({"&":{color:Ro,backgroundColor:Po},".cm-content":{caretColor:qo},".cm-cursor, .cm-dropCursor":{borderLeftColor:qo},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:"#ceedfa33"},".cm-panels":{backgroundColor:"#21252b",color:Ro},".cm-panels.cm-panels-top":{borderBottom:"1px solid var(--md-border-color)"},".cm-panels.cm-panels-bottom":{borderTop:"1px solid var(--md-border-color)"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#ceedfa33"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:Po,color:Ro,borderRight:"1px solid",borderColor:"var(--md-border-color)"},".cm-activeLineGutter":{backgroundColor:"#2c313a"},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"1px solid var(--md-border-color)",backgroundColor:Vo},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:Vo,borderBottomColor:Vo},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{color:Ro}}},{dark:!0}),Fe(Ae.define([{tag:Me.keyword,color:"#c678dd"},{tag:[Me.name,Me.deleted,Me.character,Me.propertyName,Me.macroName],color:zo},{tag:[Me.function(Me.variableName),Me.labelName],color:"#e5c07b"},{tag:[Me.color,Me.constant(Me.name),Me.standard(Me.name)],color:No},{tag:[Me.definition(Me.name),Me.separator],color:Ro},{tag:[Me.typeName,Me.className,Me.number,Me.changed,Me.annotation,Me.modifier,Me.self,Me.namespace],color:"#e5c07b"},{tag:[Me.operator,Me.operatorKeyword,Me.url,Me.escape,Me.regexp,Me.link,Me.special(Me.string)],color:"#56b6c2"},{tag:[Me.meta,Me.comment],color:Do},{tag:Me.strong,fontWeight:"bold"},{tag:Me.emphasis,fontStyle:"italic"},{tag:Me.strikethrough,textDecoration:"line-through"},{tag:Me.link,color:Do,textDecoration:"underline"},{tag:Me.heading,fontWeight:"bold",color:zo},{tag:[Me.atom,Me.bool,Me.special(Me.variableName)],color:No},{tag:[Me.processingInstruction,Me.string,Me.inserted],color:"var(--md-color)"},{tag:Me.invalid,color:"#ffffff"}]))],_o="var(--md-color)",Uo="#3f4a54",Go="#2d8cf0",Ko="#d19a66",Zo="var(--md-bk-color)",Jo="var(--md-bk-color)",Xo="#3f4a54",Yo=[pe.theme({"&":{color:Uo,backgroundColor:Zo},".cm-content":{caretColor:Xo},".cm-cursor, .cm-dropCursor":{borderLeftColor:Xo},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:"#bad5fa"},".cm-panels":{backgroundColor:"#f6f6f6",color:Uo},".cm-panels.cm-panels-top":{borderBottom:"1px solid var(--md-border-color)"},".cm-panels.cm-panels-bottom":{borderTop:"1px solid var(--md-border-color)"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#ceedfa33"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:Zo,color:Uo,borderRight:"1px solid",borderColor:"var(--md-border-color)"},".cm-activeLineGutter":{backgroundColor:"#ceedfa33"},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"1px solid var(--md-border-color)",backgroundColor:Jo},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:Jo,borderBottomColor:Jo},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{color:Uo}}}),Fe(Ae.define([{tag:Me.keyword,color:"#c678dd"},{tag:[Me.name,Me.deleted,Me.character,Me.propertyName,Me.macroName],color:_o},{tag:[Me.function(Me.variableName),Me.labelName],color:"#2d8cf0"},{tag:[Me.color,Me.constant(Me.name),Me.standard(Me.name)],color:Ko},{tag:[Me.definition(Me.name),Me.separator],color:Uo},{tag:[Me.typeName,Me.className,Me.number,Me.changed,Me.annotation,Me.modifier,Me.self,Me.namespace],color:"#e5c07b"},{tag:[Me.operator,Me.operatorKeyword,Me.url,Me.escape,Me.regexp,Me.link,Me.special(Me.string)],color:"#56b6c2"},{tag:[Me.meta,Me.comment],color:Go},{tag:Me.strong,fontWeight:"bold"},{tag:Me.emphasis,fontStyle:"italic"},{tag:Me.strikethrough,textDecoration:"line-through"},{tag:Me.link,color:Go,textDecoration:"underline"},{tag:Me.heading,fontWeight:"bold",color:_o},{tag:[Me.atom,Me.bool,Me.special(Me.variableName)],color:Ko},{tag:[Me.processingInstruction,Me.string,Me.inserted],color:"#3f4a54"},{tag:Me.invalid,color:"#fff"}]))],Qo=(e,t,o,n,l)=>(i,a,r,s)=>{const d=`${e}${t}${o}${n}`,c=r+a.label.length+("title"===l?o.length:0);i.dispatch({changes:{from:r,to:s,insert:d},selection:ke.create([ke.range(r+a.label.length+("title"===l?1:-t.length),c),ke.cursor(c)],1)}),i.focus()},en=e=>(t,o,n,l)=>{const i=e.slice(l-n);t.dispatch(t.state.replaceSelection(`${i} `))},tn=e=>{const t=e=>{const t=e.matchBefore(/^#+|^-\s*\[*\s*\]*|`+|\[|!\[*|^\|\s?\|?|\$\$?|!+\s*\w*/);return null===t||t.from==t.to&&e.explicit?null:{from:t.from,options:[...["h2","h3","h4","h5","h6"].map((e,t)=>{const o=new Array(t+2).fill("#").join("");return{label:o,type:"text",apply:en(o)}}),...["unchecked","checked"].map(e=>{const t="checked"===e?"- [x]":"- [ ]";return{label:t,type:"text",apply:en(t)}}),...[["`",""],["```","language"],["```mermaid\n",""]].map(e=>({label:`${e[0]}${e[1]}`,type:"text",apply:Qo(e[0],e[1],"","`"===e[0]?"`":"\n```","type")})),{label:"[]()",type:"text"},{label:"![]()",type:"text"},{label:"| |",type:"text",detail:"table",apply:"| col | col | col |\n| - | - | - |\n| content | content | content |\n| content | content | content |"},{label:"$",type:"text",apply:Qo("$","","","$","type")},{label:"$$",type:"text",apply:Qo("$$","","\n","\n$$","title")},...["note","abstract","info","tip","success","question","warning","failure","danger","bug","example","quote","hint","caution","error","attention"].map(e=>({label:`!!! ${e}`,type:"text",apply:Qo("!!!",` ${e}`," Title","\n\n!!!","title")}))]}};return Le({override:e?[t,...e]:[t]})},on=e=>{const t=new be;return o=>(t.get(e.state)?e.dispatch({effects:t.reconfigure(o)}):e.dispatch({effects:$e.appendConfig.of(t.of(o))}),!0)};class nn{constructor(e){po(this,"view"),po(this,"maxLength",Number.MAX_SAFE_INTEGER),po(this,"toggleTabSize"),po(this,"togglePlaceholder"),po(this,"setExtensions"),po(this,"toggleDisabled"),po(this,"toggleReadOnly"),po(this,"toggleMaxlength"),this.view=e,this.toggleTabSize=on(this.view),this.togglePlaceholder=on(this.view),this.setExtensions=on(this.view),this.toggleDisabled=on(this.view),this.toggleReadOnly=on(this.view),this.toggleMaxlength=on(this.view)}getValue(){return this.view.state.doc.toString()}setValue(e,t=0,o=this.view.state.doc.length){this.view.dispatch({changes:{from:t,to:o,insert:e}})}getSelectedText(){const{from:e,to:t}=this.view.state.selection.main;return this.view.state.sliceDoc(e,t)}replaceSelectedText(e,t,o){const n={select:!0,deviationStart:0,deviationEnd:0,replaceAll:!1,replaceStart:-1,replaceEnd:-1,...t};try{if(n.replaceAll){if(this.setValue(e),e.length>this.maxLength)throw new Error("The input text is too long");return}if(this.view.state.doc.length-this.getSelectedText().length+e.length>this.maxLength)throw new Error("The input text is too long");const{from:t}=this.view.state.selection.main;-1!==n.replaceStart?this.view.dispatch({changes:{from:n.replaceStart,to:n.replaceEnd,insert:e}}):this.view.dispatch(this.view.state.replaceSelection(e)),n.select&&this.view.dispatch({selection:{anchor:-1===n.replaceStart?t+n.deviationStart:n.replaceStart+n.deviationStart,head:-1===n.replaceStart?t+e.length+n.deviationEnd:n.replaceStart+e.length+n.deviationEnd}}),this.view.focus()}catch(l){if("The input text is too long"!==l.message)throw l;Ze.emit(o,at,{name:"overlength",message:l.message,data:e})}}setTabSize(e){this.toggleTabSize([ye.tabSize.of(e),Be.of(" ".repeat(e))])}setPlaceholder(e){this.togglePlaceholder(ge(e))}focus(e){if(this.view.focus(),!e)return;let t=0,o=0,n=0;switch(e){case"start":break;case"end":t=o=n=this.getValue().length;break;default:t=e.rangeAnchor||e.cursorPos,o=e.rangeHead||e.cursorPos,n=e.cursorPos}this.view.dispatch({scrollIntoView:!0,selection:ke.create([ke.range(t,o),ke.cursor(n)],1)})}setDisabled(e){this.toggleDisabled([pe.editable.of(!e)])}setReadOnly(e){this.toggleReadOnly([ye.readOnly.of(e)])}setMaxLength(e){this.maxLength=e,this.toggleMaxlength([ye.changeFilter.of(t=>t.newDoc.length<=e)])}}pe.EDIT_CONTEXT=!1;const ln=l(),an=s({name:"MDEditorContent",props:qt,setup(e,t){const o=f("editorId"),n=C(""),l=C(),i=C(),{inputWrapperRef:a,codeMirrorUt:s,resetHistory:m}=(e=>{const t=f("tabWidth"),o=f("editorId"),n=f("theme"),l=C(),i=j(),a=C(!1),s=new be,u=new be,m=new be,p=new be,g=new be,v=(h=o,b=e,[{key:"Ctrl-b",mac:"Cmd-b",run:()=>(Ze.emit(h,rt,"bold"),!0)},{key:"Ctrl-d",mac:"Cmd-d",run:Ie,preventDefault:!0},{key:"Ctrl-s",mac:"Cmd-s",run:e=>(Ze.emit(h,Je,e.state.doc.toString()),!0),shift:()=>(Ze.emit(h,rt,"strikeThrough"),!0)},{key:"Ctrl-u",mac:"Cmd-u",preventDefault:!0,run:()=>(Ze.emit(h,rt,"underline"),!0),shift:()=>(Ze.emit(h,rt,"unorderedList"),!0)},{key:"Ctrl-i",mac:"Cmd-i",preventDefault:!0,run:()=>(Ze.emit(h,rt,"italic"),!0),shift:()=>(Ze.emit(h,dt,"image"),!0)},{key:"Ctrl-1",mac:"Cmd-1",run:()=>(Ze.emit(h,rt,"h1"),!0)},{key:"Ctrl-2",mac:"Cmd-2",run:()=>(Ze.emit(h,rt,"h2"),!0)},{key:"Ctrl-3",mac:"Cmd-3",run:()=>(Ze.emit(h,rt,"h3"),!0)},{key:"Ctrl-4",mac:"Cmd-4",run:()=>(Ze.emit(h,rt,"h4"),!0)},{key:"Ctrl-5",mac:"Cmd-5",run:()=>(Ze.emit(h,rt,"h5"),!0)},{key:"Ctrl-6",mac:"Cmd-6",run:()=>(Ze.emit(h,rt,"h6"),!0)},{key:"Ctrl-ArrowUp",mac:"Cmd-ArrowUp",run:()=>(Ze.emit(h,rt,"sup"),!0)},{key:"Ctrl-ArrowDown",mac:"Cmd-ArrowDown",run:()=>(Ze.emit(h,rt,"sub"),!0)},{key:"Ctrl-o",mac:"Cmd-o",run:()=>(Ze.emit(h,rt,"orderedList"),!0)},{key:"Ctrl-c",mac:"Cmd-c",shift:()=>(Ze.emit(h,rt,"code"),!0),any:(e,t)=>!(!t.ctrlKey&&!t.metaKey||!t.altKey||"KeyC"!==t.code||(Ze.emit(h,rt,"codeRow"),0))},{key:"Ctrl-l",mac:"Cmd-l",run:()=>(Ze.emit(h,dt,"link"),!0)},{key:"Ctrl-f",mac:"Cmd-f",shift:()=>!b.noPrettier&&(Ze.emit(h,rt,"prettier"),!0)},{any:(e,t)=>!(!t.ctrlKey&&!t.metaKey||!t.altKey||!t.shiftKey||"KeyT"!==t.code||(Ze.emit(h,rt,"table"),0))},...Oe]);var h,b;const y=()=>[...v,...we,...xe,Ce],k=((e,t)=>{const o=f("editorId"),n=e=>{e instanceof Promise?e.then(e=>{Ze.emit(o,rt,"universal",{generate:()=>({targetValue:e})})}).catch(e=>{}):Ze.emit(o,rt,"universal",{generate:()=>({targetValue:e})})};return l=>{var i,a,r;if(!l.clipboardData)return;if(l.clipboardData.files.length>0){const{files:e}=l.clipboardData;return Ze.emit(o,st,Array.from(e).filter(e=>/image\/.*/.test(e.type))),void l.preventDefault()}const s=l.clipboardData.getData("text/plain"),d=(null==(i=t.value)?void 0:i.view.state.selection.main.to)||0,c=(null==(a=t.value)?void 0:a.view.state.doc.lineAt(d).from)||0,u=(null==(r=t.value)?void 0:r.view.state.doc.sliceString(c,d))||"",m=/!\[.*\]\(\s*$/.test(u),p=/!\[.*\]\((.*)\s?.*\)/.test(s);if(m){const t=e.transformImgUrl(s);return n(t),void l.preventDefault()}if(p){const t=s.match(new RegExp("(?<=!\\[.*\\]\\()([^)\\s]+)(?=\\s?[\"']?.*[\"']?\\))","g"));return t?Promise.all(t.map(t=>e.transformImgUrl(t))).then(e=>{n(e.reduce((e,o,n)=>e.replace(t[n],o),s))}):n(s),void l.preventDefault()}if(e.autoDetectCode&&l.clipboardData.types.includes("vscode-editor-data")){const e=JSON.parse(l.clipboardData.getData("vscode-editor-data"));return Ze.emit(o,rt,"code",{mode:e.mode,text:l.clipboardData.getData("text/plain")}),void l.preventDefault()}e.maxlength&&s.length+e.modelValue.length>e.maxlength&&Ze.emit(o,at,{name:"overlength",message:"The input text is too long",data:s})}})(e,i),$={paste:k,blur:e.onBlur,focus:e.onFocus,drop:e.onDrop,compositionstart:()=>{a.value=!0},compositionend:(t,o)=>{a.value=!1,e.updateModelValue(o.state.doc.toString())},input:t=>{e.onInput&&e.onInput(t);const{data:n}=t;e.maxlength&&e.modelValue.length+n.length>e.maxlength&&Ze.emit(o,at,{name:"overlength",message:"The input text is too long",data:n})}},w=[me.of(y()),p.of(Se()),s.of(he({codeLanguages:ve})),pe.lineWrapping,pe.updateListener.of(t=>{t.docChanged&&(e.onChange(t.state.doc.toString()),a.value||e.updateModelValue(t.state.doc.toString()))}),g.of(pe.domEventHandlers($)),fe()],x=()=>{const t=[...w,u.of("light"===n.value?Yo:Wo),m.of(tn(e.completions))];return Ve.codeMirrorExtensions(n.value,t,y(),{editorId:o})};return c(()=>{const n=new pe({doc:e.modelValue,parent:l.value,extensions:[x()]}),a=new nn(n);i.value=a,setTimeout(()=>{a.setTabSize(t),a.setDisabled(e.disabled),a.setReadOnly(e.readonly),e.placeholder&&a.setPlaceholder(e.placeholder),"number"==typeof e.maxlength&&a.setMaxLength(e.maxlength),e.autofocus&&n.focus()},0),Ze.on(o,{name:ct,callback(){je(n)}}),Ze.on(o,{name:ut,callback(){Te(n)}}),Ze.on(o,{name:rt,async callback(t,n={}){var l,a;if("image"===t&&n.transform){const a=e.transformImgUrl(n.url);if(a instanceof Promise)a.then(async e=>{var l;const{text:a,options:r}=await Co(t,i.value,{...n,url:e});null==(l=i.value)||l.replaceSelectedText(a,r,o)}).catch(e=>{});else{const{text:e,options:r}=await Co(t,i.value,{...n,url:a});null==(l=i.value)||l.replaceSelectedText(e,r,o)}}else{const{text:e,options:l}=await Co(t,i.value,n);null==(a=i.value)||a.replaceSelectedText(e,l,o)}}}),Ze.on(o,{name:gt,callback:r(e=>{var t;const o={...$},n=Object.keys($);for(const l in e){const t=l;n.includes(t)?o[t]=(o,n)=>{e[t](o,n),o.defaultPrevented||$[t](o,n)}:o[t]=e[t]}null==(t=i.value)||t.view.dispatch({effects:g.reconfigure(pe.domEventHandlers(o))})})}),Ze.on(o,{name:vt,callback:(e,t)=>{const o=n.state.doc.line(e);n.dispatch(n.state.update({changes:{from:o.from,to:o.to,insert:t}}))}}),Ze.on(o,{name:ht,callback(){Ze.emit(o,bt,n)}}),Ze.emit(o,bt,n)}),d(n,()=>{var e;null==(e=i.value)||e.view.dispatch({effects:u.reconfigure("light"===n.value?Yo:Wo)})},{deep:!0}),d(()=>e.completions,()=>{var t;null==(t=i.value)||t.view.dispatch({effects:m.reconfigure(tn(e.completions))})},{deep:!0}),d(()=>e.modelValue,()=>{var t,o;(null==(t=i.value)?void 0:t.getValue())!==e.modelValue&&(null==(o=i.value)||o.setValue(e.modelValue))}),d(()=>e.placeholder,()=>{var t;null==(t=i.value)||t.setPlaceholder(e.placeholder)}),d(()=>e.disabled,()=>{var t;null==(t=i.value)||t.setDisabled(e.disabled)}),d(()=>e.readonly,()=>{var t;null==(t=i.value)||t.setDisabled(e.readonly)}),d(()=>e.maxlength,()=>{var t;e.maxlength&&(null==(t=i.value)||t.setMaxLength(e.maxlength))}),{inputWrapperRef:l,codeMirrorUt:i,resetHistory(){var e,t;null==(e=i.value)||e.view.dispatch({effects:p.reconfigure([])}),null==(t=i.value)||t.view.dispatch({effects:p.reconfigure(Se())})}}})(e),{inputWrapperStyle:g,resizeOperateStyle:h}=((e,t,o)=>{const n=v(()=>/px$/.test(`${e.inputBoxWidth}`)?"50%":e.inputBoxWidth),l=x({resizedWidth:n.value}),i=x({width:n.value}),a=x({left:n.value,display:"initial"}),r=o=>{var n,r,s;const d=(null==(n=t.value)?void 0:n.offsetWidth)||0,c=(null==(r=t.value)?void 0:r.getBoundingClientRect().x)||0;let u=o.x-c;u/d<qe?u=d*qe:u>d-d*qe&&(u=d-d*qe);const m=u/d*100+"%";i.width=m,a.left=m,l.resizedWidth=m,null==(s=e.oninputBoxWidthChange)||s.call(e,m)},s=e=>{e.target===o.value&&document.addEventListener("mousemove",r)},m=()=>{document.removeEventListener("mousemove",r)};return d([o],()=>{document.removeEventListener("mousedown",s),document.removeEventListener("mouseup",m),document.addEventListener("mousedown",s),document.addEventListener("mouseup",m)}),c(()=>{document.addEventListener("mousedown",s),document.addEventListener("mouseup",m)}),u(()=>{document.removeEventListener("mousedown",s),document.removeEventListener("mouseup",m)}),d([n],([e])=>{l.resizedWidth=e,i.width=e,a.left=e}),d([S(e.setting,"htmlPreview"),S(e.setting,"preview"),S(e.setting,"previewOnly")],()=>{e.setting.previewOnly?(i.width="0%",a.display="none"):e.setting.htmlPreview||e.setting.preview?(i.width=l.resizedWidth,a.display="initial"):(i.width="100%",a.display="none")},{immediate:!0}),{inputWrapperStyle:i,resizeOperateStyle:a}})(e,l,i);return((e,t,o)=>{const n=f("editorId");let l=()=>{},i=()=>{};const a=()=>{var t;l();const a=null==(t=o.value)?void 0:t.view.contentDOM.getRootNode(),r=a.querySelector(`#${n} .cm-scroller`),s=a.querySelector(`[id="${n}-preview-wrapper"]`),d=a.querySelector(`[id="${n}-html-wrapper"]`);if(s||d){const t=s?ao:io,n=s||d;[i,l]=t(r,n,o.value),e.scrollAuto&&i()}};d([t,S(e.setting,"preview"),S(e.setting,"htmlPreview"),S(e.setting,"fullscreen"),S(e.setting,"pageFullscreen")],()=>{y(a)}),d(()=>e.scrollAuto,e=>{e?i():l()}),d(()=>e.setting.previewOnly,e=>{e?l():i()}),c(a)})(e,n,s),t.expose({getSelectedText(){var e;return null==(e=s.value)?void 0:e.getSelectedText()},focus(e){var t;null==(t=s.value)||t.focus(e)},resetHistory:m,getEditorView(){var e;return null==(e=s.value)?void 0:e.view}}),()=>p("div",{class:`${Ee}-content`},[p("div",{class:`${Ee}-content-wrapper`,ref:l},[p("div",{class:`${Ee}-input-wrapper`,style:g,ref:a},null),(e.setting.htmlPreview||e.setting.preview)&&p("div",{class:`${Ee}-resize-operate`,style:h,ref:i},null),p(_t,{modelValue:e.modelValue,onChange:e.onChange,setting:e.setting,onHtmlChanged:t=>{n.value=t,e.onHtmlChanged(t)},onGetCatalog:e.onGetCatalog,mdHeadingId:e.mdHeadingId,noMermaid:e.noMermaid,sanitize:e.sanitize,noKatex:e.noKatex,formatCopiedText:e.formatCopiedText,noHighlight:e.noHighlight,noImgZoomIn:e.noImgZoomIn,sanitizeMermaid:e.sanitizeMermaid,codeFoldable:e.codeFoldable,autoFoldThreshold:e.autoFoldThreshold,onRemount:e.onRemount},null)]),e.catalogVisible&&p(so,{theme:e.theme,class:`${Ee}-catalog-editor ${Ee}-catalog-${e.catalogLayout}`,editorId:o,mdHeadingId:e.mdHeadingId,key:"internal-catalog",scrollElementOffsetTop:2,syncWith:e.setting.preview?"preview":"editor",onClick:(t,o)=>{var n,l;if(!e.setting.preview&&void 0!==o.line){t.preventDefault();const e=null==(n=s.value)?void 0:n.view;if(e){const t=e.state.doc.line(o.line+1),n=null==(l=e.lineBlockAt(t.from))?void 0:l.top,i=e.scrollDOM;ln(i,n)}}},catalogMaxDepth:e.catalogMaxDepth},null)])}}),rn=s({props:{modelValue:{type:String,default:""}},setup(e){const t=f("usedLanguageText");return()=>{var o,n;return p("div",{class:`${Ee}-footer-item`},[p("label",{class:`${Ee}-footer-label`},[`${null==(o=t.value.footer)?void 0:o.markdownTotal}:`]),p("span",null,[(null==(n=e.modelValue)?void 0:n.length)||0])])}}}),sn={checked:{type:Boolean,default:!1},onChange:{type:Function,default:()=>{}},disabled:{type:Boolean,default:void 0}},dn=s({name:`${Ee}-checkbox`,props:sn,setup:e=>()=>p("div",{class:[`${Ee}-checkbox`,e.checked&&`${Ee}-checkbox-checked`,e.disabled&&`${Ee}-disabled`],onClick:()=>{e.disabled||e.onChange(!e.checked)}},null)}),cn=s({props:{scrollAuto:{type:Boolean},onScrollAutoChange:{type:Function,default:()=>{}}},setup(e){const t=f("usedLanguageText"),o=f("disabled");return()=>{var n;return p("div",{class:[`${Ee}-footer-item`,(null==o?void 0:o.value)&&`${Ee}-disabled`]},[p("label",{class:`${Ee}-footer-label`,onClick:()=>{e.onScrollAutoChange(!e.scrollAuto)}},[null==(n=null==t?void 0:t.value.footer)?void 0:n.scrollAuto]),p(dn,{checked:e.scrollAuto,onChange:e.onScrollAutoChange,disabled:null==o?void 0:o.value},null)])}}}),un=s({name:"MDEditorFooter",props:{modelValue:{type:String,default:""},footers:{type:Array,default:[]},scrollAuto:{type:Boolean},noScrollAuto:{type:Boolean},onScrollAutoChange:{type:Function,default:()=>{}},defFooters:{type:Object}},setup(e){const t=f("theme"),o=f("language"),n=f("disabled"),l=v(()=>{const t=e.footers.indexOf("=");return[-1===t?e.footers:e.footers.slice(0,t),-1===t?[]:e.footers.slice(t,Number.MAX_SAFE_INTEGER)]}),i=l=>{var i,a,r,s,d,c;if(!Ne.includes(l)){if(e.defFooters instanceof Array){const s=e.defFooters[l];return s?m(s,{theme:(null==(i=s.props)?void 0:i.theme)||t.value,language:(null==(a=s.props)?void 0:a.language)||o.value,disabled:(null==(r=s.props)?void 0:r.disabled)||(null==n?void 0:n.value)}):""}if(e.defFooters&&e.defFooters.children instanceof Array){const i=e.defFooters.children[l];return i?m(i,{theme:(null==(s=i.props)?void 0:s.theme)||t.value,language:(null==(d=i.props)?void 0:d.language)||o.value,disabled:(null==(c=i.props)?void 0:c.disabled)||(null==n?void 0:n.value)}):""}return""}switch(l){case"markdownTotal":return p(rn,{modelValue:e.modelValue},null);case"scrollSwitch":return!e.noScrollAuto&&p(cn,{scrollAuto:e.scrollAuto,onScrollAutoChange:e.onScrollAutoChange},null)}};return()=>{const e=l.value[0].map(e=>i(e)),t=l.value[1].map(e=>i(e));return p("div",{class:`${Ee}-footer`},[p("div",{class:`${Ee}-footer-left`},[e]),p("div",{class:`${Ee}-footer-right`},[t])])}}}),mn=s({name:"MdEditorV3",props:Zt,emits:Xt,setup(e,t){const{noKatex:o,noMermaid:n,noPrettier:l,noUploadImg:i,noHighlight:a}=e,r=x({scrollAuto:e.scrollAuto}),s=C(),m=C(),{editorId:f}=((e,t)=>(g("tabWidth",e.tabWidth),g("disabled",v(()=>e.disabled)),Ut(e,t)))(e,s),[h,b]=((e,t,o)=>{const{editorId:n}=o,l=x({pageFullscreen:e.pageFullscreen,fullscreen:!1,preview:e.preview,htmlPreview:!e.preview&&e.htmlPreview,previewOnly:!1}),i=x({...l});let a="";const r=()=>{l.pageFullscreen||l.fullscreen?document.body.style.overflow="hidden":document.body.style.overflow=a};return d(()=>[l.pageFullscreen,l.fullscreen],r),c(()=>{Ze.on(n,{name:st,callback(o,l){const i=e=>{Ze.emit(n,rt,"image",{desc:"",urls:e}),null==l||l()};e.onUploadImg?e.onUploadImg(o,i):t.emit("onUploadImg",o,i)}}),a=document.body.style.overflow,r()}),[l,(e,t)=>{const o=void 0===t?!l[e]:t;switch(e){case"preview":l.htmlPreview=!1,l.previewOnly=!1;break;case"htmlPreview":l.preview=!1,l.previewOnly=!1;break;case"previewOnly":o?l.preview||l.htmlPreview||(l.preview=!0):(i.preview||(l.preview=!1),i.htmlPreview||(l.htmlPreview=!1))}i[e]=o,l[e]=o}]})(e,t,{editorId:f}),y=((e,t)=>{const{editorId:o}=t,n=C(!1);return c(()=>{Ze.on(o,{name:Xe,callback:e=>{n.value=void 0===e?!n.value:e}})}),n})(0,{editorId:f});return((e,t,o)=>{const{editorId:n}=o,l=x({buildFinished:!1,html:""});d(()=>e.modelValue,()=>{l.buildFinished=!1}),c(()=>{Ze.on(n,{name:it,callback(e){l.buildFinished=!0,l.html=e}}),Ze.on(n,{name:Je,callback(){const o=new Promise(e=>{if(l.buildFinished)e(l.html);else{const t=o=>{e(o),Ze.remove(n,it,t)};Ze.on(n,{name:it,callback:t})}});e.onSave?e.onSave(e.modelValue,o):t.emit("onSave",e.modelValue,o)}})})})(e,t,{editorId:f}),(e=>{const{noPrettier:t,noUploadImg:o}=e,{editorExtensions:n,editorExtensionsAttrs:l}=Ve,i=t||n.prettier.prettierInstance,a=t||n.prettier.parserMarkdownInstance,r=o||n.cropper.instance;c(()=>{if(!r){const{js:e={},css:t={}}=l.cropper||{};wt("link",{...t,rel:"stylesheet",href:n.cropper.css,id:Tt.croppercss}),wt("script",{...e,src:n.cropper.js,id:Tt.cropperjs})}if(!i){const{standaloneJs:e={}}=l.prettier||{};wt("script",{...e,src:n.prettier.standaloneJs,id:Tt.prettier})}if(!a){const{parserMarkdownJs:e={}}=l.prettier||{};wt("script",{...e,src:n.prettier.parserMarkdownJs,id:Tt.prettierMD})}})})(e),((e,t,o)=>{const{editorId:n}=o;c(()=>{Ze.on(n,{name:at,callback:o=>{var n;null==(n=e.onError)||n.call(e,o),t.emit("onError",o)}})})})(e,t,{editorId:f}),((e,t,o)=>{const{editorId:n,catalogVisible:l,setting:i,updateSetting:a,codeRef:r}=o;d(()=>i.pageFullscreen,e=>{Ze.emit(n,Qe,e)}),d(()=>i.fullscreen,e=>{Ze.emit(n,et,e)}),d(()=>i.preview,e=>{Ze.emit(n,tt,e)}),d(()=>i.previewOnly,e=>{Ze.emit(n,ot,e)}),d(()=>i.htmlPreview,e=>{Ze.emit(n,nt,e)}),d(l,e=>{Ze.emit(n,lt,e)});const s={on(e,t){switch(e){case"pageFullscreen":Ze.on(n,{name:Qe,callback(e){t(e)}});break;case"fullscreen":Ze.on(n,{name:et,callback(e){t(e)}});break;case"preview":Ze.on(n,{name:tt,callback(e){t(e)}});break;case"previewOnly":Ze.on(n,{name:ot,callback(e){t(e)}});break;case"htmlPreview":Ze.on(n,{name:nt,callback(e){t(e)}});break;case"catalog":Ze.on(n,{name:lt,callback(e){t(e)}})}},togglePageFullscreen(e){a("pageFullscreen",e)},toggleFullscreen(e){Ze.emit(n,Ye,e)},togglePreview(e){a("preview",e)},togglePreviewOnly(e){a("previewOnly",e)},toggleHtmlPreview(e){a("htmlPreview",e)},toggleCatalog(e){Ze.emit(n,Xe,e)},triggerSave(){Ze.emit(n,Je)},insert(e){Ze.emit(n,rt,"universal",{generate:e})},focus(e){var t;null==(t=r.value)||t.focus(e)},rerender(){Ze.emit(n,ft)},getSelectedText(){var e;return null==(e=r.value)?void 0:e.getSelectedText()},resetHistory(){var e;null==(e=r.value)||e.resetHistory()},domEventHandlers(e){Ze.emit(n,gt,e)},execCommand(e){Ze.emit(n,rt,e)},getEditorView(){var e;return null==(e=r.value)?void 0:e.getEditorView()}};t.expose(s)})(0,t,{editorId:f,catalogVisible:y,setting:h,updateSetting:b,codeRef:m}),u(()=>{Ze.clear(f)}),()=>{const d=We({props:e,ctx:t},"defToolbars"),c=We({props:e,ctx:t},"defFooters");return p("div",{id:f,class:[Ee,e.class,"dark"===e.theme&&`${Ee}-dark`,h.fullscreen||h.pageFullscreen?`${Ee}-fullscreen`:""],style:e.style,ref:s},[e.toolbars.length>0&&p(xo,{noPrettier:l,toolbars:e.toolbars,toolbarsExclude:e.toolbarsExclude,setting:h,updateSetting:b,tableShape:e.tableShape,defToolbars:d,noUploadImg:i,showToolbarName:e.showToolbarName,catalogVisible:y.value,codeTheme:e.codeTheme,insertLinkDirect:e.insertLinkDirect},null),p(an,{ref:m,modelValue:e.modelValue,setting:h,mdHeadingId:e.mdHeadingId,noMermaid:n,noPrettier:l,sanitize:e.sanitize,placeholder:e.placeholder,noKatex:o,scrollAuto:r.scrollAuto,formatCopiedText:e.formatCopiedText,autofocus:e.autoFocus,disabled:e.disabled,readonly:e.readOnly,maxlength:e.maxLength,autoDetectCode:e.autoDetectCode,noHighlight:a,updateModelValue:e=>{t.emit("update:modelValue",e)},onChange:o=>{var n;null==(n=e.onChange)||n.call(e,o),t.emit("onChange",o)},onHtmlChanged:o=>{var n;null==(n=e.onHtmlChanged)||n.call(e,o),t.emit("onHtmlChanged",o)},onGetCatalog:o=>{var n;null==(n=e.onGetCatalog)||n.call(e,o),t.emit("onGetCatalog",o)},onBlur:o=>{var n;null==(n=e.onBlur)||n.call(e,o),t.emit("onBlur",o)},onFocus:o=>{var n;null==(n=e.onFocus)||n.call(e,o),t.emit("onFocus",o)},onInput:o=>{var n;null==(n=e.onInput)||n.call(e,o),t.emit("onInput",o)},completions:e.completions,catalogVisible:y.value,theme:e.theme,noImgZoomIn:e.noImgZoomIn,onDrop:o=>{var n;null==(n=e.onDrop)||n.call(e,o),t.emit("onDrop",o)},inputBoxWidth:e.inputBoxWidth,oninputBoxWidthChange:o=>{var n;null==(n=e.oninputBoxWidthChange)||n.call(e,o),t.emit("oninputBoxWidthChange",o)},sanitizeMermaid:e.sanitizeMermaid,transformImgUrl:e.transformImgUrl,codeFoldable:e.codeFoldable,autoFoldThreshold:e.autoFoldThreshold,onRemount:()=>{var o;null==(o=e.onRemount)||o.call(e),t.emit("onRemount")},catalogLayout:e.catalogLayout,catalogMaxDepth:e.catalogMaxDepth},null),e.footers.length>0&&p(un,{modelValue:e.modelValue,footers:e.footers,defFooters:c,noScrollAuto:!h.preview&&!h.htmlPreview||h.previewOnly,scrollAuto:r.scrollAuto,onScrollAutoChange:e=>r.scrollAuto=e},null)])}}});mn.install=e=>(e.component(mn.name,mn),e.use(co).use(Ge).use(uo).use(so).use(Yt),e);const pn=s({name:"NormalFooterToolbar",props:{onClick:{type:Function,default:void 0},language:{type:String,default:void 0},theme:{type:String,default:void 0},disabled:{type:Boolean,default:void 0}},emits:["onClick"],setup:(e,t)=>()=>{const o=We({props:e,ctx:t});return p("div",{class:[`${Ee}-footer-item`,e.disabled&&`${Ee}-disabled`],onClick:o=>{var n;e.disabled||(null==(n=e.onClick)||n.call(e,o),t.emit("onClick",o))}},[o])}});pn.install=e=>(e.component(pn.name,pn),e);var fn={exports:{}},gn={},vn={exports:{}},hn={};var bn=/javascript\s*\:/gim;hn.whiteList={"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1},hn.getDefaultWhiteList=function(){return{"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1}},hn.onAttr=function(e,t,o){},hn.onIgnoreAttr=function(e,t,o){},hn.safeAttrValue=function(e,t){return bn.test(t)?"":t};var yn=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},kn=hn;function $n(e){return null==e}function wn(e){(e=function(e){var t={};for(var o in e)t[o]=e[o];return t}(e||{})).whiteList=e.whiteList||kn.whiteList,e.onAttr=e.onAttr||kn.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||kn.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||kn.safeAttrValue,this.options=e}wn.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,o=t.whiteList,n=t.onAttr,l=t.onIgnoreAttr,i=t.safeAttrValue;return function(e,t){var o;";"!==(o=e,e=String.prototype.trimRight?o.trimRight():o.replace(/(\s*$)/g,""))[e.length-1]&&(e+=";");var n=e.length,l=!1,i=0,a=0,r="";function s(){if(!l){var o=yn(e.slice(i,a)),n=o.indexOf(":");if(-1!==n){var s=yn(o.slice(0,n)),d=yn(o.slice(n+1));if(s){var c=t(i,r.length,s,d,o);c&&(r+=c+"; ")}}}i=a+1}for(;a<n;a++){var d=e[a];if("/"===d&&"*"===e[a+1]){var c=e.indexOf("*/",a+2);if(-1===c)break;i=(a=c+1)+1,l=!1}else"("===d?l=!0:")"===d?l=!1:";"===d?l||s():"\n"===d&&s()}return yn(r)}(e,function(e,t,a,r,s){var d=o[a],c=!1;if(!0===d?c=d:"function"==typeof d?c=d(r):d instanceof RegExp&&(c=d.test(r)),!0!==c&&(c=!1),r=i(a,r)){var u,m={position:t,sourcePosition:e,source:s,isWhite:c};return c?$n(u=n(a,r,m))?a+":"+r:u:$n(u=l(a,r,m))?void 0:u}})};var xn=wn;!function(e,t){var o=hn,n=xn;for(var l in(t=e.exports=function(e,t){return new n(t).process(e)}).FilterCSS=n,o)t[l]=o[l];"undefined"!=typeof window&&(window.filterCSS=e.exports)}(vn,vn.exports);var Cn=vn.exports,Sn={indexOf:function(e,t){var o,n;if(Array.prototype.indexOf)return e.indexOf(t);for(o=0,n=e.length;o<n;o++)if(e[o]===t)return o;return-1},forEach:function(e,t,o){var n,l;if(Array.prototype.forEach)return e.forEach(t,o);for(n=0,l=e.length;n<l;n++)t.call(o,e[n],n,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/.exec(e);return t?t.index:-1}},jn=Cn.FilterCSS,Tn=Cn.getDefaultWhiteList,In=Sn,Fn=new jn;function Bn(e){return e.replace(An,"&lt;").replace(Mn,"&gt;")}var An=/</g,Mn=/>/g,Ln=/"/g,On=/&quot;/g,En=/&#([a-zA-Z0-9]*);?/gim,Hn=/&colon;?/gim,zn=/&newline;?/gim,Rn=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,Dn=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,Nn=/u\s*r\s*l\s*\(.*/gi;function Pn(e){return e.replace(Ln,"&quot;")}function Vn(e){return e.replace(On,'"')}function qn(e){return e.replace(En,function(e,t){return"x"===t[0]||"X"===t[0]?String.fromCharCode(parseInt(t.substr(1),16)):String.fromCharCode(parseInt(t,10))})}function Wn(e){return e.replace(Hn,":").replace(zn," ")}function _n(e){for(var t="",o=0,n=e.length;o<n;o++)t+=e.charCodeAt(o)<32?" ":e.charAt(o);return In.trim(t)}function Un(e){return _n(e=Wn(e=qn(e=Vn(e))))}function Gn(e){return Bn(e=Pn(e))}gn.whiteList={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height","loading"],ins:["datetime"],kbd:[],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]},gn.getDefaultWhiteList=function(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height","loading"],ins:["datetime"],kbd:[],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}},gn.onTag=function(e,t,o){},gn.onIgnoreTag=function(e,t,o){},gn.onTagAttr=function(e,t,o){},gn.onIgnoreTagAttr=function(e,t,o){},gn.safeAttrValue=function(e,t,o,n){if(o=Un(o),"href"===t||"src"===t){if("#"===(o=In.trim(o)))return"#";if("http://"!==o.substr(0,7)&&"https://"!==o.substr(0,8)&&"mailto:"!==o.substr(0,7)&&"tel:"!==o.substr(0,4)&&"data:image/"!==o.substr(0,11)&&"ftp://"!==o.substr(0,6)&&"./"!==o.substr(0,2)&&"../"!==o.substr(0,3)&&"#"!==o[0]&&"/"!==o[0])return""}else if("background"===t){if(Rn.lastIndex=0,Rn.test(o))return""}else if("style"===t){if(Dn.lastIndex=0,Dn.test(o))return"";if(Nn.lastIndex=0,Nn.test(o)&&(Rn.lastIndex=0,Rn.test(o)))return"";!1!==n&&(o=(n=n||Fn).process(o))}return Gn(o)},gn.escapeHtml=Bn,gn.escapeQuote=Pn,gn.unescapeQuote=Vn,gn.escapeHtmlEntities=qn,gn.escapeDangerHtml5Entities=Wn,gn.clearNonPrintableCharacter=_n,gn.friendlyAttrValue=Un,gn.escapeAttrValue=Gn,gn.onIgnoreTagStripAll=function(){return""},gn.StripTagBody=function(e,t){"function"!=typeof t&&(t=function(){});var o=!Array.isArray(e),n=[],l=!1;return{onIgnoreTag:function(i,a,r){if(function(t){return!!o||-1!==In.indexOf(e,t)}(i)){if(r.isClosing){var s=r.position+10;return n.push([!1!==l?l:r.position,s]),l=!1,"[/removed]"}return l||(l=r.position),"[removed]"}return t(i,a,r)},remove:function(e){var t="",o=0;return In.forEach(n,function(n){t+=e.slice(o,n[0]),o=n[1]}),t+=e.slice(o)}}},gn.stripCommentTag=function(e){for(var t="",o=0;o<e.length;){var n=e.indexOf("\x3c!--",o);if(-1===n){t+=e.slice(o);break}t+=e.slice(o,n);var l=e.indexOf("--\x3e",n);if(-1===l)break;o=l+3}return t},gn.stripBlankChar=function(e){var t=e.split("");return(t=t.filter(function(e){var t=e.charCodeAt(0);return!(127===t||t<=31&&10!==t&&13!==t)})).join("")},gn.attributeWrapSign='"',gn.cssFilter=Fn,gn.getDefaultCSSWhiteList=Tn;var Kn={},Zn=Sn;function Jn(e){var t,o=Zn.spaceIndex(e);return t=-1===o?e.slice(1,-1):e.slice(1,o+1),"/"===(t=Zn.trim(t).toLowerCase()).slice(0,1)&&(t=t.slice(1)),"/"===t.slice(-1)&&(t=t.slice(0,-1)),t}function Xn(e){return"</"===e.slice(0,2)}var Yn=/[^a-zA-Z0-9\\_:.-]/gim;function Qn(e,t){for(;t<e.length;t++){var o=e[t];if(" "!==o)return"="===o?t:-1}}function el(e,t){for(;t<e.length;t++){var o=e[t];if(" "!==o)return"'"===o||'"'===o?t:-1}}function tl(e,t){for(;t>0;t--){var o=e[t];if(" "!==o)return"="===o?t:-1}}function ol(e){return function(e){return'"'===e[0]&&'"'===e[e.length-1]||"'"===e[0]&&"'"===e[e.length-1]}(e)?e.substr(1,e.length-2):e}Kn.parseTag=function(e,t,o){var n="",l=0,i=!1,a=!1,r=0,s=e.length,d="",c="";e:for(r=0;r<s;r++){var u=e.charAt(r);if(!1===i){if("<"===u){i=r;continue}}else if(!1===a){if("<"===u){n+=o(e.slice(l,r)),i=r,l=r;continue}if(">"===u||r===s-1){n+=o(e.slice(l,i)),d=Jn(c=e.slice(i,r+1)),n+=t(i,n.length,d,c,Xn(c)),l=r+1,i=!1;continue}if('"'===u||"'"===u)for(var m=1,p=e.charAt(r-m);""===p.trim()||"="===p;){if("="===p){a=u;continue e}p=e.charAt(r-++m)}}else if(u===a){a=!1;continue}}return l<s&&(n+=o(e.substr(l))),n},Kn.parseAttr=function(e,t){var o=0,n=0,l=[],i=!1,a=e.length;function r(e,o){if(!((e=(e=Zn.trim(e)).replace(Yn,"").toLowerCase()).length<1)){var n=t(e,o||"");n&&l.push(n)}}for(var s=0;s<a;s++){var d,c=e.charAt(s);if(!1!==i||"="!==c)if(!1===i||s!==n){if(/\s|\n|\t/.test(c)){if(e=e.replace(/\s|\n|\t/g," "),!1===i){if(-1===(d=Qn(e,s))){r(Zn.trim(e.slice(o,s))),i=!1,o=s+1;continue}s=d-1;continue}if(-1===(d=tl(e,s-1))){r(i,ol(Zn.trim(e.slice(o,s)))),i=!1,o=s+1;continue}}}else{if(-1===(d=e.indexOf(c,s+1)))break;r(i,Zn.trim(e.slice(n+1,d))),i=!1,o=(s=d)+1}else i=e.slice(o,s),o=s+1,n='"'===e.charAt(o)||"'"===e.charAt(o)?o:el(e,s+1)}return o<e.length&&(!1===i?r(e.slice(o)):r(i,ol(Zn.trim(e.slice(o))))),Zn.trim(l.join(" "))};var nl=Cn.FilterCSS,ll=gn,il=Kn,al=il.parseTag,rl=il.parseAttr,sl=Sn;function dl(e){return null==e}function cl(e){(e=function(e){var t={};for(var o in e)t[o]=e[o];return t}(e||{})).stripIgnoreTag&&(e.onIgnoreTag,e.onIgnoreTag=ll.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=function(e){var t={};for(var o in e)Array.isArray(e[o])?t[o.toLowerCase()]=e[o].map(function(e){return e.toLowerCase()}):t[o.toLowerCase()]=e[o];return t}(e.whiteList||e.allowList):e.whiteList=ll.whiteList,this.attributeWrapSign=!0===e.singleQuotedAttributeValue?"'":ll.attributeWrapSign,e.onTag=e.onTag||ll.onTag,e.onTagAttr=e.onTagAttr||ll.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||ll.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||ll.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||ll.safeAttrValue,e.escapeHtml=e.escapeHtml||ll.escapeHtml,this.options=e,!1===e.css?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new nl(e.css))}cl.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this,o=t.options,n=o.whiteList,l=o.onTag,i=o.onIgnoreTag,a=o.onTagAttr,r=o.onIgnoreTagAttr,s=o.safeAttrValue,d=o.escapeHtml,c=t.attributeWrapSign,u=t.cssFilter;o.stripBlankChar&&(e=ll.stripBlankChar(e)),o.allowCommentTag||(e=ll.stripCommentTag(e));var m=!1;o.stripIgnoreTagBody&&(m=ll.StripTagBody(o.stripIgnoreTagBody,i),i=m.onIgnoreTag);var p=al(e,function(e,t,o,m,p){var f={sourcePosition:e,position:t,isClosing:p,isWhite:Object.prototype.hasOwnProperty.call(n,o)},g=l(o,m,f);if(!dl(g))return g;if(f.isWhite){if(f.isClosing)return"</"+o+">";var v=function(e){var t=sl.spaceIndex(e);if(-1===t)return{html:"",closing:"/"===e[e.length-2]};var o="/"===(e=sl.trim(e.slice(t+1,-1)))[e.length-1];return o&&(e=sl.trim(e.slice(0,-1))),{html:e,closing:o}}(m),h=n[o],b=rl(v.html,function(e,t){var n=-1!==sl.indexOf(h,e),l=a(o,e,t,n);return dl(l)?n?(t=s(o,e,t,u))?e+"="+c+t+c:e:dl(l=r(o,e,t,n))?void 0:l:l});return m="<"+o,b&&(m+=" "+b),v.closing&&(m+=" /"),m+">"}return dl(g=i(o,m,f))?d(m):g},d);return m&&(p=m.remove(p)),p};var ul=cl;!function(e,t){var o=gn,n=Kn,l=ul;function i(e,t){return new l(t).process(e)}(t=e.exports=i).filterXSS=i,t.FilterXSS=l,function(){for(var e in o)t[e]=o[e];for(var l in n)t[l]=n[l]}(),"undefined"!=typeof window&&(window.filterXSS=e.exports),"undefined"!=typeof self&&"undefined"!=typeof DedicatedWorkerGlobalScope&&self instanceof DedicatedWorkerGlobalScope&&(self.filterXSS=e.exports)}(fn,fn.exports);export{mn as E,Yt as M};
