import{E as e}from"./vendor-smithy-eventstream-serde-universal-DZbSnlfi.js";class t{constructor({utf8Encoder:t,utf8Decoder:n}){this.universalMarshaller=new e({utf8Decoder:n,utf8Encoder:t})}deserialize(e,t){const r=n(e)?(a=e,{[Symbol.asyncIterator]:async function*(){const e=a.getReader();try{for(;;){const{done:t,value:n}=await e.read();if(t)return;yield n}}finally{e.releaseLock()}}}):e;var a;return this.universalMarshaller.deserialize(r,t)}serialize(e,t){const n=this.universalMarshaller.serialize(e,t);return"function"==typeof ReadableStream?(e=>{const t=e[Symbol.asyncIterator]();return new ReadableStream({async pull(e){const{done:n,value:r}=await t.next();if(n)return e.close();e.enqueue(r)}})})(n):n}}const n=e=>"function"==typeof ReadableStream&&e instanceof ReadableStream,r=e=>new t(e);export{r as e};
