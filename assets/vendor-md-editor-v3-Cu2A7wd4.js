import{d as e,w as t,o,a,c as n,b as l,i as r,p as i,e as s,F as c,u as d,n as u,h as m,T as p,f as g}from"./vendor-vue-runtime-core-eaFH3Ku3.js";import{r as v,a as h,s as f,t as b}from"./vendor-vue-reactivity-pQI8TCyu.js";import{k as y,x as k,M as w,u as x,U as $,I as T,$ as C,C as S}from"./vendor-vavt-util-zJ2aadKd.js";import{c as E}from"./vendor-vavt-copy2clipboard-Cbuvn6n5.js";import{M as I}from"./vendor-markdown-it-C-qVFuxq.js";import{r as L}from"./vendor-markdown-it-image-figures-BQFfKaTI.js";import{s as A}from"./vendor-markdown-it-sub-DQn6Hbcf.js";import{s as F}from"./vendor-markdown-it-sup-DcZktQFx.js";import{L as M}from"./vendor-lru-cache-oNZJ9389.js";import{m as j}from"./vendor-medium-zoom-iNdZUdmf.js";import{U as H,T as B,X as O,S as R,C as N,L as D,a as P,E as z,V,b as q,c as W,M as _,d as U,e as K,f as X,F as G,R as Y,g as Z,I as J,h as Q,i as ee,j as te,k as oe,l as ae,Q as ne,m as le,n as re,H as ie,o as se,p as ce,q as de,B as ue}from"./vendor-lucide-vue-next-DpXUsRkw.js";import{c as me}from"./vendor-vue-runtime-dom-6cFkymwj.js";import{h as pe,d as ge,a as ve,b as he,i as fe,u as be,r as ye}from"./vendor-codemirror-commands-DJ20iNmp.js";import{markdown as ke}from"./vendor-codemirror-lang-markdown-BCPAaF_a.js";import{l as we}from"./vendor-codemirror-language-data-vIq29e9E.js";import{o as xe,a as $e,S as Te,j as Ce,E as Se,k as Ee}from"./vendor-codemirror-state-d-AKQu11.js";import{E as Ie,k as Le,d as Ae,p as Fe,s as Me,D as je,W as He}from"./vendor-codemirror-view-CwWsG3pM.js";import{u as Be,H as Oe,i as Re}from"./vendor-codemirror-language-D9Y_sbSd.js";import{a as Ne}from"./vendor-codemirror-autocomplete-C7UoMGhy.js";import{t as De}from"./vendor-lezer-highlight-BtpKku1v.js";import{s as Pe}from"./vendor-codemirror-search-Co2p_Nz6.js";const ze="md-editor",Ve="https://unpkg.com",qe={main:`${Ve}/prettier@3.3.3/standalone.js`,markdown:`${Ve}/prettier@3.3.3/plugins/markdown.js`},We={a11y:{light:`${Ve}/@highlightjs/cdn-assets@11.10.0/styles/a11y-light.min.css`,dark:`${Ve}/@highlightjs/cdn-assets@11.10.0/styles/a11y-dark.min.css`},atom:{light:`${Ve}/@highlightjs/cdn-assets@11.10.0/styles/atom-one-light.min.css`,dark:`${Ve}/@highlightjs/cdn-assets@11.10.0/styles/atom-one-dark.min.css`},github:{light:`${Ve}/@highlightjs/cdn-assets@11.10.0/styles/github.min.css`,dark:`${Ve}/@highlightjs/cdn-assets@11.10.0/styles/github-dark.min.css`},gradient:{light:`${Ve}/@highlightjs/cdn-assets@11.10.0/styles/gradient-light.min.css`,dark:`${Ve}/@highlightjs/cdn-assets@11.10.0/styles/gradient-dark.min.css`},kimbie:{light:`${Ve}/@highlightjs/cdn-assets@11.10.0/styles/kimbie-light.min.css`,dark:`${Ve}/@highlightjs/cdn-assets@11.10.0/styles/kimbie-dark.min.css`},paraiso:{light:`${Ve}/@highlightjs/cdn-assets@11.10.0/styles/paraiso-light.min.css`,dark:`${Ve}/@highlightjs/cdn-assets@11.10.0/styles/paraiso-dark.min.css`},qtcreator:{light:`${Ve}/@highlightjs/cdn-assets@11.10.0/styles/qtcreator-light.min.css`,dark:`${Ve}/@highlightjs/cdn-assets@11.10.0/styles/qtcreator-dark.min.css`},stackoverflow:{light:`${Ve}/@highlightjs/cdn-assets@11.10.0/styles/stackoverflow-light.min.css`,dark:`${Ve}/@highlightjs/cdn-assets@11.10.0/styles/stackoverflow-dark.min.css`}},_e=["bold","underline","italic","strikeThrough","-","title","sub","sup","quote","unorderedList","orderedList","task","-","codeRow","code","link","image","table","mermaid","katex","-","revoke","next","save","=","prettier","pageFullscreen","fullscreen","preview","previewOnly","htmlPreview","catalog","github"],Ue=["markdownTotal","=","scrollSwitch"],Ke={"zh-CN":{toolbarTips:{bold:"加粗",underline:"下划线",italic:"斜体",strikeThrough:"删除线",title:"标题",sub:"下标",sup:"上标",quote:"引用",unorderedList:"无序列表",orderedList:"有序列表",task:"任务列表",codeRow:"行内代码",code:"块级代码",link:"链接",image:"图片",table:"表格",mermaid:"mermaid图",katex:"katex公式",revoke:"后退",next:"前进",save:"保存",prettier:"美化",pageFullscreen:"浏览器全屏",fullscreen:"屏幕全屏",preview:"预览",previewOnly:"仅预览",htmlPreview:"html代码预览",catalog:"目录",github:"源码地址"},titleItem:{h1:"一级标题",h2:"二级标题",h3:"三级标题",h4:"四级标题",h5:"五级标题",h6:"六级标题"},imgTitleItem:{link:"添加链接",upload:"上传图片",clip2upload:"裁剪上传"},linkModalTips:{linkTitle:"添加链接",imageTitle:"添加图片",descLabel:"链接描述：",descLabelPlaceHolder:"请输入描述...",urlLabel:"链接地址：",urlLabelPlaceHolder:"请输入链接...",buttonOK:"确定"},clipModalTips:{title:"裁剪图片上传",buttonUpload:"上传"},copyCode:{text:"复制代码",successTips:"已复制！",failTips:"复制失败！"},mermaid:{flow:"流程图",sequence:"时序图",gantt:"甘特图",class:"类图",state:"状态图",pie:"饼图",relationship:"关系图",journey:"旅程图"},katex:{inline:"行内公式",block:"块级公式"},footer:{markdownTotal:"字数",scrollAuto:"同步滚动"}},"en-US":{toolbarTips:{bold:"bold",underline:"underline",italic:"italic",strikeThrough:"strikeThrough",title:"title",sub:"subscript",sup:"superscript",quote:"quote",unorderedList:"unordered list",orderedList:"ordered list",task:"task list",codeRow:"inline code",code:"block-level code",link:"link",image:"image",table:"table",mermaid:"mermaid",katex:"formula",revoke:"revoke",next:"undo revoke",save:"save",prettier:"prettier",pageFullscreen:"fullscreen in page",fullscreen:"fullscreen",preview:"preview",previewOnly:"preview only",htmlPreview:"html preview",catalog:"catalog",github:"source code"},titleItem:{h1:"Lv1 Heading",h2:"Lv2 Heading",h3:"Lv3 Heading",h4:"Lv4 Heading",h5:"Lv5 Heading",h6:"Lv6 Heading"},imgTitleItem:{link:"Add Image Link",upload:"Upload Images",clip2upload:"Crop And Upload"},linkModalTips:{linkTitle:"Add Link",imageTitle:"Add Image",descLabel:"Desc:",descLabelPlaceHolder:"Enter a description...",urlLabel:"Link:",urlLabelPlaceHolder:"Enter a link...",buttonOK:"OK"},clipModalTips:{title:"Crop Image",buttonUpload:"Upload"},copyCode:{text:"Copy",successTips:"Copied!",failTips:"Copy failed!"},mermaid:{flow:"flow",sequence:"sequence",gantt:"gantt",class:"class",state:"state",pie:"pie",relationship:"relationship",journey:"journey"},katex:{inline:"inline",block:"block"},footer:{markdownTotal:"Character Count",scrollAuto:"Scroll Auto"}}},Xe={editorExtensions:{highlight:{js:`${Ve}/@highlightjs/cdn-assets@11.10.0/highlight.min.js`,css:We},prettier:{standaloneJs:qe.main,parserMarkdownJs:qe.markdown},cropper:{css:`${Ve}/cropperjs@1.6.2/dist/cropper.min.css`,js:`${Ve}/cropperjs@1.6.2/dist/cropper.min.js`},screenfull:{js:`${Ve}/screenfull@5.2.0/dist/screenfull.js`},mermaid:{js:`${Ve}/mermaid@11.9.0/dist/mermaid.min.js`,enableZoom:!0},katex:{js:`${Ve}/katex@0.16.22/dist/katex.min.js`,css:`${Ve}/katex@0.16.22/dist/katex.min.css`},echarts:{js:`${Ve}/echarts@6.0.0/dist/echarts.min.js`}},editorExtensionsAttrs:{},editorConfig:{languageUserDefined:{},mermaidTemplate:{},renderDelay:500,zIndex:2e4},codeMirrorExtensions:e=>e,markdownItConfig:()=>{},markdownItPlugins:e=>e,mermaidConfig:e=>e,katexConfig:e=>e,echartsConfig:e=>e},Ge=.1,Ye=({instance:e,ctx:t,props:o={}},a="default")=>{const n=e?.$slots[a]||t?.slots[a];return(n?n(e):"")||o[a]},Ze={overlay:{type:[String,Object],default:""},visible:{type:Boolean,default:!1},onChange:{type:Function,default:()=>{}},relative:{type:String,default:"html"},disabled:{type:Boolean,default:void 0}},Je=e({name:`${ze}-dropdown`,props:Ze,setup(e,r){const i=`${ze}-dropdown-hidden`,s=v({overlayClass:[i],overlayStyle:{},triggerHover:!1,overlayHover:!1}),c=h(),d=h(),u=()=>{if(e.disabled)return!1;s.triggerHover=!0;const t=c.value,o=d.value;if(!t||!o)return;const a=t.getBoundingClientRect(),n=t.offsetTop,l=t.offsetLeft,r=a.height,i=a.width,u=t.getRootNode(),m=u.querySelector(e.relative)?.scrollLeft||0,p=u.querySelector(e.relative)?.clientWidth||0;let g=l-o.offsetWidth/2+i/2-m;g+o.offsetWidth>m+p&&(g=m+p-o.offsetWidth),g<0&&(g=0),s.overlayStyle={...s.overlayStyle,top:n+r+"px",left:g+"px"},e.onChange(!0)},m=()=>{if(e.disabled)return!1;s.overlayHover=!0};t(()=>e.visible,e=>{e?s.overlayClass=s.overlayClass.filter(e=>e!==i):s.overlayClass.push(i)});let p=-1;const g=t=>{c.value===t.target?s.triggerHover=!1:s.overlayHover=!1,clearTimeout(p),p=window.setTimeout(()=>{!s.overlayHover&&!s.triggerHover&&e.onChange(!1)},10)};return o(()=>{c.value.addEventListener("mouseenter",u),c.value.addEventListener("mouseleave",g),d.value.addEventListener("mouseenter",m),d.value.addEventListener("mouseleave",g)}),a(()=>{c.value.removeEventListener("mouseenter",u),c.value.removeEventListener("mouseleave",g),d.value.removeEventListener("mouseenter",m),d.value.removeEventListener("mouseleave",g)}),()=>{const t=Ye({ctx:r}),o=Ye({props:e,ctx:r},"overlay");return[n(t instanceof Array?t[0]:t,{ref:c,key:"cloned-dropdown-trigger"}),l("div",{class:[`${ze}-dropdown`,s.overlayClass],style:s.overlayStyle,ref:d},[l("div",{class:`${ze}-dropdown-overlay`},[o instanceof Array?o[0]:o])])]}}}),Qe=e({name:"DropdownToolbar",props:{title:{type:String,default:""},visible:{type:Boolean,default:void 0},trigger:{type:[String,Object],default:void 0},onChange:{type:Function,default:void 0},overlay:{type:[String,Object],default:void 0},insert:{type:Function,default:void 0},language:{type:String,default:void 0},theme:{type:String,default:void 0},previewTheme:{type:String,default:void 0},codeTheme:{type:String,default:void 0},disabled:{type:Boolean,default:void 0},showToolbarName:{type:Boolean,default:void 0}},emits:["onChange"],setup(e,t){const o=r("editorId");return()=>{const a=Ye({props:e,ctx:t},"trigger"),n=Ye({props:e,ctx:t},"overlay"),r=Ye({props:e,ctx:t});return l(Je,{relative:`#${o}-toolbar-wrapper`,visible:e.visible,onChange:o=>{e.onChange?.(o),t.emit("onChange",o)},overlay:n,disabled:e.disabled},{default:()=>[l("button",{class:[`${ze}-toolbar-item`,e.disabled&&`${ze}-disabled`],title:e.title||"",disabled:e.disabled,type:"button"},[r||a])]})}}});Qe.install=e=>(e.component(Qe.name,Qe),e);const et="onSave",tt="changeCatalogVisible",ot="changeFullscreen",at="pageFullscreenChanged",nt="fullscreenChanged",lt="previewChanged",rt="previewOnlyChanged",it="htmlPreviewChanged",st="catalogVisibleChanged",ct="buildFinished",dt="errorCatcher",ut="replace",mt="uploadImage",pt="ctrlZ",gt="ctrlShiftZ",vt="catalogChanged",ht="pushCatalog",ft="rerender",bt="eventListener",yt="taskStateChanged",kt="sendEditorView",wt="getEditorView",xt=new class{pools={};remove(e,t,o){const a=this.pools[e]&&this.pools[e][t];a&&(this.pools[e][t]=a.filter(e=>e!==o))}clear(e){this.pools[e]={}}on(e,t){return this.pools[e]||(this.pools[e]={}),this.pools[e][t.name]||(this.pools[e][t.name]=[]),this.pools[e][t.name].push(t.callback),this.pools[e][t.name].includes(t.callback)}emit(e,t,...o){this.pools[e]||(this.pools[e]={});const a=this.pools[e][t];a&&a.forEach(e=>{try{e(...o)}catch(t){}})}},$t=(e,t="image.png")=>{const o=e.split(","),a=o[0].match(/:(.*?);/);if(a){const e=a[1],n=atob(o[1]);let l=n.length;const r=new Uint8Array(l);for(;l--;)r[l]=n.charCodeAt(l);return new File([r],t,{type:e})}return null},Tt=(()=>{let e=0;return()=>++e})(),Ct=`.${ze}-preview > [data-line]`,St=(e,t)=>+getComputedStyle(e).getPropertyValue(t).replace("px",""),Et=(e,t)=>{const o=y(()=>{e.removeEventListener("scroll",a),e.addEventListener("scroll",a),t.removeEventListener("scroll",a),t.addEventListener("scroll",a)},50),a=n=>{const l=e.clientHeight,r=t.clientHeight,i=(e.scrollHeight-l)/(t.scrollHeight-r);n.target===e?(t.removeEventListener("scroll",a),t.scrollTo({top:e.scrollTop/i}),o()):(e.removeEventListener("scroll",a),e.scrollTo({top:t.scrollTop*i}),o())};return[()=>{o().finally(()=>{e.dispatchEvent(new Event("scroll"))})},()=>{e.removeEventListener("scroll",a),t.removeEventListener("scroll",a)}]},It=(e,t,o)=>{const{view:a}=o,n=k(),l=e=>a.lineBlockAt(a.state.doc.line(e+1).from).top,r=e=>a.lineBlockAt(a.state.doc.line(e+1).from).bottom;let i=[],s=[],c=[];const d=(e,t)=>{let o=1;for(let a=s.length-1;a-1>=0;a--){const e=s[a],n=s[a-1];if(e.offsetTop+e.offsetHeight>t&&n.offsetTop<t){o=Number(n.dataset.line);break}}for(let a=i.length-1;a>=0;a--){const t=r(i[a].end),n=l(i[a].start);if(t>e&&n<=e){o=o<i[a].start?o:i[a].start;break}}return o};let u=0,m=0;const p=o=>{const{scrollDOM:p,contentHeight:g}=a;if(g<=p.clientHeight||t.firstElementChild.clientHeight<=t.clientHeight||a.state.doc.lines<=i[i.length-1]?.end)return!1;o.target===e?(()=>{if(0!==m)return!1;u++;const{scrollDOM:e,contentHeight:o}=a;let s=St(t,"padding-top");const c=a.lineBlockAtHeight(e.scrollTop),{number:p}=a.state.doc.lineAt(c.from),g=i[p-1];if(!g)return!1;let v=1;const h=t.querySelector(`[data-line="${g.start}"]`)||t.firstElementChild?.firstElementChild,f=t.querySelector(`[data-line="${g.end+1}"]`)||t.lastElementChild?.lastElementChild,b=e.scrollHeight-e.clientHeight,y=t.scrollHeight-t.clientHeight;let k=l(g.start),w=r(g.end),x=h.offsetTop,$=f.offsetTop-x;0===k&&(x=0,h===f?(s=0,w=o-e.offsetHeight,$=y):$=f.offsetTop),v=(e.scrollTop-k)/(w-k);const T=f==t.lastElementChild?.lastElementChild?f.offsetTop+f.clientHeight:f.offsetTop;if(w>=b||T>y){const o=d(b,y);k=l(o),v=(e.scrollTop-k)/(b-k);const a=t.querySelector(`[data-line="${o}"]`);k>0&&a&&(x=a.offsetTop),$=y-x+St(t,"padding-top")}n(t,x-s+$*v,()=>{u--})})():(()=>{if(0!==u)return;m++;const{scrollDOM:o}=a,r=t.scrollTop,p=t.scrollHeight,g=o.scrollHeight-o.clientHeight,v=t.scrollHeight-t.clientHeight;let h=t.firstElementChild?.firstElementChild,f=t.firstElementChild?.lastElementChild;if(c.length>0){let e=Math.ceil(c[c.length-1]*(r/p)),o=c.findLastIndex(t=>t<=e);o=-1===o?0:o,e=c[o];for(let t=o;t>=0&&t<c.length;){if(s[t].offsetTop>r){if(t-1>=0){t--;continue}e=-1,o=t;break}if(!(t+1<c.length&&s[t+1].offsetTop<r)){e=c[t],o=t;break}t++}switch(o){case-1:h=t.firstElementChild?.firstElementChild,f=s[o];break;case c.length-1:h=s[o],f=t.firstElementChild?.lastElementChild;break;default:h=s[o],f=s[o+1===s.length?o:o+1]}}let b=h===t.firstElementChild?.firstElementChild?0:h.offsetTop-St(h,"margin-top"),y=f.offsetTop,k=0;const{start:w,end:x}=i[Number(h.dataset.line||0)];let $=l(w);const T=l(x+1===a.state.doc.lines?x:x+1);let C=0;if(T>g||f.offsetTop+f.offsetHeight>v){const e=d(g,v),o=t.querySelector(`[data-line="${e}"]`);b=o?o.offsetTop-St(o,"margin-top"):b,$=l(e),k=(r-b)/(v-b),C=g-$}else h===t.firstElementChild?.firstElementChild?(h===f&&(y=f.offsetTop+f.offsetHeight+ +getComputedStyle(f).marginBottom.replace("px","")),C=T,k=Math.max(r/y,0)):(k=Math.max((r-b)/(y-b),0),C=T-$);n(e,$+C*k,()=>{m--})})()};return[()=>{(()=>{i=[],s=Array.from(t.querySelectorAll(Ct)),c=s.map(e=>Number(e.dataset.line));const e=[...c],{lines:o}=a.state.doc;let n=e.shift()||0,l=e.shift()||o;for(let t=0;t<o;t++)t===l&&(n=t,l=e.shift()||o),i.push({start:n,end:l-1})})(),e.addEventListener("scroll",p),t.addEventListener("scroll",p),e.dispatchEvent(new Event("scroll"))},()=>{e.removeEventListener("scroll",p),t.removeEventListener("scroll",p)}]},Lt=e({props:{tocItem:{type:Object,default:()=>({})},mdHeadingId:{type:Function,default:()=>{}},onActive:{type:Function,default:()=>{}},onClick:{type:Function,default:()=>{}},scrollElementOffsetTop:{type:Number,default:0}},setup(e){const a=r("scrollElementRef"),n=r("roorNodeRef"),i=h();return t(()=>e.tocItem.active,t=>{t&&e.onActive(e.tocItem,i.value)}),o(()=>{e.tocItem.active&&e.onActive(e.tocItem,i.value)}),()=>{const{tocItem:t,mdHeadingId:o,onClick:r,scrollElementOffsetTop:s}=e;return l("div",{ref:i,class:[`${ze}-catalog-link`,t.active&&`${ze}-catalog-active`],onClick:e=>{if(e.stopPropagation(),r(e,t),e.defaultPrevented)return;const l=o({text:t.text,level:t.level,index:t.index,currentToken:t.currentToken,nextToken:t.nextToken}),i=n.value.getElementById(l),c=a.value;if(i&&c){let e=i.offsetParent,t=i.offsetTop;if(c.contains(e))for(;e&&c!=e;)t+=e?.offsetTop,e=e?.offsetParent;let o=0;i.previousElementSibling||(o=St(i,"margin-top")),c?.scrollTo({top:t-s-o,behavior:"smooth"})}}},[l("span",{title:t.text},[t.text]),t.children&&t.children.length>0&&l("div",{class:`${ze}-catalog-wrapper`},[t.children.map(a=>l(Lt,{mdHeadingId:o,key:`${t.text}-link-${a.level}-${a.text}`,tocItem:a,onActive:e.onActive,onClick:r,scrollElementOffsetTop:s},null))])])}}}),At=e({name:"MdCatalog",props:{editorId:{type:String,default:void 0},class:{type:String,default:""},mdHeadingId:{type:Function,default:({text:e})=>e},scrollElement:{type:[String,Object],default:void 0},theme:{type:String,default:"light"},offsetTop:{type:Number,default:20},scrollElementOffsetTop:{type:Number,default:0},onClick:{type:Function,default:void 0},onActive:{type:Function,default:void 0},isScrollElementInShadow:{type:Boolean,default:!1},syncWith:{type:String,default:"preview"},catalogMaxDepth:{type:Number,default:void 0}},emits:["onClick","onActive"],setup(e,n){const r=e.editorId,d=`#${r}-preview-wrapper`,u=v({list:[],show:!1,scrollElement:e.scrollElement||d}),m=f(),p=h(),g=h(),b=h(),y=h(),k=f(),w=h({});i("scrollElementRef",g),i("roorNodeRef",y);const x=s(()=>{const t=[];return u.list.forEach((o,a)=>{if(e.catalogMaxDepth&&o.level>e.catalogMaxDepth)return;const{text:n,level:l,line:r}=o,i={level:l,text:n,line:r,index:a+1,active:m.value===o};if(0===t.length)t.push(i);else{let e=t[t.length-1];if(i.level>e.level)for(let t=e.level+1;t<=6;t++){const{children:t}=e;if(!t){e.children=[i];break}if(e=t[t.length-1],i.level<=e.level){t.push(i);break}}else t.push(i)}}),t}),$=t=>{if(0===t.length)return m.value=void 0,u.list=[],!1;const{activeHead:o}=t.reduce((t,o,a)=>{let n=0;if("preview"===e.syncWith){const t=y.value?.getElementById(e.mdHeadingId({text:o.text,level:o.level,index:a+1,currentToken:o.currentToken,nextToken:o.nextToken}));t instanceof HTMLElement&&(n=((e,t)=>{if(!e||!t)return 0;const o=e?.getBoundingClientRect();if(t===document.documentElement)return o.top-t.clientTop;const a=t?.getBoundingClientRect();return o.top-a.top})(t,g.value))}else{const e=k.value;e&&(n=e.lineBlockAt(e.state.doc.line(o.line+1).from).top-e.scrollDOM.scrollTop)}return n<e.offsetTop&&n>t.minTop?{activeHead:o,minTop:n}:t},{activeHead:t[0],minTop:Number.MIN_SAFE_INTEGER});m.value=o,u.list=t},T=(t,o)=>{w.value.top=o.offsetTop+St(o,"padding-top")+"px",e.onActive?.(t,o),n.emit("onActive",t,o)},C=()=>{$(u.list)},S=t=>{if(b.value?.removeEventListener("scroll",C),"editor"===e.syncWith)b.value=k.value?.scrollDOM;else{const t=(()=>{if(u.scrollElement instanceof HTMLElement)return u.scrollElement;let t=document;return(u.scrollElement===d||e.isScrollElementInShadow)&&(t=p.value?.getRootNode()),t.querySelector(u.scrollElement)})();g.value=t,b.value=t===document.documentElement?document:t}$(t),b.value?.addEventListener("scroll",C)},E=e=>{k.value=e};return t([()=>e.syncWith,k,()=>e.catalogMaxDepth],()=>{S(u.list)}),o(()=>{y.value=p.value.getRootNode(),xt.on(r,{name:vt,callback:S}),xt.on(r,{name:wt,callback:E}),xt.emit(r,ht),xt.emit(r,kt)}),a(()=>{xt.remove(r,vt,S),xt.remove(r,wt,E),b.value?.removeEventListener("scroll",C)}),()=>l("div",{class:[`${ze}-catalog`,"dark"===e.theme&&`${ze}-catalog-dark`,e.class||""],ref:p},[x.value.length>0&&l(c,null,[l("div",{class:`${ze}-catalog-indicator`,style:w.value},null),l("div",{class:`${ze}-catalog-container`},[x.value.map(t=>l(Lt,{mdHeadingId:e.mdHeadingId,tocItem:t,key:`link-${t.level}-${t.text}`,onActive:T,onClick:(t,o)=>{e.onClick?.(t,o),n.emit("onClick",t,o)},scrollElementOffsetTop:e.scrollElementOffsetTop},null))])])])}});At.install=e=>(e.component(At.name,At),e);const Ft={copy:`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy ${ze}-icon"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg>`,"collapse-tips":`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-chevron-left ${ze}-icon"><circle cx="12" cy="12" r="10"/><path d="m14 16-4-4 4-4"/></svg>`,pin:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-pin"><path d="M12 17v5"/><path d="M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z"/></svg>',"pin-off":'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-pin-off"><path d="M12 17v5"/><path d="M15 9.34V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H7.89"/><path d="m2 2 20 20"/><path d="M9 9v1.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h11"/></svg>'},Mt=(e,t)=>"string"==typeof t[e]?t[e]:Ft[e],jt=(e,t)=>{const o=o=>{const a=e.parentElement||document.body,n=a.offsetWidth,l=a.offsetHeight,{clientWidth:r,clientHeight:i}=document.documentElement,s=o.offsetX,c=o.offsetY,d=e=>{let o=e.x+document.body.scrollLeft-document.body.clientLeft-s,d=e.y+document.body.scrollTop-document.body.clientTop-c;o=o<1?1:o<r-n-1?o:r-n-1,d=d<1?1:d<i-l-1?d:i-l-1,t?t(o,d):(a.style.left=`${o}px`,a.style.top=`${d}px`)};document.addEventListener("mousemove",d);const u=()=>{document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",u)};document.addEventListener("mouseup",u)};return e.addEventListener("mousedown",o),()=>{e.removeEventListener("mousedown",o)}},Ht=(e,t,o="")=>{const a=document.getElementById(t.id);if(a)""!==o&&(Reflect.get(window,o)?t.onload?.call(a,new Event("load")):t.onload&&a.addEventListener("load",t.onload));else{const o={...t};o.onload=null;const a=Bt(e,o);t.onload&&a.addEventListener("load",t.onload),document.head.appendChild(a)}},Bt=(e,t)=>{const o=document.createElement(e);return Object.keys(t).forEach(e=>{void 0!==t[e]&&(o[e]=t[e])}),o},Ot=(()=>(e,t)=>{const o=new Map;return e?.forEach(e=>{let a=e.querySelector(`.${ze}-mermaid-action`);a||(e.insertAdjacentHTML("beforeend",`<div class="${ze}-mermaid-action">${Mt("pin-off",t.customIcon)}</div>`),a=e.querySelector(`.${ze}-mermaid-action`));const n=()=>{const n=o.get(e);if(n?.removeEvent)n.removeEvent(),e.removeAttribute("data-grab"),o.set(e,{removeClick:n.removeClick}),a.innerHTML=Mt("pin-off",t.customIcon);else{const l=(e=>{if(!e)return()=>{};const t=e.firstChild;let o,a,n,l=1,r=0,i=0,s=!1,c=1;const d=()=>{t.style.transform=`translate(${r}px, ${i}px) scale(${l})`},u=e=>{1===e.touches.length?(s=!0,o=e.touches[0].clientX-r,a=e.touches[0].clientY-i):2===e.touches.length&&(n=Math.hypot(e.touches[0].clientX-e.touches[1].clientX,e.touches[0].clientY-e.touches[1].clientY),c=l)},m=e=>{if(e.preventDefault(),s&&1===e.touches.length)r=e.touches[0].clientX-o,i=e.touches[0].clientY-a,d();else if(2===e.touches.length){const o=Math.hypot(e.touches[0].clientX-e.touches[1].clientX,e.touches[0].clientY-e.touches[1].clientY)/n,a=l;l=c*(o-1+1);const s=(e.touches[0].clientX+e.touches[1].clientX)/2,u=(e.touches[0].clientY+e.touches[1].clientY)/2,m=t.getBoundingClientRect(),p=(s-m.left)/a,g=(u-m.top)/a;r-=p*(l-a),i-=g*(l-a),d()}},p=()=>{s=!1},g=e=>{e.preventDefault();const o=l;e.deltaY<0?l+=.02:l=Math.max(.1,l-.02);const a=t.getBoundingClientRect(),n=e.clientX-a.left,s=e.clientY-a.top;r-=n/o*(l-o),i-=s/o*(l-o),d()},v=e=>{s=!0,o=e.clientX-r,a=e.clientY-i},h=e=>{s&&(r=e.clientX-o,i=e.clientY-a,d())},f=()=>{s=!1},b=()=>{s=!1};return e.addEventListener("touchstart",u,{passive:!1}),e.addEventListener("touchmove",m,{passive:!1}),e.addEventListener("touchend",p),e.addEventListener("wheel",g,{passive:!1}),e.addEventListener("mousedown",v),e.addEventListener("mousemove",h),e.addEventListener("mouseup",f),e.addEventListener("mouseleave",b),()=>{e.removeEventListener("touchstart",u),e.removeEventListener("touchmove",m),e.removeEventListener("touchend",p),e.removeEventListener("wheel",g),e.removeEventListener("mousedown",v),e.removeEventListener("mousemove",h),e.removeEventListener("mouseup",f),e.removeEventListener("mouseleave",b)}})(e);e.setAttribute("data-grab",""),o.set(e,{removeEvent:l,removeClick:n?.removeClick}),a.innerHTML=Mt("pin",t.customIcon)}};a.addEventListener("click",n),o.set(e,{removeClick:()=>a.removeEventListener("click",n)})}),()=>{o.forEach(({removeEvent:e,removeClick:t})=>{e?.(),t?.()}),o.clear()}})(),Rt={hljs:`${ze}-hljs`,hlcss:`${ze}-hlCss`,prettier:`${ze}-prettier`,prettierMD:`${ze}-prettierMD`,cropperjs:`${ze}-cropper`,croppercss:`${ze}-cropperCss`,screenfull:`${ze}-screenfull`,mermaidM:`${ze}-mermaid-m`,mermaid:`${ze}-mermaid`,katexjs:`${ze}-katex`,katexcss:`${ze}-katexCss`,echarts:`${ze}-echarts`},Nt=(e,{editorId:t,rootRef:o,setting:a})=>{const n=Xe.editorExtensions.highlight,l=Xe.editorExtensionsAttrs.highlight;i("editorId",t),i("rootRef",o),i("theme",s(()=>e.theme)),i("language",s(()=>e.language)),i("highlight",s(()=>{const{js:t}=n,o={...We,...n.css},{js:a,css:r={}}=l||{},i=e.codeStyleReverse&&e.codeStyleReverseList.includes(e.previewTheme)?"dark":e.theme;return{js:{src:t,...a},css:{href:o[e.codeTheme]?o[e.codeTheme][i]:We.atom[i],...o[e.codeTheme]&&r[e.codeTheme]?r[e.codeTheme][i]:r.atom?r.atom[i]:{}}}})),i("showCodeRowNumber",e.showCodeRowNumber);const r=s(()=>{const t={...Ke,...Xe.editorConfig.languageUserDefined};return w(x(Ke["en-US"]),t[e.language]||{})});return i("usedLanguageText",r),i("previewTheme",s(()=>e.previewTheme)),i("customIcon",s(()=>e.customIcon)),i("setting",s(()=>a?{...a}:{preview:!0,htmlPreview:!1,previewOnly:!1,pageFullscreen:!1,fullscreen:!1})),{editorId:t}},Dt=e=>{const t=d();return e.id||e.editorId||`${ze}-${t}`},Pt=new M({max:1e3,ttl:6e5}),zt=(e,t)=>{const o=(t=t||{}).marker||"!",a=o.charCodeAt(0),n=o.length;let l="",r="";const i=(e,t,o,a,n)=>{const l=e[t];return"admonition_open"===l.type?e[t].attrPush(["class",`${ze}-admonition ${ze}-admonition-${l.info}`]):"admonition_title_open"===l.type&&e[t].attrPush(["class",`${ze}-admonition-title`]),n.renderToken(e,t,o)};e.block.ruler.before("code","admonition",(e,t,i,s)=>{let c,d,u,m=!1,p=e.bMarks[t]+e.tShift[t],g=e.eMarks[t];if(a!==e.src.charCodeAt(p))return!1;for(c=p+1;c<=g&&o[(c-p)%n]===e.src[c];c++);const v=Math.floor((c-p)/n);if(3!==v)return!1;c-=(c-p)%n;const h=e.src.slice(p,c);if((e=>{const t=e.trim().split(" ",2);r="",l=t[0],t.length>1&&(r=e.substring(l.length+2))})(e.src.slice(c,g)),s)return!0;for(d=t;d++,!(d>=i||(p=e.bMarks[d]+e.tShift[d],g=e.eMarks[d],p<g&&e.sCount[d]<e.blkIndent));)if(a===e.src.charCodeAt(p)&&!(e.sCount[d]-e.blkIndent>=4)){for(c=p+1;c<=g&&o[(c-p)%n]===e.src[c];c++);if(!(Math.floor((c-p)/n)<v||(c-=(c-p)%n,c=e.skipSpaces(c),c<g))){m=!0;break}}const f=e.parentType,b=e.lineMax;return e.parentType="root",e.lineMax=d,u=e.push("admonition_open","div",1),u.markup=h,u.block=!0,u.info=l,u.map=[t,d],r&&(u=e.push("admonition_title_open","p",1),u.markup=h+" "+l,u.map=[t,d],u=e.push("inline","",0),u.content=r,u.map=[t,e.line-1],u.children=[],u=e.push("admonition_title_close","p",-1),u.markup=h+" "+l),e.md.block.tokenize(e,t+1,d),u=e.push("admonition_close","div",-1),u.markup=e.src.slice(p,c),u.block=!0,e.parentType=f,e.lineMax=b,e.line=d+(m?1:0),!0},{alt:["paragraph","reference","blockquote","list"]}),e.renderer.rules.admonition_open=i,e.renderer.rules.admonition_title_open=i,e.renderer.rules.admonition_title_close=i,e.renderer.rules.admonition_close=i},Vt=(e,t)=>{const o=e.attrs?e.attrs.slice():[];return t.forEach(t=>{const a=e.attrIndex(t[0]);a<0?o.push(t):(o[a]=o[a].slice(),o[a][1]+=` ${t[1]}`)}),o},qt=(e,t)=>{const o=e.renderer.rules.fence,a=e.utils.unescapeAll,n=/\[(\w*)(?::([\w ]*))?\]/,l=/::(open|close)/,r=e=>e.info?a(e.info).trim():"",i=e=>{const t=r(e),[o=null,a=""]=(n.exec(t)||[]).slice(1);return[o,a]},s=e=>{const t=r(e);return t?t.split(/(\s+)/g)[0]:""},c=e=>{const o=e.info.match(l)||[];return{open:"open"===o[1]||"close"!==o[1]&&t.codeFoldable&&e.content.trim().split("\n").length<t.autoFoldThreshold,tagContainer:o[1]||t.codeFoldable?"details":"div",tagHeader:o[1]||t.codeFoldable?"summary":"div"}},d=(a,r,d,u,m)=>{if(a[r].hidden)return"";const p=t.usedLanguageTextRef.value?.copyCode.text,g=t.customIconRef.value.copy||p,v=!!t.customIconRef.value.copy,h=`<span class="${ze}-collapse-tips">${Mt("collapse-tips",t.customIconRef.value)}</span>`,[f]=i(a[r]);if(null===f){const{open:n,tagContainer:i,tagHeader:s}=c(a[r]),f=[["class",`${ze}-code`]];n&&f.push(["open",""]);const b={attrs:Vt(a[r],f)};a[r].info=a[r].info.replace(l,"");const y=o(a,r,d,u,m);return`\n        <${i} ${m.renderAttrs(b)}>\n          <${s} class="${ze}-code-head">\n            <div class="${ze}-code-flag"><span></span><span></span><span></span></div>\n            <div class="${ze}-code-action">\n              <span class="${ze}-code-lang">${e.utils.escapeHtml(a[r].info.trim())}</span>\n              <span class="${ze}-copy-button" data-tips="${p}"${v?" data-is-icon=true":""}>${g}</span>\n              ${t.extraTools instanceof Function?t.extraTools({lang:a[r].info.trim()}):t.extraTools||""}\n              ${"details"===i?h:""}\n            </div>\n          </${s}>\n          ${y}\n        </${i}>\n      `}let b,y,k,w,x="",$="",T="";const{open:C,tagContainer:S,tagHeader:E}=c(a[r]),I=[["class",`${ze}-code`]];C&&I.push(["open",""]);const L={attrs:Vt(a[r],I)};for(let c=r;c<a.length&&(b=a[c],[y,k]=i(b),y===f);c++){b.info=b.info.replace(n,"").replace(l,""),b.hidden=!0;const i=`${ze}-codetab-${t.editorId}-${r}-${c-r}`;w=c-r>0?"":"checked",x+=`\n        <li>\n          <input\n            type="radio"\n            id="label-${ze}-codetab-label-1-${t.editorId}-${r}-${c-r}"\n            name="${ze}-codetab-label-${t.editorId}-${r}"\n            class="${i}"\n            ${w}\n          >\n          <label\n            for="label-${ze}-codetab-label-1-${t.editorId}-${r}-${c-r}"\n            onclick="this.getRootNode().querySelectorAll('.${i}').forEach(e => e.click())"\n          >\n            ${e.utils.escapeHtml(k||s(b))}\n          </label>\n        </li>`,$+=`\n        <div role="tabpanel">\n          <input\n            type="radio"\n            name="${ze}-codetab-pre-${t.editorId}-${r}"\n            class="${i}"\n            ${w}\n            role="presentation">\n          ${o(a,c,d,u,m)}\n        </div>`,T+=`\n        <input\n          type="radio"\n          name="${ze}-codetab-lang-${t.editorId}-${r}"\n          class="${i}"\n          ${w}\n          role="presentation">\n        <span class=${ze}-code-lang role="note">${e.utils.escapeHtml(s(b))}</span>`}return`\n      <${S} ${m.renderAttrs(L)}>\n        <${E} class="${ze}-code-head">\n          <div class="${ze}-code-flag">\n            <ul class="${ze}-codetab-label" role="tablist">${x}</ul>\n          </div>\n          <div class="${ze}-code-action">\n            <span class="${ze}-codetab-lang">${T}</span>\n            <span class="${ze}-copy-button" data-tips="${p}"${v?" data-is-icon=true":""}>${g}</span>\n            ${t.extraTools instanceof Function?t.extraTools({lang:a[r].info.trim()}):t.extraTools||""}\n            ${"details"===S?h:""}\n          </div>\n        </${E}>\n        ${$}\n      </${S}>\n    `};e.renderer.rules.fence=d,e.renderer.rules.code_block=d},Wt=(e,t)=>{const o=e.renderer.rules.fence.bind(e.renderer.rules);e.renderer.rules.fence=(a,n,l,r,i)=>{const s=a[n],c=s.content.trim();if("echarts"===s.info){if(s.attrSet("class",`${ze}-echarts`),s.attrSet("data-echarts-theme",t.themeRef.value),s.map&&0===s.level){const e=s.map[1]-1,t=!!r.srcLines[e]?.trim()?.startsWith("```");s.attrSet("data-closed",`${t}`),s.attrSet("data-line",String(s.map[0]))}return`<div ${i.renderAttrs(s)} style="width: 100%; aspect-ratio: 4 / 3;">${e.utils.escapeHtml(c)}</div>`}return o(a,n,l,r,i)}},_t=(e,t)=>{e.renderer.rules.heading_open=(o,a)=>{const n=o[a],l=o[a+1].children?.reduce((e,t)=>e+(["text","code_inline","math_inline"].includes(t.type)&&t.content||""),"")||"",r=n.markup.length;return t.headsRef.value.push({text:l,level:r,line:n.map[0],currentToken:n,nextToken:o[a+1]}),n.map&&0===n.level&&n.attrSet("id",t.mdHeadingId({text:l,level:r,index:t.headsRef.value.length,currentToken:n,nextToken:o[a+1]})),e.renderer.renderToken(o,a,t)},e.renderer.rules.heading_close=(e,t,o,a,n)=>n.renderToken(e,t,o)},Ut={block:[{open:"$$",close:"$$"},{open:"\\[",close:"\\]"}],inline:[{open:"$$",close:"$$"},{open:"$",close:"$"},{open:"\\[",close:"\\]"},{open:"\\(",close:"\\)"}]},Kt=(e,{katexRef:t,inlineDelimiters:o,blockDelimiters:a})=>{e.inline.ruler.before("escape","math_inline",(e=>(t,o)=>{const a=e.delimiters;let n,l,r;for(const e of a)if(t.src.startsWith(e.open,t.pos)){const a=t.pos+e.open.length;for(n=a;-1!==(n=t.src.indexOf(e.close,n));){for(r=n-1;"\\"===t.src[r];)r-=1;if((n-r)%2==1)break;n+=e.close.length}if(-1===n)return o||(t.pending+=e.open),t.pos=a,!0;if(n-a===0)return o||(t.pending+=e.open+e.close),t.pos=a+e.close.length,!0;if(!o){const o=t.src.slice(a,n);l=t.push("math_inline","math",0),l.markup=e.open,l.content=o}return t.pos=n+e.close.length,!0}return!1})({delimiters:o||Ut.inline})),e.block.ruler.after("blockquote","math_block",(e=>(t,o,a,n)=>{const l=e.delimiters;let r,i,s,c,d=!1,u=t.bMarks[o]+t.tShift[o],m=t.eMarks[o];for(const e of l)if(t.src.slice(u,u+e.open.length)===e.open&&t.src.slice(m-e.close.length,m)===e.close){if(u+=e.open.length,r=t.src.slice(u,m),n)return!0;for(r.trim().slice(-e.close.length)===e.close&&(r=r.trim().slice(0,-e.close.length),d=!0),s=o;!(d||(s++,s>=a||(u=t.bMarks[s]+t.tShift[s],m=t.eMarks[s],u<m&&t.tShift[s]<t.blkIndent)));)t.src.slice(u,m).trim().slice(-e.close.length)===e.close&&(c=t.src.slice(0,m).lastIndexOf(e.close),i=t.src.slice(u,c),d=!0);t.line=s+1;const l=t.push("math_block","math",0);return l.block=!0,l.content=(r&&r.trim()?r+"\n":"")+t.getLines(o+1,s,t.tShift[o],!0)+(i&&i.trim()?i:""),l.map=[o,t.line],l.markup=e.open,!0}return!1})({delimiters:a||Ut.block}),{alt:["paragraph","reference","blockquote","list"]}),e.renderer.rules.math_inline=(e,o,a,n,l)=>{const r=e[o],i={attrs:Vt(r,[["class",`${ze}-katex-inline`]])};if(t.value){const e=t.value.renderToString(r.content,Xe.katexConfig({throwOnError:!1}));return`<span ${l.renderAttrs(i)} data-processed>${e}</span>`}return`<span ${l.renderAttrs(i)}>${r.content}</span>`},e.renderer.rules.math_block=(e,o,a,n,l)=>{const r=e[o],i={attrs:Vt(r,[["class",`${ze}-katex-block`]])};if(t.value){const e=t.value.renderToString(r.content,Xe.katexConfig({throwOnError:!1,displayMode:!0}));return`<p ${l.renderAttrs(i)} data-processed>${e}</p>`}return`<p ${l.renderAttrs(i)}>${r.content}</p>`}},Xt=(e,t)=>{const o=e.renderer.rules.fence.bind(e.renderer.rules);e.renderer.rules.fence=(a,n,l,r,i)=>{const s=a[n],c=s.content.trim();if("mermaid"===s.info){if(s.attrSet("class",`${ze}-mermaid`),s.attrSet("data-mermaid-theme",t.themeRef.value),s.map&&0===s.level){const e=s.map[1]-1,t=!!r.srcLines[e]?.trim()?.startsWith("```");s.attrSet("data-closed",`${t}`),s.attrSet("data-line",String(s.map[0]))}const o=Pt.get(c);return o?(s.attrSet("data-processed",""),`<p ${i.renderAttrs(s)}>${o}</p>`):`<div ${i.renderAttrs(s)}>${e.utils.escapeHtml(c)}</div>`}return o(a,n,l,r,i)}},Gt=(e,t,o)=>{const a=e.attrIndex(t),n=[t,o];a<0?e.attrPush(n):(e.attrs=e.attrs||[],e.attrs[a]=n)},Yt=(e,t)=>(e=>"inline"===e.type)(e[t])&&(e=>"paragraph_open"===e.type)(e[t-1])&&(e=>"list_item_open"===e.type)(e[t-2])&&(e=>0===e.content.indexOf("[ ] ")||0===e.content.indexOf("[x] ")||0===e.content.indexOf("[X] "))(e[t]),Zt=(e,t)=>{const o=e[t].level-1;for(let a=t-1;a>=0;a--)if(e[a].level===o)return a;return-1},Jt=(e,t,o)=>{if(e.children=e.children||[],e.children.unshift(((e,t,o)=>{const a=new t("html_inline","",0),n=o.enabled?" ":' disabled="" ';return 0===e.content.indexOf("[ ] ")?a.content='<input class="task-list-item-checkbox"'+n+'type="checkbox">':(0===e.content.indexOf("[x] ")||0===e.content.indexOf("[X] "))&&(a.content='<input class="task-list-item-checkbox" checked=""'+n+'type="checkbox">'),a})(e,t,o)),e.children[1].content=e.children[1].content.slice(3),e.content=e.content.slice(3),o.label)if(o.labelAfter){e.children.pop();const o="task-item-"+Math.ceil(1e7*Math.random()-1e3);e.children[0].content=e.children[0].content.slice(0,-1)+' id="'+o+'">',e.children.push(((e,t,o)=>{const a=new o("html_inline","",0);return a.content='<label class="task-list-item-label" for="'+t+'">'+e+"</label>",a.attrs=[["for",t]],a})(e.content,o,t))}else e.children.unshift((e=>{const t=new e("html_inline","",0);return t.content="<label>",t})(t)),e.children.push((e=>{const t=new e("html_inline","",0);return t.content="</label>",t})(t))},Qt=(e,t={})=>{e.core.ruler.after("inline","github-task-lists",e=>{const o=e.tokens;for(let a=2;a<o.length;a++)Yt(o,a)&&(Jt(o[a],e.Token,t),Gt(o[a-2],"class","task-list-item"+(t.enabled?" enabled":" ")),Gt(o[Zt(o,a-2)],"class","contains-task-list"))})},eo={checked:{regexp:/- \[x\]/,value:"- [ ]"},unChecked:{regexp:/- \[\s\]/,value:"- [x]"}},to={modelValue:{type:String,default:""},onChange:{type:Function,default:()=>{}},onHtmlChanged:{type:Function,default:()=>{}},onGetCatalog:{type:Function,default:()=>{}},mdHeadingId:{type:Function,default:()=>""},noMermaid:{type:Boolean,default:!1},sanitize:{type:Function,default:e=>e},noKatex:{type:Boolean,default:!1},formatCopiedText:{type:Function,default:e=>e},noHighlight:{type:Boolean,default:!1},previewOnly:{type:Boolean,default:!1},noImgZoomIn:{type:Boolean},sanitizeMermaid:{type:Function},codeFoldable:{type:Boolean},autoFoldThreshold:{type:Number},onRemount:{type:Function},noEcharts:{type:Boolean}},oo={...to,updateModelValue:{type:Function,default:()=>{}},placeholder:{type:String,default:""},scrollAuto:{type:Boolean},autofocus:{type:Boolean},readonly:{type:Boolean},maxlength:{type:Number},autoDetectCode:{type:Boolean},onBlur:{type:Function,default:()=>{}},onFocus:{type:Function,default:()=>{}},completions:{type:Array},onInput:{type:Function},onDrop:{type:Function,default:()=>{}},inputBoxWidth:{type:String},oninputBoxWidthChange:{type:Function},transformImgUrl:{type:Function,default:e=>e},catalogLayout:{type:String},catalogMaxDepth:{type:Number}},ao=e({name:"UpdateOnDemand",props:{html:{type:String,required:!0}},setup(e){const o=r("editorId"),a=r("previewTheme"),n=r("showCodeRowNumber"),i=h(),s=e.html;return t(()=>e.html,e=>{const t=(e=>{const t=(new DOMParser).parseFromString(e,"text/html");return Array.from(t.body.childNodes)})(e),o=Array.from(i.value?.childNodes||[]),{updates:a,deletes:n}=((e,t)=>{const o=[],a=[];if(e.forEach((e,a)=>{const n=t[a];n?(e.nodeType!==n.nodeType||e.textContent!==n.textContent||1===e.nodeType&&e.outerHTML!==n.outerHTML)&&o.push({index:a,newNode:e}):o.push({index:a,newNode:e})}),t.length>e.length)for(let n=e.length;n<t.length;n++)a.push(t[n]);return{updates:o,deletes:a}})(t,o);((e,t)=>{i.value&&(t.forEach(e=>{e.remove()}),e.forEach(({index:e,newNode:t})=>{const o=i.value?.childNodes[e];o?i.value?.replaceChild(t.cloneNode(!0),o):i.value?.appendChild(t.cloneNode(!0))}))})(a,n)}),()=>l("div",{id:`${o}-preview`,class:[`${ze}-preview`,`${a?.value}-theme`,n&&`${ze}-scrn`],innerHTML:s,ref:i},null)}}),no=e({name:"ContentPreview",props:to,setup(e){const n=r("editorId"),i=r("setting"),{html:d,key:m}=((e,n)=>{const{editorConfig:l,markdownItPlugins:i}=Xe,c=r("editorId"),d=r("language"),m=r("usedLanguageText"),p=r("showCodeRowNumber"),g=r("theme"),v=r("customIcon"),y=r("rootRef"),k=r("setting"),w=h([]);let x=()=>{};const T=(e=>{const a=r("highlight"),n=f(Xe.editorExtensions.highlight.instance);return o(()=>{e.noHighlight||n.value||(Ht("link",{...a.value.css,rel:"stylesheet",id:Rt.hlcss}),Ht("script",{...a.value.js,id:Rt.hljs,onload(){n.value=window.hljs}},"hljs"))}),t(()=>a.value.css,()=>{var t;e.noHighlight||Xe.editorExtensions.highlight.instance||(t={...a.value.css,rel:"stylesheet",id:Rt.hlcss},document.getElementById(t.id)?.remove(),Ht("link",t))}),n})(e),C=(e=>{const t=f(Xe.editorExtensions.katex.instance);return o(()=>{if(e.noKatex||t.value)return;const{editorExtensions:o,editorExtensionsAttrs:a}=Xe;Ht("script",{...a.katex?.js,src:o.katex.js,id:Rt.katexjs,onload(){t.value=window.katex}},"katex"),Ht("link",{...a.katex?.css,rel:"stylesheet",href:o.katex.css,id:Rt.katexcss})}),t})(e),{reRenderRef:S,replaceMermaid:E}=(e=>{const a=r("editorId"),n=r("theme"),l=r("rootRef"),{editorExtensions:i,editorExtensionsAttrs:s,mermaidConfig:c}=Xe;let d=i.mermaid.instance;const u=f(-1),m=()=>{!e.noMermaid&&d&&(d.initialize(c({startOnLoad:!1,theme:"dark"===n.value?"dark":"default"})),u.value=u.value+1)};return t(()=>n.value,()=>{Pt.clear(),m()}),o(()=>{if(e.noMermaid||d)return;const t=i.mermaid.js;/\.mjs/.test(t)?(Ht("link",{...s.mermaid?.js,rel:"modulepreload",href:t,id:Rt.mermaidM}),import(t).then(e=>{d=e.default,m()}).catch(e=>{xt.emit(a,dt,{name:"mermaid",message:`Failed to load mermaid module: ${e.message}`,error:e})})):Ht("script",{...s.mermaid?.js,src:t,id:Rt.mermaid,onload(){d=window.mermaid,m()}},"mermaid")}),{reRenderRef:u,replaceMermaid:async()=>{if(!e.noMermaid&&d){const t=l.value.querySelectorAll(`div.${ze}-mermaid`),o=document.createElement("div"),n=document.body.offsetWidth>1366?document.body.offsetWidth:1366,r=document.body.offsetHeight>768?document.body.offsetHeight:768;o.style.width=n+"px",o.style.height=r+"px",o.style.position="fixed",o.style.zIndex="-10000",o.style.top="-10000";let i=t.length;i>0&&document.body.appendChild(o),await Promise.allSettled(Array.from(t).map(t=>(async t=>{if("false"===t.dataset.closed)return!1;const n=t.innerText;let l=Pt.get(n);if(!l){const r=$();let s={svg:""};try{s=await d.render(r,n,o),l=await e.sanitizeMermaid(s.svg);const a=document.createElement("p");a.className=`${ze}-mermaid`,a.setAttribute("data-processed",""),a.innerHTML=l,a.children[0]?.removeAttribute("height"),Pt.set(n,a.innerHTML),void 0!==t.dataset.line&&(a.dataset.line=t.dataset.line),t.replaceWith(a)}catch(B){xt.emit(a,dt,{name:"mermaid",message:B.message,error:B})}0===--i&&o.remove()}})(t)))}}}})(e),{reRenderEcharts:M,replaceEcharts:j}=(e=>{const n=r("editorId"),l=r("theme"),i=r("rootRef"),{editorExtensions:s,editorExtensionsAttrs:c}=Xe;let d=s.echarts.instance;const u=f(-1),m=()=>{!e.noEcharts&&d&&(u.value=u.value+1)};t(()=>l.value,()=>{m()}),o(()=>{if(e.noEcharts||d)return;const t=s.echarts.js;Ht("script",{...c.echarts?.js,src:t,id:Rt.echarts,onload(){d=window.echarts,m()}},"echarts")});let p,g=[],v=[];const h=()=>{g.forEach(e=>{e.dispose()}),v.forEach(e=>{e.disconnect()}),g=[],p=[],v=[]};return a(()=>{h()}),{reRenderEcharts:u,replaceEcharts:()=>{h(),!e.noEcharts&&d&&(p=Array.from(i.value.querySelectorAll(`#${n} div.${ze}-echarts:not([data-processed])`)),p.forEach(e=>{if("false"===e.dataset.closed)return!1;try{const t=new Function(`return ${e.innerText}`)(),o=d.init(e,l.value);o.setOption(t),e.setAttribute("data-processed",""),g.push(o);const a=new ResizeObserver(()=>{o.resize()});a.observe(e),v.push(a)}catch(x){xt.emit(n,dt,{name:"echarts",message:x?.message,error:x})}}))}}})(e),H=I({html:!0,breaks:!0,linkify:!0}),B=[{type:"image",plugin:L,options:{figcaption:!0,classes:"md-zoom"}},{type:"admonition",plugin:zt,options:{}},{type:"taskList",plugin:Qt,options:{}},{type:"heading",plugin:_t,options:{mdHeadingId:e.mdHeadingId,headsRef:w}},{type:"code",plugin:qt,options:{editorId:c,usedLanguageTextRef:m,codeFoldable:e.codeFoldable,autoFoldThreshold:e.autoFoldThreshold,customIconRef:v}},{type:"sub",plugin:A,options:{}},{type:"sup",plugin:F,options:{}}];e.noKatex||B.push({type:"katex",plugin:Kt,options:{katexRef:C}}),e.noMermaid||B.push({type:"mermaid",plugin:Xt,options:{themeRef:g}}),e.noEcharts||B.push({type:"echarts",plugin:Wt,options:{themeRef:g}}),i(B,{editorId:c}).forEach(e=>{H.use(e.plugin,e.options)});const O=H.options.highlight;H.set({highlight:(t,o,a)=>{if(O){const e=O(t,o,a);if(e)return e}let n;n=!e.noHighlight&&T.value?T.value.getLanguage(o)?T.value.highlight(t,{language:o,ignoreIllegals:!0}).value:T.value.highlightAuto(t).value:H.utils.escapeHtml(t);const l=p?((e,t)=>{if(!e)return e;const o=t.split("\n"),a=['<span rn-wrapper aria-hidden="true">'];return o.forEach(()=>{a.push("<span></span>")}),a.push("</span>"),`<span class="${ze}-code-block">${e}</span>${a.join("")}`})(n.replace(/^\n+|\n+$/g,""),t.replace(/^\n+|\n+$/g,"")):`<span class="${ze}-code-block">${n.replace(/^\n+|\n+$/g,"")}</span>`;return`<pre><code class="language-${o}" language=${o}>${l}</code></pre>`}}),(e=>{e.core.ruler.push("init-line-number",e=>(e.tokens.forEach(e=>{e.map&&(e.attrs||(e.attrs=[]),e.attrs.push(["data-line",e.map[0].toString()]))}),!0))})(H);const R=h(`_article-key_${$()}`),N=h(e.sanitize(H.render(e.modelValue,{srcLines:e.modelValue.split("\n")}))),D=()=>{xt.emit(c,ct,N.value),e.onHtmlChanged(N.value),e.onGetCatalog(w.value),xt.emit(c,vt,w.value),u(()=>{E().then(()=>{x(),x=Ot(y.value?.querySelectorAll(`#${c} p.${ze}-mermaid:not([data-closed=false])`),{customIcon:v.value})}),j()})},P=()=>{w.value=[],N.value=e.sanitize(H.render(e.modelValue,{srcLines:e.modelValue.split("\n")}))},z=s(()=>(e.noKatex||!!C.value)&&(e.noHighlight||!!T.value));let V=-1;return t([b(e,"modelValue"),z,S,d],()=>{V=window.setTimeout(()=>{P()},n?0:l.renderDelay)}),t(()=>k.value.preview,()=>{k.value.preview&&u(()=>{E().then(()=>{x(),x=Ot(y.value?.querySelectorAll(`#${c} p.${ze}-mermaid:not([data-closed=false])`),{customIcon:v.value})}),j(),xt.emit(c,vt,w.value)})}),t([N,M],()=>{D()}),o(D),o(()=>{xt.on(c,{name:ht,callback(){xt.emit(c,vt,w.value)}}),xt.on(c,{name:ft,callback:()=>{R.value=`_article-key_${$()}`,P()}})}),a(()=>{x(),clearTimeout(V)}),{html:N,key:R}})(e,e.previewOnly);return((e,a,n)=>{const l=r("editorId"),i=r("rootRef"),s=r("usedLanguageText"),c=r("setting"),d=()=>{i.value.querySelectorAll(`#${l} .${ze}-preview .${ze}-code`).forEach(t=>{let o=-1;const a=t.querySelector(`.${ze}-copy-button`);a&&(a.onclick=n=>{n.preventDefault(),clearTimeout(o);const l=(t.querySelector("input:checked + pre code")||t.querySelector("pre code")).textContent,{text:r,successTips:i,failTips:c}=s.value.copyCode;let d=i;E(e.formatCopiedText(l||"")).catch(()=>{d=c}).finally(()=>{a.dataset.isIcon?a.dataset.tips=d:a.innerHTML=d,o=window.setTimeout(()=>{a.dataset.isIcon?a.dataset.tips=r:a.innerHTML=r},1500)})})})},m=e=>{e&&u(d)};t([a,n],()=>{u(d)}),t(()=>c.value.preview,m),t(()=>c.value.htmlPreview,m),o(d)})(e,d,m),((e,a)=>{const n=r("editorId"),l=r("setting"),{noImgZoomIn:i}=e,s=y(()=>{const e=document.querySelectorAll(`#${n}-preview img:not(.not-zoom):not(.medium-zoom-image)`);0!==e.length&&j(e,{background:"#00000073"})});o(async()=>{!i&&l.value.preview&&await s()}),t([a,()=>l.value.preview],async()=>{!i&&l.value.preview&&await s()})})(e,d),((e,o)=>{const n=r("editorId"),l=r("rootRef");let i=()=>{};const s=()=>{if(!l.value)return!1;const t=l.value.querySelectorAll(".task-list-item.enabled"),o=t=>{t.preventDefault();const o=t.target.checked?"unChecked":"checked",a=t.target.parentElement?.dataset.line;if(!a)return;const l=Number(a),r=e.modelValue.split("\n"),i=r[Number(l)].replace(eo[o].regexp,eo[o].value);e.previewOnly?(r[Number(l)]=i,e.onChange(r.join("\n"))):xt.emit(n,yt,l+1,i)};t.forEach(e=>{e.addEventListener("click",o)}),i=()=>{t.forEach(e=>{e.removeEventListener("click",o)})}};a(()=>{i()}),t([o],()=>{i(),u(s)},{immediate:!0})})(e,d),((e,a,n)=>{const l=r("setting"),i=()=>{u(()=>{e.onRemount?.()})},s=e=>{e&&i()};t([a,n],i),t(()=>l.value.preview,s),t(()=>l.value.htmlPreview,s),o(i)})(e,d,m),()=>l(c,null,[i.value.preview&&(e.previewOnly?l(ao,{key:m.value,html:d.value},null):l("div",{id:`${n}-preview-wrapper`,class:`${ze}-preview-wrapper`,key:"content-preview-wrapper"},[l(ao,{key:m.value,html:d.value},null)])),i.value.htmlPreview&&l("div",{id:`${n}-html-wrapper`,class:`${ze}-preview-wrapper`,key:"html-preview-wrapper"},[l("div",{class:`${ze}-html`},[d.value])])])}}),lo={modelValue:{type:String,default:""},onChange:{type:Function,default:void 0},theme:{type:String,default:"light"},class:{type:String,default:""},language:{type:String,default:"zh-CN"},onHtmlChanged:{type:Function,default:void 0},onGetCatalog:{type:Function,default:void 0},editorId:{type:String,default:void 0},id:{type:String,default:void 0},showCodeRowNumber:{type:Boolean,default:!0},previewTheme:{type:String,default:"default"},style:{type:Object,default:()=>({})},mdHeadingId:{type:Function,default:({text:e})=>e},sanitize:{type:Function,default:e=>e},noMermaid:{type:Boolean,default:!1},noKatex:{type:Boolean,default:!1},codeTheme:{type:String,default:"atom"},formatCopiedText:{type:Function,default:e=>e},codeStyleReverse:{type:Boolean,default:!0},codeStyleReverseList:{type:Array,default:["default","mk-cute"]},noHighlight:{type:Boolean,default:!1},noImgZoomIn:{type:Boolean,default:!1},customIcon:{type:Object,default:{}},sanitizeMermaid:{type:Function,default:e=>Promise.resolve(e)},codeFoldable:{type:Boolean,default:!0},autoFoldThreshold:{type:Number,default:30},onRemount:{type:Function,default:void 0},noEcharts:{type:Boolean,default:!1}},ro={...lo,onSave:{type:Function,default:void 0},onUploadImg:{type:Function,default:void 0},pageFullscreen:{type:Boolean,default:!1},preview:{type:Boolean,default:!0},htmlPreview:{type:Boolean,default:!1},toolbars:{type:Array,default:_e},floatingToolbars:{type:Array,default:[]},toolbarsExclude:{type:Array,default:[]},noPrettier:{type:Boolean,default:!1},tabWidth:{type:Number,default:2},tableShape:{type:Array,default:[6,4]},placeholder:{type:String,default:""},defToolbars:{type:[String,Object],default:void 0},onError:{type:Function,default:void 0},footers:{type:Array,default:Ue},scrollAuto:{type:Boolean,default:!0},defFooters:{type:[String,Object],default:void 0},noUploadImg:{type:Boolean,default:!1},autoFocus:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},readOnly:{type:Boolean,default:!1},maxLength:{type:Number,default:void 0},autoDetectCode:{type:Boolean,default:!1},onBlur:{type:Function,default:void 0},onFocus:{type:Function,default:void 0},completions:{type:Array,default:void 0},showToolbarName:{type:Boolean,default:!1},onInput:{type:Function,default:void 0},onDrop:{type:Function,default:void 0},inputBoxWidth:{type:String,default:"50%"},oninputBoxWidthChange:{type:Function,default:void 0},transformImgUrl:{type:Function,default:e=>e},catalogLayout:{type:String,default:"fixed"},catalogMaxDepth:{type:Number,default:void 0}},io=["onHtmlChanged","onGetCatalog","onChange","onRemount","update:modelValue"],so=[...io,"onSave","onUploadImg","onError","onBlur","onFocus","onInput","onDrop","oninputBoxWidthChange"],co=e({name:"MdPreview",props:lo,emits:io,setup(e,t){const{noKatex:o,noMermaid:n,noHighlight:r}=e,i=h(),s=Dt(e);return Nt(e,{rootRef:i,editorId:s}),((e,t,o)=>{const{editorId:a}=o,n={rerender(){xt.emit(a,ft)}};t.expose(n)})(0,t,{editorId:s}),a(()=>{xt.clear(s)}),()=>l("div",{id:s,class:[ze,e.class,"dark"===e.theme&&`${ze}-dark`,`${ze}-previewOnly`],style:e.style,ref:i},[l(no,{modelValue:e.modelValue,onChange:o=>{e.onChange?.(o),t.emit("onChange",o),t.emit("update:modelValue",o)},onHtmlChanged:o=>{e.onHtmlChanged?.(o),t.emit("onHtmlChanged",o)},onGetCatalog:o=>{e.onGetCatalog?.(o),t.emit("onGetCatalog",o)},mdHeadingId:e.mdHeadingId,noMermaid:n,sanitize:e.sanitize,noKatex:o,formatCopiedText:e.formatCopiedText,noHighlight:r,noImgZoomIn:e.noImgZoomIn,previewOnly:!0,sanitizeMermaid:e.sanitizeMermaid,codeFoldable:e.codeFoldable,autoFoldThreshold:e.autoFoldThreshold,onRemount:()=>{e.onRemount?.(),t.emit("onRemount")},noEcharts:e.noEcharts},null)])}});co.install=e=>(e.component(co.name,co),e);const uo={bold:ue,underline:de,italic:ce,"strike-through":se,title:ie,sub:re,sup:le,quote:ne,"unordered-list":ae,"ordered-list":oe,task:te,"code-row":ee,code:K,link:Q,image:J,table:Z,revoke:Y,next:G,save:X,prettier:K,minimize:U,maximize:_,"fullscreen-exit":W,fullscreen:q,"preview-only":V,preview:z,"preview-html":P,catalog:D,github:()=>l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-github-icon"},[l("path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"},null),l("path",{d:"M9 18c-4.51 2-5-2-7-2"},null)]),mermaid:N,formula:R,close:O,delete:B,upload:H},mo=e({name:`${ze}-icon-set`,props:{name:{type:String,default:""}},setup:e=>()=>m(uo[e.name],{class:`${ze}-icon`})}),po=e({name:`${ze}-icon`,props:{name:{type:String,default:""}},setup(e){const t=r("customIcon");return()=>{const o=t.value[e.name];return"object"==typeof o?"object"==typeof o.component?m(o.component,o.props):l("span",{innerHTML:o.component},null):l(mo,{name:e.name},null)}}}),go=e({name:"MdModal",props:{title:{type:[String,Object],default:""},visible:{type:Boolean,default:!1},width:{type:String,default:"auto"},height:{type:String,default:"auto"},onClose:{type:Function},showAdjust:{type:Boolean,default:!1},isFullscreen:{type:Boolean,default:!1},onAdjust:{type:Function,default:()=>{}},class:{type:String,default:void 0},style:{type:[Object,String],default:()=>({})},showMask:{type:Boolean,default:!0}},emits:["onClose"],setup(e,a){const n=r("theme"),i=r("rootRef"),c=h(e.visible),d=h([`${ze}-modal`]),m=h(),g=h(),b=h(),y=f();let k=()=>{};const w=v({maskStyle:{zIndex:-1},modalStyle:{zIndex:-1},initPos:{left:"0px",top:"0px"},historyPos:{left:"0px",top:"0px"}}),x=s(()=>e.isFullscreen?{width:"100%",height:"100%"}:{width:e.width,height:e.height});t(()=>e.isFullscreen,e=>{e?k():u(()=>{k=jt(g.value,(e,t)=>{w.initPos.left=e+"px",w.initPos.top=t+"px"})})}),t(()=>e.visible,t=>{t?(w.maskStyle.zIndex=Xe.editorConfig.zIndex+Tt(),w.modalStyle.zIndex=Xe.editorConfig.zIndex+Tt(),d.value.push("zoom-in"),c.value=t,u(()=>{const t=m.value.offsetWidth/2,o=m.value.offsetHeight/2,a=document.documentElement.clientWidth/2,n=document.documentElement.clientHeight/2;w.initPos.left=a-t+"px",w.initPos.top=n-o+"px",e.isFullscreen||(k=jt(g.value,(e,t)=>{w.initPos.left=e+"px",w.initPos.top=t+"px"}))}),setTimeout(()=>{d.value=d.value.filter(e=>"zoom-in"!==e)},140)):(d.value.push("zoom-out"),k(),setTimeout(()=>{d.value=d.value.filter(e=>"zoom-out"!==e),c.value=t},130))});const $=s(()=>({display:c.value?"block":"none"})),T=s(()=>{if("string"==typeof e.style){const t=Object.entries($.value).map(([e,t])=>`${e}: ${t}`).join("; ");return[e.style,t].join("; ")}return e.style instanceof Object?{...$.value,...e.style}:$.value});return o(()=>{const e=i.value?.getRootNode();b.value=e instanceof Document?document.body:e}),()=>{const t=Ye({ctx:a}),o=Ye({props:e,ctx:a},"title");return b.value?l(p,{to:b.value},{default:()=>[l("div",{ref:y,class:`${ze}-modal-container`,"data-theme":n.value},[l("div",{class:e.class,style:T.value},[e.showMask&&l("div",{class:`${ze}-modal-mask`,style:w.maskStyle,onClick:()=>{e.onClose?.(),a.emit("onClose")}},null),l("div",{class:d.value,style:{...w.modalStyle,...w.initPos,...x.value},ref:m},[l("div",{class:`${ze}-modal-header`,ref:g},[o||""]),l("div",{class:`${ze}-modal-body`},[t]),l("div",{class:`${ze}-modal-func`},[e.showAdjust&&l("div",{class:`${ze}-modal-adjust`,onClick:t=>{t.stopPropagation(),e.isFullscreen?w.initPos=w.historyPos:(w.historyPos=w.initPos,w.initPos={left:"0",top:"0"}),e.onAdjust(!e.isFullscreen)}},[l(po,{name:e.isFullscreen?"minimize":"maximize"},null)]),l("div",{class:`${ze}-modal-close`,onClick:t=>{t.stopPropagation(),e.onClose?.(),a.emit("onClose")}},[l(po,{name:"close"},null)])])])])])]}):""}}});function vo(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!g(e)}go.install=e=>(e.component(go.name,go),e);const ho=e({name:"ModalToolbar",props:{title:{type:String,default:""},modalTitle:{type:[String,Object],default:""},visible:{type:Boolean,default:void 0},width:{type:String,default:"auto"},height:{type:String,default:"auto"},trigger:{type:[String,Object],default:void 0},onClick:{type:Function,default:void 0},onClose:{type:Function,default:void 0},showAdjust:{type:Boolean,default:!1},isFullscreen:{type:Boolean,default:!1},onAdjust:{type:Function,default:void 0},class:{type:String,default:void 0},style:{type:[Object,String],default:void 0},showMask:{type:Boolean,default:!0},insert:{type:Function,default:void 0},language:{type:String,default:void 0},theme:{type:String,default:void 0},previewTheme:{type:String,default:void 0},codeTheme:{type:String,default:void 0},disabled:{type:Boolean,default:void 0},showToolbarName:{type:Boolean,default:void 0}},emits:["onClick","onClose","onAdjust"],setup:(e,t)=>()=>{const o=Ye({props:e,ctx:t},"trigger"),a=Ye({props:e,ctx:t},"modalTitle"),n=Ye({props:e,ctx:t});return l(c,null,[l("button",{class:[`${ze}-toolbar-item`,e.disabled&&`${ze}-disabled`],title:e.title,disabled:e.disabled,onClick:()=>{e.onClick?.(),t.emit("onClick")},type:"button"},[o]),l(go,{style:e.style,class:e.class,width:e.width,height:e.height,title:a,visible:e.visible,showMask:e.showMask,onClose:()=>{e.onClose?.(),t.emit("onClose")},showAdjust:e.showAdjust,isFullscreen:e.isFullscreen,onAdjust:o=>{e.onAdjust?.(o),t.emit("onAdjust",o)}},vo(n)?n:{default:()=>[n]})])}});ho.install=e=>(e.component(ho.name,ho),e);const fo=e({name:"NormalToolbar",props:{title:{type:String,default:""},trigger:{type:[String,Object],default:void 0},onClick:{type:Function,default:void 0},insert:{type:Function,default:void 0},language:{type:String,default:void 0},theme:{type:String,default:void 0},previewTheme:{type:String,default:void 0},codeTheme:{type:String,default:void 0},disabled:{type:Boolean,default:void 0},showToolbarName:{type:Boolean,default:void 0}},emits:["onClick"],setup:(e,t)=>()=>{const o=Ye({props:e,ctx:t},"trigger"),a=Ye({props:e,ctx:t});return l("button",{class:[`${ze}-toolbar-item`,e.disabled&&`${ze}-disabled`],title:e.title,disabled:e.disabled,onClick:o=>{e.onClick?.(o),t.emit("onClick",o)},type:"button"},[a||o])}});fo.install=e=>(e.component(fo.name,fo),e);const bo=(e,a,n)=>{const l=r("editorId"),i=r("setting");let s=()=>{},c=()=>{};const d=()=>{s();const t=n.value?.view.contentDOM.getRootNode(),o=t?.querySelector(`#${l} .cm-scroller`),a=t?.querySelector(`[id="${l}-preview-wrapper"]`),r=t?.querySelector(`[id="${l}-html-wrapper"]`);(a||r)&&([c,s]=(a?It:Et)(o,a||r,n.value),e.scrollAuto&&c())};t([a,i],()=>{u(d)}),t(()=>e.scrollAuto,e=>{e?c():s()}),t(()=>i.value.previewOnly,e=>{e?s():c()}),o(d)},yo=async(e,t,o)=>{if(/^h[1-6]$/.test(e))return ko(e,t);if("prettier"===e)return await wo(t,o);switch(e){case"bold":case"underline":case"italic":case"strikeThrough":case"sub":case"sup":case"codeRow":case"katexInline":case"katexBlock":return $o(e,t);case"quote":case"orderedList":case"unorderedList":case"task":return Co(e,t);case"code":return So(o,t);case"table":return Lo(o);case"link":{const{desc:e="",url:t=""}=o,a=`[${e}](${t})`;return{text:a,options:{select:""===t,deviationStart:a.length-t.length-1,deviationEnd:-1}}}case"image":return Io(o);case"flow":case"sequence":case"gantt":case"class":case"state":case"pie":case"relationship":case"journey":return Eo(e);case"universal":return Ao(t.getSelectedText(),o);default:return{text:"",options:{}}}},ko=(e,t)=>{const o=e.slice(1),a="#".repeat(Number(o)),[n,l,r]=Fo(t,{wholeLine:!0});return{text:`${a} ${n}`,options:{deviationStart:a.length+1,replaceStart:l,replaceEnd:r}}},wo=async(e,t)=>{const o=window.prettier||Xe.editorExtensions.prettier?.prettierInstance,a=[window.prettierPlugins?.markdown||Xe.editorExtensions.prettier?.parserMarkdownInstance];return o&&a[0]?{text:await o.format(e.getValue(),{parser:"markdown",plugins:a}),options:{select:!1,replaceAll:!0}}:(xt.emit(t.editorId,dt,{name:"prettier",message:"prettier is undefined"}),{text:e.getValue(),options:{select:!1,replaceAll:!0}})},xo={bold:["**","**",2,-2],underline:["<u>","</u>",3,-4],italic:["*","*",1,-1],strikeThrough:["~~","~~",2,-2],sub:["~","~",1,-1],sup:["^","^",1,-1],codeRow:["`","`",1,-1],katexInline:["$","$",1,-1],katexBlock:["\n$$\n","\n$$\n",4,-4]},$o=(e,t)=>{const o=t.getSelectedText(),[a,n,l,r]=xo[e];return{text:`${a}${o}${n}`,options:{deviationStart:l,deviationEnd:r}}},To={quote:"> ",unorderedList:"- ",orderedList:1,task:"- [ ] "},Co=(e,t)=>{const[o,a,n]=Fo(t,{wholeLine:!0}),l=o.split("\n"),r=To[e],i="orderedList"===e?l.map((e,t)=>`${r+t}. ${e}`):l.map(e=>`${r}${e}`),s="orderedList"===e?"1. ":r.toString(),c=1===l.length?s.length:0;return{text:i.join("\n"),options:{deviationStart:c,replaceStart:a,replaceEnd:n}}},So=(e,t)=>{const[o,a,n]=Fo(t),l=e.mode||"language",r=`\n\`\`\`${l}\n${e.text||o||""}\n\`\`\`\n`;return{text:r,options:{deviationStart:4,deviationEnd:4+l.length-r.length,replaceStart:a,replaceEnd:n}}},Eo=e=>({text:`\n\`\`\`mermaid\n${{flow:"flowchart TD \n  Start --\x3e Stop",sequence:"sequenceDiagram\n  A->>B: hello!\n  B--\x3e>A: hi!",gantt:"gantt\ntitle Gantt Chart\ndateFormat  YYYY-MM-DD",class:"classDiagram\n  class Animal",state:"stateDiagram-v2\n  s1 --\x3e s2",pie:'pie\n  "Dogs" : 386\n  "Cats" : 85\n  "Rats" : 15',relationship:"erDiagram\n  CAR ||--o{ NAMED-DRIVER : allows",journey:"journey\n  title My Journey",...Xe.editorConfig.mermaidTemplate}[e]}\n\`\`\`\n`,options:{deviationStart:12,deviationEnd:-5}}),Io=e=>{const{desc:t="",url:o="",urls:a}=e;let n="";const l=""===o&&(!a||a instanceof Array&&0===a.length);return n=a instanceof Array?a.reduce((e,t)=>{const{url:o="",alt:a="",title:n=""}="object"==typeof t?t:{url:t};return e+`![${a}](${o}${n?" '"+n+"'":""})\n`},""):`![${t}](${o})\n`,{text:n,options:{select:""===o,deviationStart:l?n.length-o.length-2:n.length,deviationEnd:l?-2:0}}},Lo=e=>{const{selectedShape:t={x:1,y:1}}=e,{x:o,y:a}=t;let n="\n| Column";for(let l=0;l<=a;l++)n+=" |";n+="\n|";for(let l=0;l<=a;l++)n+=" - |";for(let l=0;l<=o;l++){n+="\n|";for(let e=0;e<=a;e++)n+=" |"}return n+="\n",{text:n,options:{deviationStart:3,deviationEnd:10-n.length}}},Ao=(e,t)=>{const{generate:o}=t,a=o(e);return{text:a.targetValue,options:{select:a.select??!0,deviationStart:a.deviationStart||0,deviationEnd:a.deviationEnd||0}}},Fo=(e,t={wholeLine:!1})=>{const o=e.view.state,a=o.selection.main;if(a.empty){const e=o.doc.lineAt(a.from);return[o.doc.lineAt(a.from).text,e.from,e.to]}if(t.wholeLine){const e=o.doc.lineAt(a.from),t=o.doc.lineAt(a.to);return[o.doc.sliceString(e.from,t.to),e.from,t.to]}return[o.doc.sliceString(a.from,a.to),a.from,a.to]},Mo=e=>{const t=new xe;return o=>(t.get(e.state)?e.dispatch({effects:t.reconfigure(o)}):e.dispatch({effects:$e.appendConfig.of(t.of(o))}),!0)};class jo{view;maxLength=Number.MAX_SAFE_INTEGER;toggleTabSize;togglePlaceholder;setExtensions;toggleDisabled;toggleReadOnly;toggleMaxlength;getValue(){return this.view.state.doc.toString()}setValue(e,t=0,o=this.view.state.doc.length){this.view.dispatch({changes:{from:t,to:o,insert:e}})}getSelectedText(){const{from:e,to:t}=this.view.state.selection.main;return this.view.state.sliceDoc(e,t)}replaceSelectedText(e,t,o){const a={select:!0,deviationStart:0,deviationEnd:0,replaceAll:!1,replaceStart:-1,replaceEnd:-1,...t};try{if(a.replaceAll){if(this.setValue(e),e.length>this.maxLength)throw new Error("The input text is too long");return}if(this.view.state.doc.length-this.getSelectedText().length+e.length>this.maxLength)throw new Error("The input text is too long");const{from:t}=this.view.state.selection.main;-1!==a.replaceStart?this.view.dispatch({changes:{from:a.replaceStart,to:a.replaceEnd,insert:e}}):this.view.dispatch(this.view.state.replaceSelection(e)),a.select&&this.view.dispatch({selection:{anchor:-1===a.replaceStart?t+a.deviationStart:a.replaceStart+a.deviationStart,head:-1===a.replaceStart?t+e.length+a.deviationEnd:a.replaceStart+e.length+a.deviationEnd}}),this.view.focus()}catch(n){if("The input text is too long"!==n.message)throw n;xt.emit(o,dt,{name:"overlength",message:n.message,data:e})}}constructor(e){this.view=e,this.toggleTabSize=Mo(this.view),this.togglePlaceholder=Mo(this.view),this.setExtensions=Mo(this.view),this.toggleDisabled=Mo(this.view),this.toggleReadOnly=Mo(this.view),this.toggleMaxlength=Mo(this.view)}setTabSize(e){this.toggleTabSize([Ce.tabSize.of(e),Re.of(" ".repeat(e))])}setPlaceholder(e){this.togglePlaceholder(Fe(e))}focus(e){if(this.view.focus(),!e)return;let t=0,o=0,a=0;switch(e){case"start":break;case"end":t=o=a=this.getValue().length;break;default:t=e.rangeAnchor||e.cursorPos,o=e.rangeHead||e.cursorPos,a=e.cursorPos}this.view.dispatch({scrollIntoView:!0,selection:Se.create([Se.range(t,o),Se.cursor(a)],1)})}setDisabled(e){this.toggleDisabled([Ie.editable.of(!e)])}setReadOnly(e){this.toggleReadOnly([Ce.readOnly.of(e)])}setMaxLength(e){this.maxLength=e,this.toggleMaxlength([Ce.changeFilter.of(t=>t.newDoc.length<=e)])}}const Ho=(e,t,o,a,n)=>(l,r,i,s)=>{const c=`${e}${t}${o}${a}`,d=i+r.label.length+("title"===n?o.length:0);l.dispatch({changes:{from:i,to:s,insert:c},selection:Se.create([Se.range(i+r.label.length+("title"===n?1:-t.length),d),Se.cursor(d)],1)}),l.focus()},Bo=e=>(t,o,a,n)=>{const l=e.slice(n-a);t.dispatch(t.state.replaceSelection(`${l} `))},Oo=e=>{const t=e=>{const t=e.matchBefore(/^#+|^-\s*\[*\s*\]*|`+|\[|!\[*|^\|\s?\|?|\$\$?|!+\s*\w*/);return null===t||t.from==t.to&&e.explicit?null:{from:t.from,options:[...["h2","h3","h4","h5","h6"].map((e,t)=>{const o=new Array(t+2).fill("#").join("");return{label:o,type:"text",apply:Bo(o)}}),...["unchecked","checked"].map(e=>{const t="checked"===e?"- [x]":"- [ ]";return{label:t,type:"text",apply:Bo(t)}}),...[["`",""],["```","language"],["```mermaid\n",""],["```echarts\n",""]].map(e=>({label:`${e[0]}${e[1]}`,type:"text",apply:Ho(e[0],e[1],"","`"===e[0]?"`":"\n```","type")})),{label:"[]()",type:"text"},{label:"![]()",type:"text"},{label:"| |",type:"text",detail:"table",apply:"| col | col | col |\n| - | - | - |\n| content | content | content |\n| content | content | content |"},{label:"$",type:"text",apply:Ho("$","","","$","type")},{label:"$$",type:"text",apply:Ho("$$","","\n","\n$$","title")},...["note","abstract","info","tip","success","question","warning","failure","danger","bug","example","quote","hint","caution","error","attention"].map(e=>({label:`!!! ${e}`,type:"text",apply:Ho("!!!",` ${e}`," Title","\n\n!!!","title")}))]}};return Ne({override:e?[t,...e]:[t]})},Ro=e({name:`${ze}-divider`,setup:()=>()=>l("div",{class:`${ze}-divider`},null)}),No=e({name:"ToolbarBold",setup(){const e=r("editorId"),t=r("usedLanguageText"),o=r("disabled"),a=r("showToolbarName");return()=>l("button",{class:[`${ze}-toolbar-item`,o?.value&&`${ze}-disabled`],title:t.value.toolbarTips?.bold,disabled:o?.value,onClick:()=>{xt.emit(e,ut,"bold")},type:"button"},[l(po,{name:"bold"},null),a?.value&&l("div",{class:`${ze}-toolbar-item-name`},[t.value.toolbarTips?.bold])])}}),Do=e({name:"ToolbarCatalog",setup(){const e=r("editorId"),t=r("usedLanguageText"),o=r("disabled"),a=r("showToolbarName"),n=r("catalogVisible");return()=>l("button",{class:[`${ze}-toolbar-item`,n.value&&`${ze}-toolbar-active`,o?.value&&`${ze}-disabled`],title:t.value.toolbarTips?.catalog,disabled:o?.value,onClick:()=>{xt.emit(e,tt)},key:"bar-catalog",type:"button"},[l(po,{name:"catalog"},null),a?.value&&l("div",{class:`${ze}-toolbar-item-name`},[t.value.toolbarTips?.catalog])])}}),Po=e({name:"ToolbarCode",setup(){const e=r("editorId"),t=r("usedLanguageText"),o=r("disabled"),a=r("showToolbarName");return()=>l("button",{class:[`${ze}-toolbar-item`,o?.value&&`${ze}-disabled`],title:t.value.toolbarTips?.code,disabled:o?.value,onClick:()=>{xt.emit(e,ut,"code")},type:"button"},[l(po,{name:"code"},null),a?.value&&l("div",{class:`${ze}-toolbar-item-name`},[t.value.toolbarTips?.code])])}}),zo=e({name:"ToolbarCodeRow",setup(){const e=r("editorId"),t=r("usedLanguageText"),o=r("disabled"),a=r("showToolbarName");return()=>l("button",{class:[`${ze}-toolbar-item`,o?.value&&`${ze}-disabled`],title:t.value.toolbarTips?.codeRow,disabled:o?.value,onClick:()=>{xt.emit(e,ut,"codeRow")},type:"button"},[l(po,{name:"code-row"},null),a?.value&&l("div",{class:`${ze}-toolbar-item-name`},[t.value.toolbarTips?.codeRow])])}}),Vo=e({name:"ToolbarFullscreen",setup(){const e=r("usedLanguageText"),t=r("disabled"),o=r("showToolbarName"),a=r("setting"),{fullscreenHandler:n}=ya();return()=>l("button",{class:[`${ze}-toolbar-item`,a.value.fullscreen&&`${ze}-toolbar-active`,t?.value&&`${ze}-disabled`],title:e.value.toolbarTips?.fullscreen,disabled:t?.value,onClick:()=>{n()},type:"button"},[l(po,{name:a.value.fullscreen?"fullscreen-exit":"fullscreen"},null),o?.value&&l("div",{class:`${ze}-toolbar-item-name`},[e.value.toolbarTips?.fullscreen])])}}),qo=e({name:"ToolbarGithub",setup(){const e=r("usedLanguageText"),t=r("disabled"),o=r("showToolbarName");return()=>l("button",{class:[`${ze}-toolbar-item`,t?.value&&`${ze}-disabled`],title:e.value.toolbarTips?.github,disabled:t?.value,onClick:()=>{S("https://github.com/imzbf/md-editor-v3")},type:"button"},[l(po,{name:"github"},null),o?.value&&l("div",{class:`${ze}-toolbar-item-name`},[e.value.toolbarTips?.github])])}}),Wo=e({name:"ToolbarHtmlPreview",setup(){const e=r("usedLanguageText"),t=r("disabled"),o=r("showToolbarName"),a=r("setting"),n=r("updateSetting");return()=>l("button",{class:[`${ze}-toolbar-item`,a.value.htmlPreview&&`${ze}-toolbar-active`,t?.value&&`${ze}-disabled`],title:e.value.toolbarTips?.htmlPreview,disabled:t?.value,onClick:()=>{n("htmlPreview")},type:"button"},[l(po,{name:"preview-html"},null),o?.value&&l("div",{class:`${ze}-toolbar-item-name`},[e.value.toolbarTips?.htmlPreview])])}}),_o=e({name:"ToolbarImage",setup(){const e=r("editorId"),t=r("usedLanguageText"),o=r("disabled"),a=r("showToolbarName");return()=>l("button",{class:[`${ze}-toolbar-item`,o?.value&&`${ze}-disabled`],title:t.value.toolbarTips?.image,disabled:o?.value,onClick:()=>{xt.emit(e,ut,"image")},type:"button"},[l(po,{name:"image"},null),a?.value&&l("div",{class:`${ze}-toolbar-item-name`},[t.value.toolbarTips?.image])])}}),Uo={visible:{type:Boolean,default:!1},onCancel:{type:Function,default:()=>{}},onOk:{type:Function,default:()=>{}}},Ko=e({name:`${ze}-modal-clip`,props:Uo,setup(e){const o=r("usedLanguageText"),a=r("editorId"),n=r("rootRef");let i=Xe.editorExtensions.cropper.instance;const s=h(),c=h(),d=h(),m=v({cropperInited:!1,imgSelected:!1,imgSrc:"",isFullscreen:!1});let p=null;t(()=>e.visible,()=>{e.visible&&!m.cropperInited&&(i=i||window.Cropper,s.value.onchange=()=>{if(!i)return void xt.emit(a,dt,{name:"Cropper",message:"Cropper is undefined"});const e=s.value.files||[];if(m.imgSelected=!0,e?.length>0){const t=new FileReader;t.onload=e=>{m.imgSrc=e.target.result},t.readAsDataURL(e[0])}})}),t(()=>[m.imgSelected],()=>{d.value.style=""}),t([b(()=>m.isFullscreen),b(()=>m.imgSrc)],()=>{m.imgSrc&&u(()=>{p?.destroy(),d.value.style="",c.value&&(p=new i(c.value,{viewMode:2,preview:n.value.getRootNode().querySelector(`.${ze}-clip-preview-target`)}))})});const g=()=>{p.clear(),p.destroy(),p=null,s.value.value="",m.imgSelected=!1,m.imgSrc=""};return()=>l(go,{class:`${ze}-modal-clip`,title:o.value.clipModalTips?.title,visible:e.visible,onClose:e.onCancel,showAdjust:!0,isFullscreen:m.isFullscreen,onAdjust:e=>{m.isFullscreen=e},width:"668px",height:"421px"},{default:()=>[l("div",{class:`${ze}-form-item ${ze}-clip`},[l("div",{class:`${ze}-clip-main`},[m.imgSelected?l("div",{class:`${ze}-clip-cropper`},[l("img",{src:m.imgSrc,ref:c,style:{display:"none"},alt:""},null),l("div",{class:`${ze}-clip-delete`,onClick:g},[l(po,{name:"delete"},null)])]):l("div",{class:`${ze}-clip-upload`,onClick:()=>{s.value.click()},role:"button",tabindex:"0","aria-label":o.value.imgTitleItem?.upload},[l(po,{name:"upload"},null)])]),l("div",{class:`${ze}-clip-preview`},[l("div",{class:`${ze}-clip-preview-target`,ref:d},null)])]),l("div",{class:`${ze}-form-item`},[l("button",{class:`${ze}-btn`,type:"button",onClick:()=>{if(p){const t=p.getCroppedCanvas();xt.emit(a,mt,[$t(t.toDataURL("image/png"))],e.onOk),g()}}},[o.value.clipModalTips?.buttonUpload||o.value.linkModalTips?.buttonOK])]),l("input",{ref:s,accept:"image/*",type:"file",multiple:!1,style:{display:"none"},"aria-hidden":"true"},null)]})}}),Xo={clipVisible:{type:Boolean,default:!1},onCancel:{type:Function,default:()=>{}},onOk:{type:Function,default:()=>{}}},Go=e({name:`${ze}-modals`,props:Xo,setup:e=>()=>l(Ko,{visible:e.clipVisible,onOk:e.onOk,onCancel:e.onCancel},null)}),Yo=e({name:"ToolbarImageDropdown",setup(){const e=r("editorId"),t=r("usedLanguageText"),a=r("disabled"),n=r("showToolbarName"),i=`${e}-toolbar-wrapper`,s=h(!1),d=h(!1),u=h(),m=()=>{xt.emit(e,mt,Array.from(u.value.files||[])),u.value.value=""},p=(t,o)=>{a?.value||xt.emit(e,ut,t,o)};return o(()=>{u.value.addEventListener("change",m)}),()=>l(c,null,[l("label",{for:`${i}_label`,style:{display:"none"},"aria-label":t.value.imgTitleItem?.upload},null),l("input",{id:`${i}_label`,ref:u,accept:"image/*",type:"file",multiple:!0,style:{display:"none"}},null),l(Je,{relative:`#${i}`,visible:s.value,onChange:e=>{s.value=e},disabled:a?.value,overlay:l("ul",{class:`${ze}-menu`,onClick:()=>{s.value=!1},role:"menu"},[l("li",{class:`${ze}-menu-item ${ze}-menu-item-image`,onClick:()=>{p("image")},role:"menuitem",tabindex:"0"},[t.value.imgTitleItem?.link]),l("li",{class:`${ze}-menu-item ${ze}-menu-item-image`,onClick:()=>{u.value.click()},role:"menuitem",tabindex:"0"},[t.value.imgTitleItem?.upload]),l("li",{class:`${ze}-menu-item ${ze}-menu-item-image`,onClick:()=>{d.value=!0},role:"menuitem",tabindex:"0"},[t.value.imgTitleItem?.clip2upload])])},{default:()=>[l("button",{class:[`${ze}-toolbar-item`,a?.value&&`${ze}-disabled`],title:t.value.toolbarTips?.image,disabled:a?.value,type:"button"},[l(po,{name:"image"},null),n?.value&&l("div",{class:`${ze}-toolbar-item-name`},[t.value.toolbarTips?.image])])]}),l(Go,{clipVisible:d.value,onCancel:()=>{d.value=!1},onOk:e=>{e&&p("image",{desc:e.desc,url:e.url,transform:!0}),d.value=!1}},null)])}}),Zo=e({name:"ToolbarItalic",setup(){const e=r("editorId"),t=r("usedLanguageText"),o=r("disabled"),a=r("showToolbarName");return()=>l("button",{class:[`${ze}-toolbar-item`,o?.value&&`${ze}-disabled`],title:t.value.toolbarTips?.italic,disabled:o?.value,onClick:()=>{xt.emit(e,ut,"italic")},type:"button"},[l(po,{name:"italic"},null),a?.value&&l("div",{class:`${ze}-toolbar-item-name`},[t.value.toolbarTips?.italic])])}}),Jo=e({name:"ToolbarKatex",setup(){const e=r("editorId"),t=r("usedLanguageText"),o=r("disabled"),a=r("showToolbarName"),n=`${e}-toolbar-wrapper`,i=h(!1),s=t=>{o?.value||xt.emit(e,ut,t)};return()=>l(Je,{relative:`#${n}`,visible:i.value,onChange:e=>{i.value=e},disabled:o?.value,overlay:l("ul",{class:`${ze}-menu`,onClick:()=>{i.value=!1},role:"menu"},[l("li",{class:`${ze}-menu-item ${ze}-menu-item-katex`,onClick:()=>{s("katexInline")},role:"menuitem",tabindex:"0"},[t.value.katex?.inline]),l("li",{class:`${ze}-menu-item ${ze}-menu-item-katex`,onClick:()=>{s("katexBlock")},role:"menuitem",tabindex:"0"},[t.value.katex?.block])]),key:"bar-katex"},{default:()=>[l("button",{class:[`${ze}-toolbar-item`,o?.value&&`${ze}-disabled`],title:t.value.toolbarTips?.katex,disabled:o?.value,type:"button"},[l(po,{name:"formula"},null),a?.value&&l("div",{class:`${ze}-toolbar-item-name`},[t.value.toolbarTips?.katex])])]})}}),Qo=e({name:"ToolbarLink",setup(){const e=r("editorId"),t=r("usedLanguageText"),o=r("disabled"),a=r("showToolbarName");return()=>l("button",{class:[`${ze}-toolbar-item`,o?.value&&`${ze}-disabled`],title:t.value.toolbarTips?.link,disabled:o?.value,onClick:()=>{xt.emit(e,ut,"link")},type:"button"},[l(po,{name:"link"},null),a?.value&&l("div",{class:`${ze}-toolbar-item-name`},[t.value.toolbarTips?.link])])}}),ea=e({name:"ToolbarMermaid",setup(){const e=r("editorId"),t=r("usedLanguageText"),o=r("disabled"),a=r("showToolbarName"),n=`${e}-toolbar-wrapper`,i=h(!1),s=t=>{o?.value||xt.emit(e,ut,t)};return()=>l(Je,{relative:`#${n}`,visible:i.value,onChange:e=>{i.value=e},disabled:o?.value,overlay:l("ul",{class:`${ze}-menu`,onClick:()=>{i.value=!1},role:"menu"},[l("li",{class:`${ze}-menu-item ${ze}-menu-item-mermaid`,onClick:()=>{s("flow")},role:"menuitem",tabindex:"0"},[t.value.mermaid?.flow]),l("li",{class:`${ze}-menu-item ${ze}-menu-item-mermaid`,onClick:()=>{s("sequence")},role:"menuitem",tabindex:"0"},[t.value.mermaid?.sequence]),l("li",{class:`${ze}-menu-item ${ze}-menu-item-mermaid`,onClick:()=>{s("gantt")},role:"menuitem",tabindex:"0"},[t.value.mermaid?.gantt]),l("li",{class:`${ze}-menu-item ${ze}-menu-item-mermaid`,onClick:()=>{s("class")},role:"menuitem",tabindex:"0"},[t.value.mermaid?.class]),l("li",{class:`${ze}-menu-item ${ze}-menu-item-mermaid`,onClick:()=>{s("state")},role:"menuitem",tabindex:"0"},[t.value.mermaid?.state]),l("li",{class:`${ze}-menu-item ${ze}-menu-item-mermaid`,onClick:()=>{s("pie")},role:"menuitem",tabindex:"0"},[t.value.mermaid?.pie]),l("li",{class:`${ze}-menu-item ${ze}-menu-item-mermaid`,onClick:()=>{s("relationship")},role:"menuitem",tabindex:"0"},[t.value.mermaid?.relationship]),l("li",{class:`${ze}-menu-item ${ze}-menu-item-mermaid`,onClick:()=>{s("journey")},role:"menuitem",tabindex:"0"},[t.value.mermaid?.journey])]),key:"bar-mermaid"},{default:()=>[l("button",{class:[`${ze}-toolbar-item`,o?.value&&`${ze}-disabled`],title:t.value.toolbarTips?.mermaid,disabled:o?.value,type:"button"},[l(po,{name:"mermaid"},null),a?.value&&l("div",{class:`${ze}-toolbar-item-name`},[t.value.toolbarTips?.mermaid])])]})}}),ta=e({name:"ToolbarNext",setup(){const e=r("editorId"),t=r("usedLanguageText"),o=r("disabled"),a=r("showToolbarName");return()=>l("button",{class:[`${ze}-toolbar-item`,o?.value&&`${ze}-disabled`],title:t.value.toolbarTips?.next,disabled:o?.value,onClick:()=>{xt.emit(e,gt)},type:"button"},[l(po,{name:"next"},null),a?.value&&l("div",{class:`${ze}-toolbar-item-name`},[t.value.toolbarTips?.next])])}}),oa=e({name:"ToolbarOrderedList",setup(){const e=r("editorId"),t=r("usedLanguageText"),o=r("disabled"),a=r("showToolbarName");return()=>l("button",{class:[`${ze}-toolbar-item`,o?.value&&`${ze}-disabled`],title:t.value.toolbarTips?.orderedList,disabled:o?.value,onClick:()=>{xt.emit(e,ut,"orderedList")},type:"button"},[l(po,{name:"ordered-list"},null),a?.value&&l("div",{class:`${ze}-toolbar-item-name`},[t.value.toolbarTips?.orderedList])])}}),aa=e({name:"ToolbarPageFullscreen",setup(){const e=r("usedLanguageText"),t=r("disabled"),o=r("showToolbarName"),a=r("setting"),n=r("updateSetting");return()=>l("button",{class:[`${ze}-toolbar-item`,a.value.pageFullscreen&&`${ze}-toolbar-active`,t?.value&&`${ze}-disabled`],title:e.value.toolbarTips?.pageFullscreen,disabled:t?.value,onClick:()=>{n("pageFullscreen")},type:"button"},[l(po,{name:a.value.pageFullscreen?"minimize":"maximize"},null),o?.value&&l("div",{class:`${ze}-toolbar-item-name`},[e.value.toolbarTips?.pageFullscreen])])}}),na=e({name:"ToolbarPrettier",setup(){const e=r("editorId"),t=r("usedLanguageText"),o=r("disabled"),a=r("showToolbarName");return()=>l("button",{class:[`${ze}-toolbar-item`,o?.value&&`${ze}-disabled`],title:t.value.toolbarTips?.prettier,disabled:o?.value,onClick:()=>{xt.emit(e,ut,"prettier")},type:"button"},[l(po,{name:"prettier"},null),a?.value&&l("div",{class:`${ze}-toolbar-item-name`},[t.value.toolbarTips?.prettier])])}}),la=e({name:"ToolbarPreview",setup(){const e=r("usedLanguageText"),t=r("disabled"),o=r("showToolbarName"),a=r("setting"),n=r("updateSetting");return()=>l("button",{class:[`${ze}-toolbar-item`,a.value.preview&&`${ze}-toolbar-active`,t?.value&&`${ze}-disabled`],title:e.value.toolbarTips?.preview,disabled:t?.value,onClick:()=>{n("preview")},type:"button"},[l(po,{name:"preview"},null),o?.value&&l("div",{class:`${ze}-toolbar-item-name`},[e.value.toolbarTips?.preview])])}}),ra=e({name:"ToolbarPreviewOnly",setup(){const e=r("usedLanguageText"),t=r("disabled"),o=r("showToolbarName"),a=r("setting"),n=r("updateSetting");return()=>l("button",{class:[`${ze}-toolbar-item`,a.value.previewOnly&&`${ze}-toolbar-active`,t?.value&&`${ze}-disabled`],title:e.value.toolbarTips?.previewOnly,disabled:t?.value,onClick:()=>{n("previewOnly")},type:"button"},[l(po,{name:"preview-only"},null),o?.value&&l("div",{class:`${ze}-toolbar-item-name`},[e.value.toolbarTips?.previewOnly])])}}),ia=e({name:"ToolbarQuote",setup(){const e=r("editorId"),t=r("usedLanguageText"),o=r("disabled"),a=r("showToolbarName");return()=>l("button",{class:[`${ze}-toolbar-item`,o?.value&&`${ze}-disabled`],title:t.value.toolbarTips?.quote,disabled:o?.value,onClick:()=>{xt.emit(e,ut,"quote")},type:"button"},[l(po,{name:"quote"},null),a?.value&&l("div",{class:`${ze}-toolbar-item-name`},[t.value.toolbarTips?.quote])])}}),sa=e({name:"ToolbarRevoke",setup(){const e=r("editorId"),t=r("usedLanguageText"),o=r("disabled"),a=r("showToolbarName");return()=>l("button",{class:[`${ze}-toolbar-item`,o?.value&&`${ze}-disabled`],title:t.value.toolbarTips?.revoke,disabled:o?.value,onClick:()=>{xt.emit(e,pt)},type:"button"},[l(po,{name:"revoke"},null),a?.value&&l("div",{class:`${ze}-toolbar-item-name`},[t.value.toolbarTips?.revoke])])}}),ca=e({name:"ToolbarSave",setup(){const e=r("editorId"),t=r("usedLanguageText"),o=r("disabled"),a=r("showToolbarName");return()=>l("button",{class:[`${ze}-toolbar-item`,o?.value&&`${ze}-disabled`],title:t.value.toolbarTips?.save,disabled:o?.value,onClick:()=>{xt.emit(e,et)},type:"button"},[l(po,{name:"save"},null),a?.value&&l("div",{class:`${ze}-toolbar-item-name`},[t.value.toolbarTips?.save])])}}),da=e({name:"ToolbarStrikeThrough",setup(){const e=r("editorId"),t=r("usedLanguageText"),o=r("disabled"),a=r("showToolbarName");return()=>l("button",{class:[`${ze}-toolbar-item`,o?.value&&`${ze}-disabled`],title:t.value.toolbarTips?.strikeThrough,disabled:o?.value,onClick:()=>{xt.emit(e,ut,"strikeThrough")},type:"button"},[l(po,{name:"strike-through"},null),a?.value&&l("div",{class:`${ze}-toolbar-item-name`},[t.value.toolbarTips?.strikeThrough])])}}),ua=e({name:"ToolbarSub",setup(){const e=r("editorId"),t=r("usedLanguageText"),o=r("disabled"),a=r("showToolbarName");return()=>l("button",{class:[`${ze}-toolbar-item`,o?.value&&`${ze}-disabled`],title:t.value.toolbarTips?.sub,disabled:o?.value,onClick:()=>{xt.emit(e,ut,"sub")},type:"button"},[l(po,{name:"sub"},null),a?.value&&l("div",{class:`${ze}-toolbar-item-name`},[t.value.toolbarTips?.sub])])}}),ma=e({name:"ToolbarSup",setup(){const e=r("editorId"),t=r("usedLanguageText"),o=r("disabled"),a=r("showToolbarName");return()=>l("button",{class:[`${ze}-toolbar-item`,o?.value&&`${ze}-disabled`],title:t.value.toolbarTips?.sup,disabled:o?.value,onClick:()=>{xt.emit(e,ut,"sup")},type:"button"},[l(po,{name:"sup"},null),a?.value&&l("div",{class:`${ze}-toolbar-item-name`},[t.value.toolbarTips?.sup])])}}),pa=e({name:"TableShape",props:{tableShape:{type:Array,default:()=>[6,4]},onSelected:{type:Function,default:()=>{}}},setup(e){const o=v({x:-1,y:-1}),a=s(()=>JSON.stringify(e.tableShape)),n=()=>{const e=[...JSON.parse(a.value)];return(!e[2]||e[2]<e[0])&&(e[2]=e[0]),(!e[3]||e[3]<e[3])&&(e[3]=e[1]),e},r=h(n());return t([a],()=>{r.value=n()}),()=>l("div",{class:`${ze}-table-shape`,onMouseleave:()=>{r.value=n(),o.x=-1,o.y=-1}},[new Array(r.value[1]).fill("").map((t,a)=>l("div",{class:`${ze}-table-shape-row`,key:`table-shape-row-${a}`},[new Array(r.value[0]).fill("").map((t,n)=>l("div",{class:`${ze}-table-shape-col`,key:`table-shape-col-${n}`,onMouseenter:()=>{o.x=a,o.y=n,n+1===r.value[0]&&n+1<r.value[2]?r.value[0]++:n+2<r.value[0]&&r.value[0]>e.tableShape[0]&&r.value[0]--,a+1===r.value[1]&&a+1<r.value[3]?r.value[1]++:a+2<r.value[1]&&r.value[1]>e.tableShape[1]&&r.value[1]--},onClick:()=>{e.onSelected(o)}},[l("div",{class:[`${ze}-table-shape-col-default`,a<=o.x&&n<=o.y&&`${ze}-table-shape-col-include`]},null)]))]))])}}),ga=e({name:"ToolbarTable",setup(){const e=r("editorId"),t=r("usedLanguageText"),o=r("disabled"),a=r("showToolbarName"),n=r("tableShape"),i=`${e}-toolbar-wrapper`,s=h(!1);return()=>l(Je,{relative:`#${i}`,visible:s.value,onChange:e=>{s.value=e},disabled:o?.value,key:"bar-table",overlay:l(pa,{tableShape:n.value,onSelected:t=>{o?.value||xt.emit(e,ut,"table",{selectedShape:t})}},null)},{default:()=>[l("button",{class:[`${ze}-toolbar-item`,o?.value&&`${ze}-disabled`],title:t.value.toolbarTips?.table,disabled:o?.value,type:"button"},[l(po,{name:"table"},null),a?.value&&l("div",{class:`${ze}-toolbar-item-name`},[t.value.toolbarTips?.table])])]})}}),va=e({name:"ToolbarTask",setup(){const e=r("editorId"),t=r("usedLanguageText"),o=r("disabled"),a=r("showToolbarName");return()=>l("button",{class:[`${ze}-toolbar-item`,o?.value&&`${ze}-disabled`],title:t.value.toolbarTips?.task,disabled:o?.value,onClick:()=>{xt.emit(e,ut,"task")},type:"button"},[l(po,{name:"task"},null),a?.value&&l("div",{class:`${ze}-toolbar-item-name`},[t.value.toolbarTips?.task])])}}),ha=e({name:"ToolbarTitle",setup(){const e=r("editorId"),t=r("usedLanguageText"),o=r("disabled"),a=r("showToolbarName"),n=`${e}-toolbar-wrapper`,i=h(!1),s=t=>{o?.value||xt.emit(e,ut,t)};return()=>l(Je,{relative:`#${n}`,visible:i.value,onChange:e=>{i.value=e},disabled:o?.value,overlay:l("ul",{class:`${ze}-menu`,onClick:()=>{i.value=!1},role:"menu"},[l("li",{class:`${ze}-menu-item ${ze}-menu-item-title`,onClick:()=>{s("h1")},role:"menuitem",tabindex:"0"},[t.value.titleItem?.h1]),l("li",{class:`${ze}-menu-item ${ze}-menu-item-title`,onClick:()=>{s("h2")},role:"menuitem",tabindex:"0"},[t.value.titleItem?.h2]),l("li",{class:`${ze}-menu-item ${ze}-menu-item-title`,onClick:()=>{s("h3")},role:"menuitem",tabindex:"0"},[t.value.titleItem?.h3]),l("li",{class:`${ze}-menu-item ${ze}-menu-item-title`,onClick:()=>{s("h4")},role:"menuitem",tabindex:"0"},[t.value.titleItem?.h4]),l("li",{class:`${ze}-menu-item ${ze}-menu-item-title`,onClick:()=>{s("h5")},role:"menuitem",tabindex:"0"},[t.value.titleItem?.h5]),l("li",{class:`${ze}-menu-item ${ze}-menu-item-title`,onClick:()=>{s("h6")},role:"menuitem",tabindex:"0"},[t.value.titleItem?.h6])])},{default:()=>[l("button",{class:[`${ze}-toolbar-item`,o?.value&&`${ze}-disabled`],disabled:o?.value,title:t.value.toolbarTips?.title,type:"button"},[l(po,{name:"title"},null),a?.value&&l("div",{class:`${ze}-toolbar-item-name`},[t.value.toolbarTips?.title])])]})}}),fa=e({name:"ToolbarUnderline",setup(){const e=r("editorId"),t=r("usedLanguageText"),o=r("disabled"),a=r("showToolbarName");return()=>l("button",{class:[`${ze}-toolbar-item`,o?.value&&`${ze}-disabled`],title:t.value.toolbarTips?.underline,disabled:o?.value,onClick:()=>{xt.emit(e,ut,"underline")},type:"button"},[l(po,{name:"underline"},null),a?.value&&l("div",{class:`${ze}-toolbar-item-name`},[t.value.toolbarTips?.underline])])}}),ba=e({name:"ToolbarUnorderedList",setup(){const e=r("editorId"),t=r("usedLanguageText"),o=r("disabled"),a=r("showToolbarName");return()=>l("button",{class:[`${ze}-toolbar-item`,o?.value&&`${ze}-disabled`],title:t.value.toolbarTips?.unorderedList,disabled:o?.value,onClick:()=>{xt.emit(e,ut,"unorderedList")},type:"button"},[l(po,{name:"unordered-list"},null),a?.value&&l("div",{class:`${ze}-toolbar-item-name`},[t.value.toolbarTips?.unorderedList])])}}),ya=()=>{const e=r("editorId"),t=r("setting"),a=r("updateSetting"),{editorExtensions:n,editorExtensionsAttrs:l}=Xe;let i=n.screenfull.instance;const s=h(!1),c=t=>{i?i.isEnabled&&(s.value=!0,(void 0===t?!i.isFullscreen:t)?i.request():i.exit()):xt.emit(e,dt,{name:"fullscreen",message:"fullscreen is undefined"})},d=()=>{i&&i.isEnabled&&i.on("change",()=>{(s.value||t.value.fullscreen)&&(s.value=!1,a("fullscreen"))})},u=()=>{i=window.screenfull,d()};return o(()=>{d(),i||Ht("script",{...l.screenfull?.js,src:n.screenfull.js,id:Rt.screenfull,onload:u},"screenfull")}),o(()=>{xt.on(e,{name:ot,callback:c})}),{fullscreenHandler:c}};let ka=0;const wa=()=>{const e=r("editorId"),t=r("theme"),o=r("previewTheme"),a=r("language"),i=r("disabled"),s=r("noUploadImg"),c=r("noPrettier"),d=r("codeTheme"),u=r("showToolbarName"),m=r("setting"),p=r("defToolbars");return{barRender:r=>{if(!_e.includes(r)){if(p.value instanceof Array){const l=p.value[r];return l?n(l,{theme:l.props?.theme||t.value,previewTheme:l.props?.theme||o.value,language:l.props?.theme||a.value,codeTheme:l.props?.codeTheme||d.value,disabled:l.props?.disabled||i.value,showToolbarName:l.props?.showToolbarName||u.value,insert(t){xt.emit(e,ut,"universal",{generate:t})}}):""}if(p.value?.children instanceof Array){const l=p.value.children[r];return l?n(l,{theme:l.props?.theme||t.value,previewTheme:l.props?.theme||o.value,language:l.props?.theme||a.value,codeTheme:l.props?.codeTheme||d.value,disabled:l.props?.disabled||i.value,showToolbarName:l.props?.showToolbarName||u.value,insert(t){xt.emit(e,ut,"universal",{generate:t})}}):""}return""}switch(r){case"-":return l(Ro,{key:"bar-"+ka++},null);case"bold":return l(No,{key:"bar-bold"},null);case"underline":return l(fa,{key:"bar-unorderline"},null);case"italic":return l(Zo,{key:"bar-italic"},null);case"strikeThrough":return l(da,{key:"bar-strikeThrough"},null);case"title":return l(ha,{key:"bar-title"},null);case"sub":return l(ua,{key:"bar-sub"},null);case"sup":return l(ma,{key:"bar-sup"},null);case"quote":return l(ia,{key:"bar-quote"},null);case"unorderedList":return l(ba,{key:"bar-unorderedList"},null);case"orderedList":return l(oa,{key:"bar-orderedList"},null);case"task":return l(va,{key:"bar-task"},null);case"codeRow":return l(zo,{key:"bar-codeRow"},null);case"code":return l(Po,{key:"bar-code"},null);case"link":return l(Qo,{key:"bar-link"},null);case"image":return s?l(_o,{key:"bar-image"},null):l(Yo,{key:"bar-imageDropdown"},null);case"table":return l(ga,{key:"bar-table"},null);case"revoke":return l(sa,{key:"bar-revoke"},null);case"next":return l(ta,{key:"bar-next"},null);case"save":return l(ca,{key:"bar-save"},null);case"prettier":return c&&l(na,{key:"bar-prettier"},null);case"pageFullscreen":return!m.value.fullscreen&&l(aa,{key:"bar-pageFullscreen"},null);case"fullscreen":return l(Vo,{key:"bar-fullscreen"},null);case"catalog":return l(Do,{key:"bar-catalog"},null);case"preview":return l(la,{key:"bar-preview"},null);case"previewOnly":return l(ra,{key:"bar-previewOnly"},null);case"htmlPreview":return l(Wo,{key:"bar-htmlPreview"},null);case"github":return l(qo,{key:"bar-github"},null);case"mermaid":return l(ea,{key:"bar-mermaid"},null);case"katex":return l(Jo,{key:"bar-katex"},null)}}}},xa=e({name:"FloatingToolbar",setup(){const e=r("floatingToolbars"),{barRender:t}=wa();return()=>l("div",{class:`${ze}-floating-toolbar`},[e.value.map(e=>t(e))])}}),$a=$e.define(),Ta=Te.define({create:()=>null,update(e,t){for(const o of t.effects)o.is($a)&&(e=o.value);return e},provide:e=>Me.from(e)}),Ca="var(--md-color)",Sa="#3f4a54",Ea="#2d8cf0",Ia="#d19a66",La="var(--md-bk-color)",Aa="var(--md-bk-color)",Fa="#3f4a54",Ma=[Ie.theme({"&":{color:Sa,backgroundColor:La},".cm-content":{caretColor:Fa},".cm-cursor, .cm-dropCursor":{borderLeftColor:Fa},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:"#bad5fa"},".cm-panels":{backgroundColor:"#f6f6f6",color:Sa},".cm-panels.cm-panels-top":{borderBottom:"1px solid var(--md-border-color)"},".cm-panels.cm-panels-bottom":{borderTop:"1px solid var(--md-border-color)"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#ceedfa33"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:La,color:Sa,borderRight:"1px solid",borderColor:"var(--md-border-color)"},".cm-activeLineGutter":{backgroundColor:"#ceedfa33"},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"1px solid var(--md-border-color)",backgroundColor:Aa},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"var(--md-border-color)",borderBottomColor:"var(--md-border-color)"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:Aa,borderBottomColor:Aa},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{color:Sa}}}),Be(Oe.define([{tag:De.keyword,color:"#c678dd"},{tag:[De.name,De.deleted,De.character,De.propertyName,De.macroName],color:Ca},{tag:[De.function(De.variableName),De.labelName],color:"#2d8cf0"},{tag:[De.color,De.constant(De.name),De.standard(De.name)],color:Ia},{tag:[De.definition(De.name),De.separator],color:Sa},{tag:[De.typeName,De.className,De.number,De.changed,De.annotation,De.modifier,De.self,De.namespace],color:"#e5c07b"},{tag:[De.operator,De.operatorKeyword,De.url,De.escape,De.regexp,De.link,De.special(De.string)],color:"#56b6c2"},{tag:[De.meta,De.comment],color:Ea},{tag:De.strong,fontWeight:"bold"},{tag:De.emphasis,fontStyle:"italic"},{tag:De.strikethrough,textDecoration:"line-through"},{tag:De.link,color:Ea,textDecoration:"underline"},{tag:De.heading,fontWeight:"bold",color:Ca},{tag:[De.atom,De.bool,De.special(De.variableName)],color:Ia},{tag:[De.processingInstruction,De.string,De.inserted],color:"#3f4a54"},{tag:De.invalid,color:"#fff"}]))],ja="var(--md-color)",Ha="var(--md-color)",Ba="#e5c07b",Oa="#d19a66",Ra="var(--md-bk-color)",Na="var(--md-bk-color)",Da="#528bff",Pa=[Ie.theme({"&":{color:Ha,backgroundColor:Ra},".cm-content":{caretColor:Da},".cm-cursor, .cm-dropCursor":{borderLeftColor:Da},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:"#ceedfa33"},".cm-panels":{backgroundColor:"#21252b",color:Ha},".cm-panels.cm-panels-top":{borderBottom:"1px solid var(--md-border-color)"},".cm-panels.cm-panels-bottom":{borderTop:"1px solid var(--md-border-color)"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#ceedfa33"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:Ra,color:Ha,borderRight:"1px solid",borderColor:"var(--md-border-color)"},".cm-activeLineGutter":{backgroundColor:"#2c313a"},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"1px solid var(--md-border-color)",backgroundColor:Na},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"var(--md-border-color)",borderBottomColor:"var(--md-border-color)"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:Na,borderBottomColor:Na},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{color:Ha}}},{dark:!0}),Be(Oe.define([{tag:De.keyword,color:"#c678dd"},{tag:[De.name,De.deleted,De.character,De.propertyName,De.macroName],color:ja},{tag:[De.function(De.variableName),De.labelName],color:"#e5c07b"},{tag:[De.color,De.constant(De.name),De.standard(De.name)],color:Oa},{tag:[De.definition(De.name),De.separator],color:Ha},{tag:[De.typeName,De.className,De.number,De.changed,De.annotation,De.modifier,De.self,De.namespace],color:"#e5c07b"},{tag:[De.operator,De.operatorKeyword,De.url,De.escape,De.regexp,De.link,De.special(De.string)],color:"#56b6c2"},{tag:[De.meta,De.comment],color:Ba},{tag:De.strong,fontWeight:"bold"},{tag:De.emphasis,fontStyle:"italic"},{tag:De.strikethrough,textDecoration:"line-through"},{tag:De.link,color:Ba,textDecoration:"underline"},{tag:De.heading,fontWeight:"bold",color:ja},{tag:[De.atom,De.bool,De.special(De.variableName)],color:Oa},{tag:[De.processingInstruction,De.string,De.inserted],color:"var(--md-color)"},{tag:De.invalid,color:"#ffffff"}]))],za=(e,t)=>{const o=r("editorId"),a=e=>{e instanceof Promise?e.then(e=>{xt.emit(o,ut,"universal",{generate:()=>({targetValue:e})})}).catch(e=>{}):xt.emit(o,ut,"universal",{generate:()=>({targetValue:e})})};return n=>{if(!n.clipboardData)return;if(n.clipboardData.files.length>0){const{files:e}=n.clipboardData;return xt.emit(o,mt,Array.from(e).filter(e=>/image\/.*/.test(e.type))),void n.preventDefault()}const l=n.clipboardData.getData("text/plain"),r=t.value?.view.state.selection.main.to||0,i=t.value?.view.state.doc.lineAt(r).from||0,s=t.value?.view.state.doc.sliceString(i,r)||"",c=/!\[.*\]\(\s*$/.test(s),d=/!\[.*\]\((.*)\s?.*\)/.test(l);if(c){const t=e.transformImgUrl(l);return a(t),void n.preventDefault()}if(d){const t=l.match(new RegExp("(?<=!\\[.*\\]\\()([^)\\s]+)(?=\\s?[\"']?.*[\"']?\\))","g"));return t?Promise.all(t.map(t=>e.transformImgUrl(t))).then(e=>{a(e.reduce((e,o,a)=>e.replace(t[a],o),l))}).catch(e=>{}):a(l),void n.preventDefault()}if(e.autoDetectCode&&n.clipboardData.types.includes("vscode-editor-data")){const e=JSON.parse(n.clipboardData.getData("vscode-editor-data"));return xt.emit(o,ut,"code",{mode:e.mode,text:n.clipboardData.getData("text/plain")}),void n.preventDefault()}e.maxlength&&l.length+e.modelValue.length>e.maxlength&&xt.emit(o,dt,{name:"overlength",message:"The input text is too long",data:l})}},Va=new RegExp(`(?<![a-z0-9.+-])(${/[a-z][a-z0-9.+-]*:\/\/[^\s<>"'`()]+(?:\([^\s<>"'`]*\)[^\s<>"'`]*)*/i.source}|${/\/\/[^\s<>"'`()]+/i.source}|${/data:[a-z]+\/[a-z0-9.+-]+(?:;base64)?,[a-z0-9+/=%]+/i.source}|${/\/(?!\/)[^\s<>"'`()]+/i.source})`,"gi"),qa=e=>{const t=e=>e.length>10?e.slice(0,10)+"...":e,o=(o,a)=>{const l=o.text;let r;for(;r=Va.exec(l);){if(!r[0])continue;const l=r[0];if(l.length>e.maxLength){const e=t(l);a.add(o.from+r.index,o.from+r.index+l.length,je.replace({widget:new n(e)}))}}},a=e=>{const t=new Ee;for(let a=1;a<=e.doc.lines;a++){const n=e.doc.line(a);o(n,t)}return t.finish()};class n extends He{constructor(e){super(),this.short=e}toDOM(){const e=document.createElement("span");return e.textContent=this.short,e.className="cm-short-text",e.style.display="inline",e.style.textDecoration="underline",e}eq(e){return this.short===e.short}}return Te.define({create:e=>a(e),update:(e,t)=>t.docChanged?a(t.state):e,provide:e=>Ie.decorations.from(e)})};Ie.EDIT_CONTEXT=!1;const Wa=e=>e.extension instanceof Function?e.extension(e.options):e.extension,_a=e=>{const t=Wa(e);return e.compartment?e.compartment.of(t):t},Ua=e({name:"MdEditorCustomScrollbar",props:{id:{type:String,default:void 0},class:{type:[String,Array],default:void 0},scrollTarget:{type:String,default:void 0},alwaysShowTrack:{type:Boolean,default:!1},onMouseenter:{type:Function,default:()=>{}},onMouseleave:{type:Function,default:()=>{}}},setup(e,{slots:t}){const n=h(null),r=h(null),i=h(null),s=h(null);let c=null,d=null,m=!1,p=0,g=0;const v=()=>{if(!(r.value&&n.value&&i.value&&s.value))return;const t=n.value.clientHeight,o=r.value.scrollHeight,a=r.value.scrollTop;if(o<=t)return i.value.style.display="none",void(e.alwaysShowTrack||(s.value.style.display="none"));i.value.style.display="block",s.value.style.display="block";const l=t/o,c=Math.max(t*l,20),d=t-c,u=Math.min(a*l,d);i.value.style.height=`${c}px`,i.value.style.top=`${u}px`},f=()=>v(),b=e=>{m=!0,p=e.clientY,g=r.value.scrollTop,document.body.style.userSelect="none"},y=e=>{if(!m||!r.value||!n.value)return;const t=e.clientY-p,o=r.value.scrollHeight/n.value.clientHeight;r.value.scrollTop=g+t*o},k=()=>{m=!1,document.body.style.userSelect=""},w=()=>{var t;n.value&&(t=e.scrollTarget?n.value.querySelector(e.scrollTarget):n.value.firstElementChild,r.value&&r.value.removeEventListener("scroll",f),r.value=t,r.value?(r.value.addEventListener("scroll",f),v()):s.value&&!e.alwaysShowTrack&&(s.value.style.display="none"))};return o(async()=>{await u(),w(),c=new MutationObserver(()=>{d&&cancelAnimationFrame(d),d=requestAnimationFrame(()=>{w()})}),c.observe(n.value,{childList:!0,subtree:!0}),window.addEventListener("resize",v),i.value?.addEventListener("mousedown",b),document.addEventListener("mousemove",y),document.addEventListener("mouseup",k)}),a(()=>{c?.disconnect(),r.value&&r.value.removeEventListener("scroll",f),window.removeEventListener("resize",v),i.value?.removeEventListener("mousedown",b),document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",k)}),()=>l("div",{id:e.id,class:[`${ze}-custom-scrollbar`,e.class],ref:n,onMouseenter:e.onMouseenter,onMouseleave:e.onMouseleave},[t.default?.(),l("div",{class:`${ze}-custom-scrollbar__track`,ref:s},[l("div",{class:`${ze}-custom-scrollbar__thumb`,ref:i},null)])])}}),Ka=k(),Xa=e({name:"MDEditorContent",props:oo,setup(e,n){const i=r("editorId"),c=r("catalogVisible"),d=r("theme"),u=r("setting"),m=h(""),p=h(),g=h(),{inputWrapperRef:b,codeMirrorUt:y,resetHistory:w}=(e=>{const a=r("tabWidth"),n=r("editorId"),l=r("theme"),i=r("previewTheme"),s=r("language"),c=r("usedLanguageText"),d=r("disabled"),u=r("showToolbarName"),m=r("customIcon"),p=r("noUploadImg"),g=r("tableShape"),v=r("noPrettier"),b=r("codeTheme"),y=r("setting"),k=r("updateSetting"),w=r("catalogVisible"),x=r("defToolbars"),$=r("floatingToolbars"),T=r("rootRef"),S=h(),E=f(),I=h(!1),L=new xe,A=new xe,F=new xe,M=new xe,j=new xe,H=((e,t)=>[{key:"Ctrl-b",mac:"Cmd-b",run:()=>(xt.emit(e,ut,"bold"),!0)},{key:"Ctrl-d",mac:"Cmd-d",run:ge,preventDefault:!0},{key:"Ctrl-s",mac:"Cmd-s",run:t=>(xt.emit(e,et,t.state.doc.toString()),!0),shift:()=>(xt.emit(e,ut,"strikeThrough"),!0)},{key:"Ctrl-u",mac:"Cmd-u",preventDefault:!0,run:()=>(xt.emit(e,ut,"underline"),!0),shift:()=>(xt.emit(e,ut,"unorderedList"),!0)},{key:"Ctrl-i",mac:"Cmd-i",preventDefault:!0,run:()=>(xt.emit(e,ut,"italic"),!0),shift:()=>(xt.emit(e,ut,"image"),!0)},{key:"Ctrl-1",mac:"Cmd-1",run:()=>(xt.emit(e,ut,"h1"),!0)},{key:"Ctrl-2",mac:"Cmd-2",run:()=>(xt.emit(e,ut,"h2"),!0)},{key:"Ctrl-3",mac:"Cmd-3",run:()=>(xt.emit(e,ut,"h3"),!0)},{key:"Ctrl-4",mac:"Cmd-4",run:()=>(xt.emit(e,ut,"h4"),!0)},{key:"Ctrl-5",mac:"Cmd-5",run:()=>(xt.emit(e,ut,"h5"),!0)},{key:"Ctrl-6",mac:"Cmd-6",run:()=>(xt.emit(e,ut,"h6"),!0)},{key:"Ctrl-ArrowUp",mac:"Cmd-ArrowUp",run:()=>(xt.emit(e,ut,"sup"),!0)},{key:"Ctrl-ArrowDown",mac:"Cmd-ArrowDown",run:()=>(xt.emit(e,ut,"sub"),!0)},{key:"Ctrl-o",mac:"Cmd-o",run:()=>(xt.emit(e,ut,"orderedList"),!0)},{key:"Ctrl-c",mac:"Cmd-c",shift:()=>(xt.emit(e,ut,"code"),!0),any:(t,o)=>!(!o.ctrlKey&&!o.metaKey||!o.altKey||"KeyC"!==o.code||(xt.emit(e,ut,"codeRow"),0))},{key:"Ctrl-l",mac:"Cmd-l",run:()=>(xt.emit(e,ut,"link"),!0)},{key:"Ctrl-f",mac:"Cmd-f",shift:()=>!t.noPrettier&&(xt.emit(e,ut,"prettier"),!0)},{any:(t,o)=>!(!o.ctrlKey&&!o.metaKey||!o.altKey||!o.shiftKey||"KeyT"!==o.code||(xt.emit(e,ut,"table"),0))},...Pe])(n,{noPrettier:v}),B=()=>[...H,...ve,...he,fe],O={paste:za(e,E),blur:e.onBlur,focus:e.onFocus,drop:e.onDrop,compositionstart:()=>{I.value=!0},compositionend:(t,o)=>{I.value=!1,e.updateModelValue(o.state.doc.toString())},input:t=>{e.onInput&&e.onInput(t);const{data:o}=t;e.maxlength&&e.modelValue.length+o.length>e.maxlength&&xt.emit(n,dt,{name:"overlength",message:"The input text is too long",data:o})}},R=(e=>{const t=(t,o)=>{t.dispatch({effects:$a.of({pos:o,above:!0,arrow:!0,create:()=>{const t=document.createElement("div"),o=document.createElement("div");t.appendChild(o);const a=me(xa);return e.privide(a),a.mount(t),{dom:t,destroy:()=>a.unmount()}}})})},o=Ie.updateListener.of(e=>{if(e.selectionSet||e.docChanged){const o=e.state,a=o.selection.main;if(a.empty){const n=a.head,l=o.doc.lineAt(n);/^\s*$/.test(l.text)?t(e.view,n):e.view.dispatch({effects:$a.of(null)})}else t(e.view,a.from)}});return[Ta,o]})({privide(e){e.provide("editorId",n),e.provide("theme",l),e.provide("previewTheme",i),e.provide("language",s),e.provide("disabled",d),e.provide("noUploadImg",p),e.provide("tableShape",g),e.provide("noPrettier",v),e.provide("codeTheme",b),e.provide("showToolbarName",u),e.provide("setting",y),e.provide("updateSetting",k),e.provide("usedLanguageText",c),e.provide("catalogVisible",w),e.provide("defToolbars",x),e.provide("tabWidth",a),e.provide("customIcon",m),e.provide("floatingToolbars",$),e.provide("rootRef",T)}}),N=[{type:"theme",extension:e=>"light"===e.value?Ma:Pa,compartment:L,options:{theme:l}},{type:"updateListener",extension:Ie.updateListener.of(t=>{t.docChanged&&(e.onChange(t.state.doc.toString()),I.value||e.updateModelValue(t.state.doc.toString()))})},{type:"domEventHandlers",extension:Ie.domEventHandlers(O),compartment:M},{type:"completions",extension:Oo(e.completions),compartment:A},{type:"history",extension:pe(),compartment:F}],D=Xe.codeMirrorExtensions([{type:"lineWrapping",extension:Ie.lineWrapping},{type:"keymap",extension:Le.of(B())},{type:"drawSelection",extension:Ae()},{type:"markdown",extension:ke({codeLanguages:we})},{type:"linkShortener",extension:e=>qa(e),options:{maxLength:30}},{type:"floatingToolbar",extension:$.value.length>0?R:[],compartment:j}],{editorId:n,theme:l.value,keyBindings:B()});return o(()=>{const t=new Ie({doc:e.modelValue,parent:S.value,extensions:[...N,...D].map(_a)}),o=new jo(t);E.value=o,setTimeout(()=>{o.setTabSize(a),o.setDisabled(d.value),o.setReadOnly(e.readonly),e.placeholder&&o.setPlaceholder(e.placeholder),"number"==typeof e.maxlength&&o.setMaxLength(e.maxlength),e.autofocus&&t.focus()},0),xt.on(n,{name:pt,callback(){be(t)}}),xt.on(n,{name:gt,callback(){ye(t)}}),xt.on(n,{name:ut,async callback(t,o={}){if("image"===t&&o.transform){const a=e.transformImgUrl(o.url);if(a instanceof Promise)a.then(async e=>{const{text:a,options:l}=await yo(t,E.value,{...o,url:e});E.value?.replaceSelectedText(a,l,n)}).catch(e=>{});else{const{text:e,options:l}=await yo(t,E.value,{...o,url:a});E.value?.replaceSelectedText(e,l,n)}}else{const{text:e,options:a}=await yo(t,E.value,o);E.value?.replaceSelectedText(e,a,n)}}}),xt.on(n,{name:bt,callback:C(e=>{const t={...O},o=Object.keys(O);for(const a in e){const n=a;o.includes(n)?t[n]=(t,o)=>{e[n](t,o),t.defaultPrevented||O[n](t,o)}:t[n]=e[n]}E.value?.view.dispatch({effects:M.reconfigure(Ie.domEventHandlers(t))})})}),xt.on(n,{name:yt,callback:(e,o)=>{const a=t.state.doc.line(e);t.dispatch(t.state.update({changes:{from:a.from,to:a.to,insert:o}}))}}),xt.on(n,{name:kt,callback(){xt.emit(n,wt,t)}}),xt.emit(n,wt,t)}),t(l,()=>{E.value?.view.dispatch({effects:L.reconfigure("light"===l.value?Ma:Pa)})},{deep:!0}),t(()=>e.completions,()=>{E.value?.view.dispatch({effects:A.reconfigure(Oo(e.completions))})},{deep:!0}),t(()=>e.modelValue,()=>{E.value?.getValue()!==e.modelValue&&E.value?.setValue(e.modelValue)}),t(()=>e.placeholder,()=>{E.value?.setPlaceholder(e.placeholder)}),t([d],()=>{E.value?.setDisabled(d.value)}),t(()=>e.readonly,()=>{E.value?.setDisabled(e.readonly)}),t(()=>e.maxlength,()=>{e.maxlength&&E.value?.setMaxLength(e.maxlength)}),((e,o)=>{const a=h(o.value);t([o],()=>{(!a.value||!((e,t)=>{if(e===t)return!0;if(e.length!==t.length)return!1;for(let o=0;o<e.length;o++)if(e[o]!==t[o])return!1;return!0})(a.value,o.value))&&(a.value=o.value,(()=>{const e=D.find(e=>"floatingToolbar"===e.type);e?.compartment&&($.value.length>0?E.value?.view.dispatch({effects:e.compartment.reconfigure(Wa(e))}):E.value?.view.dispatch({effects:e.compartment.reconfigure([])}))})())})})(0,$),{inputWrapperRef:S,codeMirrorUt:E,resetHistory(){E.value?.view.dispatch({effects:F.reconfigure([])}),E.value?.view.dispatch({effects:F.reconfigure(pe())})}}})(e),{inputWrapperStyle:x,resizeOperateStyle:$}=((e,n,l)=>{const i=r("setting"),c=s(()=>/px$/.test(`${e.inputBoxWidth}`)?"50%":e.inputBoxWidth),d=v({resizedWidth:c.value}),u=v({width:c.value}),m=v({left:c.value,display:"initial"}),p=t=>{const o=n.value?.offsetWidth||0,a=n.value?.getBoundingClientRect().x||0;let l=t.x-a;l/o<Ge?l=o*Ge:l>o-o*Ge&&(l=o-o*Ge);const r=l/o*100+"%";u.width=r,m.left=r,d.resizedWidth=r,e.oninputBoxWidthChange?.(r)},g=e=>{e.target===l.value&&document.addEventListener("mousemove",p)},h=()=>{document.removeEventListener("mousemove",p)};return t([l],()=>{document.removeEventListener("mousedown",g),document.removeEventListener("mouseup",h),document.addEventListener("mousedown",g),document.addEventListener("mouseup",h)}),o(()=>{document.addEventListener("mousedown",g),document.addEventListener("mouseup",h)}),a(()=>{document.removeEventListener("mousedown",g),document.removeEventListener("mouseup",h)}),t([c],([e])=>{d.resizedWidth=e,u.width=e,m.left=e}),t([()=>i.value.htmlPreview,()=>i.value.preview,()=>i.value.previewOnly],()=>{i.value.previewOnly?(u.width="0%",m.display="none"):i.value.htmlPreview||i.value.preview?(u.width=d.resizedWidth,m.display="initial"):(u.width="100%",m.display="none")},{immediate:!0}),{inputWrapperStyle:u,resizeOperateStyle:m}})(e,p,g);bo(e,m,y);const{onCatalogActive:T,onMouseenter:S,onMouseleave:E}=(()=>{const e=r("editorId"),t=h(!0),o=k();return{onCatalogActive:(a,n)=>{const l=document.querySelector(`#${e} .${ze}-catalog-editor`);if(!n||!t.value||!l)return;const r=n.offsetTop-l.scrollTop;(r>100||r<100)&&o(l,n.offsetTop-100)},onMouseenter:()=>t.value=!1,onMouseleave:()=>t.value=!0}})();return n.expose({getSelectedText:()=>y.value?.getSelectedText(),focus(e){y.value?.focus(e)},resetHistory:w,getEditorView:()=>y.value?.view}),()=>l("div",{class:`${ze}-content`},[l("div",{class:`${ze}-content-wrapper`,ref:p},[l(Ua,{alwaysShowTrack:!0,scrollTarget:`#${i} .cm-scroller`,style:x},{default:()=>[l("div",{class:`${ze}-input-wrapper`,ref:b},null)]}),(u.value.htmlPreview||u.value.preview)&&l("div",{class:`${ze}-resize-operate`,style:$,ref:g},null),l(Ua,{style:{flex:1}},{default:()=>[l(no,{modelValue:e.modelValue,onChange:e.onChange,onHtmlChanged:t=>{m.value=t,e.onHtmlChanged(t)},onGetCatalog:e.onGetCatalog,mdHeadingId:e.mdHeadingId,noMermaid:e.noMermaid,sanitize:e.sanitize,noKatex:e.noKatex,formatCopiedText:e.formatCopiedText,noHighlight:e.noHighlight,noImgZoomIn:e.noImgZoomIn,sanitizeMermaid:e.sanitizeMermaid,codeFoldable:e.codeFoldable,autoFoldThreshold:e.autoFoldThreshold,onRemount:e.onRemount},null)]})]),c.value&&l(Ua,{class:`${ze}-catalog-${e.catalogLayout}`,onMouseenter:S,onMouseleave:E},{default:()=>[l(At,{theme:d.value,class:`${ze}-catalog-editor`,editorId:i,mdHeadingId:e.mdHeadingId,key:"internal-catalog",scrollElementOffsetTop:2,syncWith:u.value.preview?"preview":"editor",onClick:(e,t)=>{if(!u.value.preview&&void 0!==t.line){e.preventDefault();const o=y.value?.view;if(o){const e=o.state.doc.line(t.line+1),a=o.lineBlockAt(e.from)?.top,n=o.scrollDOM;Ka(n,a)}}},catalogMaxDepth:e.catalogMaxDepth,onActive:T},null)]})])}}),Ga=e({props:{modelValue:{type:String,default:""}},setup(e){const t=r("usedLanguageText");return()=>l("div",{class:`${ze}-footer-item`},[l("label",{class:`${ze}-footer-label`},[`${t.value.footer?.markdownTotal}:`]),l("span",null,[e.modelValue?.length||0])])}}),Ya={checked:{type:Boolean,default:!1},onChange:{type:Function,default:()=>{}},disabled:{type:Boolean,default:void 0}},Za=e({name:`${ze}-checkbox`,props:Ya,setup:e=>()=>l("div",{class:[`${ze}-checkbox`,e.checked&&`${ze}-checkbox-checked`,e.disabled&&`${ze}-disabled`],onClick:()=>{e.disabled||e.onChange(!e.checked)}},null)}),Ja=e({props:{scrollAuto:{type:Boolean},onScrollAutoChange:{type:Function,default:()=>{}}},setup(e){const t=r("usedLanguageText"),o=r("disabled");return()=>l("div",{class:[`${ze}-footer-item`,o?.value&&`${ze}-disabled`]},[l("label",{class:`${ze}-footer-label`,onClick:()=>{o?.value||e.onScrollAutoChange(!e.scrollAuto)}},[t?.value.footer?.scrollAuto]),l(Za,{checked:e.scrollAuto,onChange:e.onScrollAutoChange,disabled:o?.value},null)])}}),Qa=e({name:"MDEditorFooter",props:{modelValue:{type:String,default:""},footers:{type:Array,default:[]},scrollAuto:{type:Boolean},noScrollAuto:{type:Boolean},onScrollAutoChange:{type:Function,default:()=>{}},defFooters:{type:Object}},setup(e){const t=r("theme"),o=r("language"),a=r("disabled"),i=s(()=>{const t=e.footers.indexOf("=");return[-1===t?e.footers:e.footers.slice(0,t),-1===t?[]:e.footers.slice(t,Number.MAX_SAFE_INTEGER)]}),c=r=>{if(!Ue.includes(r)){if(e.defFooters instanceof Array){const l=e.defFooters[r];return l?n(l,{theme:l.props?.theme||t.value,language:l.props?.language||o.value,disabled:l.props?.disabled||a?.value}):""}if(e.defFooters&&e.defFooters.children instanceof Array){const l=e.defFooters.children[r];return l?n(l,{theme:l.props?.theme||t.value,language:l.props?.language||o.value,disabled:l.props?.disabled||a?.value}):""}return""}switch(r){case"markdownTotal":return l(Ga,{modelValue:e.modelValue},null);case"scrollSwitch":return!e.noScrollAuto&&l(Ja,{scrollAuto:e.scrollAuto,onScrollAutoChange:e.onScrollAutoChange},null)}};return()=>{const e=i.value[0].map(e=>c(e)),t=i.value[1].map(e=>c(e));return l("div",{class:`${ze}-footer`},[l("div",{class:`${ze}-footer-left`},[e]),l("div",{class:`${ze}-footer-right`},[t])])}}}),en=e({name:"MDEditorToolbar",props:{toolbars:{type:Array,default:()=>[]},toolbarsExclude:{type:Array,default:()=>[]}},setup(e){const o=r("editorId"),a=r("showToolbarName"),n=`${o}-toolbar-wrapper`,i=h(),d=h(),{barRender:m}=wa(),p=s(()=>{const t=e.toolbars.filter(t=>!e.toolbarsExclude.includes(t)),o=t.indexOf("=");return[-1===o?t:t.slice(0,o+1),-1===o?[]:t.slice(o,Number.MAX_SAFE_INTEGER)]});return t(()=>e.toolbars,()=>{u(()=>{i.value&&T(i.value)})},{immediate:!0}),()=>{const t=p.value[0].map(e=>m(e)),o=p.value[1].map(e=>m(e));return l(c,null,[e.toolbars.length>0&&l("div",{class:`${ze}-toolbar-wrapper`,ref:i,id:n},[l("div",{class:[`${ze}-toolbar`,a.value&&`${ze}-stn`]},[l("div",{class:`${ze}-toolbar-left`,ref:d},[t]),l("div",{class:`${ze}-toolbar-right`},[o])])])])}}}),tn=e({name:"MdEditorV3",props:ro,emits:so,setup(e,n){const{noKatex:r,noMermaid:c,noHighlight:d}=e,u=v({scrollAuto:e.scrollAuto}),m=h(),p=h(),g=s(()=>Ye({props:e,ctx:n},"defToolbars")),f=s(()=>Ye({props:e,ctx:n},"defFooters")),b=Dt(e),[y,k]=((e,a,n)=>{const{editorId:l}=n,r=v({pageFullscreen:e.pageFullscreen,fullscreen:!1,preview:e.preview,htmlPreview:!e.preview&&e.htmlPreview,previewOnly:!1}),i=v({...r});let s="";const c=()=>{r.pageFullscreen||r.fullscreen?document.body.style.overflow="hidden":document.body.style.overflow=s};return t(()=>[r.pageFullscreen,r.fullscreen],c),o(()=>{xt.on(l,{name:mt,callback(t,o){const n=e=>{xt.emit(l,ut,"image",{desc:"",urls:e}),o?.()};e.onUploadImg?e.onUploadImg(t,n):a.emit("onUploadImg",t,n)}}),s=document.body.style.overflow,c()}),[r,(e,t)=>{const o=void 0===t?!r[e]:t;switch(e){case"preview":r.htmlPreview=!1,r.previewOnly=!1;break;case"htmlPreview":r.preview=!1,r.previewOnly=!1;break;case"previewOnly":o?!r.preview&&!r.htmlPreview&&(r.preview=!0):(i.preview||(r.preview=!1),i.htmlPreview||(r.htmlPreview=!1))}i[e]=o,r[e]=o}]})(e,n,{editorId:b}),w=((e,t)=>{const{editorId:a}=t,n=h(!1);return o(()=>{xt.on(a,{name:tt,callback:e=>{n.value=void 0===e?!n.value:e}})}),n})(0,{editorId:b});return((e,a,n)=>{const{editorId:l}=n,r=v({buildFinished:!1,html:""});t(()=>e.modelValue,()=>{r.buildFinished=!1}),o(()=>{xt.on(l,{name:ct,callback(e){r.buildFinished=!0,r.html=e}}),xt.on(l,{name:et,callback(){const t=new Promise(e=>{if(r.buildFinished)e(r.html);else{const t=o=>{e(o),xt.remove(l,ct,t)};xt.on(l,{name:ct,callback:t})}});e.onSave?e.onSave(e.modelValue,t):a.emit("onSave",e.modelValue,t)}})})})(e,n,{editorId:b}),(e=>{const{noPrettier:t,noUploadImg:a}=e,{editorExtensions:n,editorExtensionsAttrs:l}=Xe,r=t||n.prettier.prettierInstance,i=t||n.prettier.parserMarkdownInstance,s=a||n.cropper.instance;o(()=>{if(!s){const{js:e={},css:t={}}=l.cropper||{};Ht("link",{...t,rel:"stylesheet",href:n.cropper.css,id:Rt.croppercss}),Ht("script",{...e,src:n.cropper.js,id:Rt.cropperjs})}if(!r){const{standaloneJs:e={}}=l.prettier||{};Ht("script",{...e,src:n.prettier.standaloneJs,id:Rt.prettier})}if(!i){const{parserMarkdownJs:e={}}=l.prettier||{};Ht("script",{...e,src:n.prettier.parserMarkdownJs,id:Rt.prettierMD})}})})(e),((e,t,a)=>{const{editorId:n}=a;o(()=>{xt.on(n,{name:dt,callback:o=>{e.onError?.(o),t.emit("onError",o)}})})})(e,n,{editorId:b}),((e,o,a)=>{const{editorId:n,catalogVisible:l,setting:r,updateSetting:i,codeRef:s}=a;t(()=>r.pageFullscreen,e=>{xt.emit(n,at,e)}),t(()=>r.fullscreen,e=>{xt.emit(n,nt,e)}),t(()=>r.preview,e=>{xt.emit(n,lt,e)}),t(()=>r.previewOnly,e=>{xt.emit(n,rt,e)}),t(()=>r.htmlPreview,e=>{xt.emit(n,it,e)}),t(l,e=>{xt.emit(n,st,e)});const c={on(e,t){switch(e){case"pageFullscreen":xt.on(n,{name:at,callback(e){t(e)}});break;case"fullscreen":xt.on(n,{name:nt,callback(e){t(e)}});break;case"preview":xt.on(n,{name:lt,callback(e){t(e)}});break;case"previewOnly":xt.on(n,{name:rt,callback(e){t(e)}});break;case"htmlPreview":xt.on(n,{name:it,callback(e){t(e)}});break;case"catalog":xt.on(n,{name:st,callback(e){t(e)}})}},togglePageFullscreen(e){i("pageFullscreen",e)},toggleFullscreen(e){xt.emit(n,ot,e)},togglePreview(e){i("preview",e)},togglePreviewOnly(e){i("previewOnly",e)},toggleHtmlPreview(e){i("htmlPreview",e)},toggleCatalog(e){xt.emit(n,tt,e)},triggerSave(){xt.emit(n,et)},insert(e){xt.emit(n,ut,"universal",{generate:e})},focus(e){s.value?.focus(e)},rerender(){xt.emit(n,ft)},getSelectedText:()=>s.value?.getSelectedText(),resetHistory(){s.value?.resetHistory()},domEventHandlers(e){xt.emit(n,bt,e)},execCommand(e){xt.emit(n,ut,e)},getEditorView:()=>s.value?.getEditorView()};o.expose(c)})(0,n,{editorId:b,catalogVisible:w,setting:y,updateSetting:k,codeRef:p}),((e,t)=>{i("tabWidth",e.tabWidth),i("disabled",s(()=>e.disabled)),i("showToolbarName",s(()=>e.showToolbarName)),i("noUploadImg",e.noUploadImg),i("tableShape",s(()=>e.tableShape)),i("noPrettier",e.noPrettier),i("codeTheme",s(()=>e.codeTheme)),i("updateSetting",t.updateSetting),i("catalogVisible",s(()=>t.catalogVisible.value)),i("defToolbars",t.defToolbars),i("floatingToolbars",s(()=>e.floatingToolbars)),Nt(e,t)})(e,{rootRef:m,editorId:b,setting:y,updateSetting:k,catalogVisible:w,defToolbars:g}),a(()=>{xt.clear(b)}),()=>l("div",{id:b,class:[ze,e.class,"dark"===e.theme&&`${ze}-dark`,y.fullscreen||y.pageFullscreen?`${ze}-fullscreen`:""],style:e.style,ref:m},[e.toolbars.length>0&&l(en,{toolbars:e.toolbars,toolbarsExclude:e.toolbarsExclude},null),l(Xa,{ref:p,modelValue:e.modelValue,mdHeadingId:e.mdHeadingId,noMermaid:c,sanitize:e.sanitize,placeholder:e.placeholder,noKatex:r,scrollAuto:u.scrollAuto,formatCopiedText:e.formatCopiedText,autofocus:e.autoFocus,readonly:e.readOnly,maxlength:e.maxLength,autoDetectCode:e.autoDetectCode,noHighlight:d,updateModelValue:e=>{n.emit("update:modelValue",e)},onChange:t=>{e.onChange?.(t),n.emit("onChange",t)},onHtmlChanged:t=>{e.onHtmlChanged?.(t),n.emit("onHtmlChanged",t)},onGetCatalog:t=>{e.onGetCatalog?.(t),n.emit("onGetCatalog",t)},onBlur:t=>{e.onBlur?.(t),n.emit("onBlur",t)},onFocus:t=>{e.onFocus?.(t),n.emit("onFocus",t)},onInput:t=>{e.onInput?.(t),n.emit("onInput",t)},completions:e.completions,noImgZoomIn:e.noImgZoomIn,onDrop:t=>{e.onDrop?.(t),n.emit("onDrop",t)},inputBoxWidth:e.inputBoxWidth,oninputBoxWidthChange:t=>{e.oninputBoxWidthChange?.(t),n.emit("oninputBoxWidthChange",t)},sanitizeMermaid:e.sanitizeMermaid,transformImgUrl:e.transformImgUrl,codeFoldable:e.codeFoldable,autoFoldThreshold:e.autoFoldThreshold,onRemount:()=>{e.onRemount?.(),n.emit("onRemount")},catalogLayout:e.catalogLayout,catalogMaxDepth:e.catalogMaxDepth,noEcharts:e.noEcharts},null),e.footers.length>0&&l(Qa,{modelValue:e.modelValue,footers:e.footers,defFooters:f.value,noScrollAuto:!y.preview&&!y.htmlPreview||y.previewOnly,scrollAuto:u.scrollAuto,onScrollAutoChange:e=>u.scrollAuto=e},null)])}});tn.install=e=>(e.component(tn.name,tn),e.use(fo).use(Qe).use(ho).use(At).use(co),e);const on=e({name:"NormalFooterToolbar",props:{onClick:{type:Function,default:void 0},language:{type:String,default:void 0},theme:{type:String,default:void 0},disabled:{type:Boolean,default:void 0}},emits:["onClick"],setup:(e,t)=>()=>{const o=Ye({props:e,ctx:t});return l("div",{class:[`${ze}-footer-item`,e.disabled&&`${ze}-disabled`],onClick:o=>{e.disabled||(e.onClick?.(o),t.emit("onClick",o))}},[o])}});on.install=e=>(e.component(on.name,on),e);var an,nn,ln,rn,sn,cn,dn,un,mn,pn,gn,vn={exports:{}},hn={},fn={exports:{}},bn={};function yn(){if(an)return bn;an=1;var e=/javascript\s*\:/gim;return bn.whiteList={"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1},bn.getDefaultWhiteList=function(){return{"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1}},bn.onAttr=function(e,t,o){},bn.onIgnoreAttr=function(e,t,o){},bn.safeAttrValue=function(t,o){return e.test(o)?"":o},bn}function kn(){return ln||(ln=1,nn={indexOf:function(e,t){var o,a;if(Array.prototype.indexOf)return e.indexOf(t);for(o=0,a=e.length;o<a;o++)if(e[o]===t)return o;return-1},forEach:function(e,t,o){var a,n;if(Array.prototype.forEach)return e.forEach(t,o);for(a=0,n=e.length;a<n;a++)t.call(o,e[a],a,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}}),nn}function wn(){return un||(un=1,function(e,t){var o=yn(),a=function(){if(dn)return cn;dn=1;var e=yn(),t=function(){if(sn)return rn;sn=1;var e=kn();return rn=function(t,o){";"!==(t=e.trimRight(t))[t.length-1]&&(t+=";");var a=t.length,n=!1,l=0,r=0,i="";function s(){if(!n){var a=e.trim(t.slice(l,r)),s=a.indexOf(":");if(-1!==s){var c=e.trim(a.slice(0,s)),d=e.trim(a.slice(s+1));if(c){var u=o(l,i.length,c,d,a);u&&(i+=u+"; ")}}}l=r+1}for(;r<a;r++){var c=t[r];if("/"===c&&"*"===t[r+1]){var d=t.indexOf("*/",r+2);if(-1===d)break;l=(r=d+1)+1,n=!1}else"("===c?n=!0:")"===c?n=!1:";"===c?n||s():"\n"===c&&s()}return e.trim(i)}}();function o(e){return null==e}function a(t){(t=function(e){var t={};for(var o in e)t[o]=e[o];return t}(t||{})).whiteList=t.whiteList||e.whiteList,t.onAttr=t.onAttr||e.onAttr,t.onIgnoreAttr=t.onIgnoreAttr||e.onIgnoreAttr,t.safeAttrValue=t.safeAttrValue||e.safeAttrValue,this.options=t}return kn(),a.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var a=this.options,n=a.whiteList,l=a.onAttr,r=a.onIgnoreAttr,i=a.safeAttrValue;return t(e,function(e,t,a,s,c){var d=n[a],u=!1;if(!0===d?u=d:"function"==typeof d?u=d(s):d instanceof RegExp&&(u=d.test(s)),!0!==u&&(u=!1),s=i(a,s)){var m,p={position:t,sourcePosition:e,source:c,isWhite:u};if(u)return o(m=l(a,s,p))?a+":"+s:m;if(!o(m=r(a,s,p)))return m}})},cn=a}();for(var n in(t=e.exports=function(e,t){return new a(t).process(e)}).FilterCSS=a,o)t[n]=o[n];typeof window<"u"&&(window.filterCSS=e.exports)}(fn,fn.exports)),fn.exports}function xn(){return pn||(pn=1,mn={indexOf:function(e,t){var o,a;if(Array.prototype.indexOf)return e.indexOf(t);for(o=0,a=e.length;o<a;o++)if(e[o]===t)return o;return-1},forEach:function(e,t,o){var a,n;if(Array.prototype.forEach)return e.forEach(t,o);for(a=0,n=e.length;a<n;a++)t.call(o,e[a],a,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/.exec(e);return t?t.index:-1}}),mn}function $n(){if(gn)return hn;gn=1;var e=wn().FilterCSS,t=wn().getDefaultWhiteList,o=xn(),a=new e;function n(e){return e.replace(l,"&lt;").replace(r,"&gt;")}var l=/</g,r=/>/g,i=/"/g,s=/&quot;/g,c=/&#([a-zA-Z0-9]*);?/gim,d=/&colon;?/gim,u=/&newline;?/gim,m=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,p=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,g=/u\s*r\s*l\s*\(.*/gi;function v(e){return e.replace(i,"&quot;")}function h(e){return e.replace(s,'"')}function f(e){return e.replace(c,function(e,t){return"x"===t[0]||"X"===t[0]?String.fromCharCode(parseInt(t.substr(1),16)):String.fromCharCode(parseInt(t,10))})}function b(e){return e.replace(d,":").replace(u," ")}function y(e){for(var t="",a=0,n=e.length;a<n;a++)t+=e.charCodeAt(a)<32?" ":e.charAt(a);return o.trim(t)}function k(e){return y(e=b(e=f(e=h(e))))}function w(e){return n(e=v(e))}return hn.whiteList={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height","loading"],ins:["datetime"],kbd:[],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]},hn.getDefaultWhiteList=function(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height","loading"],ins:["datetime"],kbd:[],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}},hn.onTag=function(e,t,o){},hn.onIgnoreTag=function(e,t,o){},hn.onTagAttr=function(e,t,o){},hn.onIgnoreTagAttr=function(e,t,o){},hn.safeAttrValue=function(e,t,n,l){if(n=k(n),"href"===t||"src"===t){if("#"===(n=o.trim(n)))return"#";if("http://"!==n.substr(0,7)&&"https://"!==n.substr(0,8)&&"mailto:"!==n.substr(0,7)&&"tel:"!==n.substr(0,4)&&"data:image/"!==n.substr(0,11)&&"ftp://"!==n.substr(0,6)&&"./"!==n.substr(0,2)&&"../"!==n.substr(0,3)&&"#"!==n[0]&&"/"!==n[0])return""}else if("background"===t){if(m.lastIndex=0,m.test(n))return""}else if("style"===t){if(p.lastIndex=0,p.test(n)||(g.lastIndex=0,g.test(n)&&(m.lastIndex=0,m.test(n))))return"";!1!==l&&(n=(l=l||a).process(n))}return w(n)},hn.escapeHtml=n,hn.escapeQuote=v,hn.unescapeQuote=h,hn.escapeHtmlEntities=f,hn.escapeDangerHtml5Entities=b,hn.clearNonPrintableCharacter=y,hn.friendlyAttrValue=k,hn.escapeAttrValue=w,hn.onIgnoreTagStripAll=function(){return""},hn.StripTagBody=function(e,t){"function"!=typeof t&&(t=function(){});var a=!Array.isArray(e),n=[],l=!1;return{onIgnoreTag:function(r,i,s){if(function(t){return!!a||-1!==o.indexOf(e,t)}(r)){if(s.isClosing){var c=s.position+10;return n.push([!1!==l?l:s.position,c]),l=!1,"[/removed]"}return l||(l=s.position),"[removed]"}return t(r,i,s)},remove:function(e){var t="",a=0;return o.forEach(n,function(o){t+=e.slice(a,o[0]),a=o[1]}),t+=e.slice(a)}}},hn.stripCommentTag=function(e){for(var t="",o=0;o<e.length;){var a=e.indexOf("\x3c!--",o);if(-1===a){t+=e.slice(o);break}t+=e.slice(o,a);var n=e.indexOf("--\x3e",a);if(-1===n)break;o=n+3}return t},hn.stripBlankChar=function(e){var t=e.split("");return(t=t.filter(function(e){var t=e.charCodeAt(0);return!(127===t||t<=31&&10!==t&&13!==t)})).join("")},hn.attributeWrapSign='"',hn.cssFilter=a,hn.getDefaultCSSWhiteList=t,hn}var Tn,Cn,Sn,En,In={};function Ln(){if(Tn)return In;Tn=1;var e=xn();function t(t){var o,a=e.spaceIndex(t);return o=-1===a?t.slice(1,-1):t.slice(1,a+1),"/"===(o=e.trim(o).toLowerCase()).slice(0,1)&&(o=o.slice(1)),"/"===o.slice(-1)&&(o=o.slice(0,-1)),o}function o(e){return"</"===e.slice(0,2)}var a=/[^a-zA-Z0-9\\_:.-]/gim;function n(e,t){for(;t<e.length;t++){var o=e[t];if(" "!==o)return"="===o?t:-1}}function l(e,t){for(;t<e.length;t++){var o=e[t];if(" "!==o)return"'"===o||'"'===o?t:-1}}function r(e,t){for(;t>0;t--){var o=e[t];if(" "!==o)return"="===o?t:-1}}function i(e){return function(e){return'"'===e[0]&&'"'===e[e.length-1]||"'"===e[0]&&"'"===e[e.length-1]}(e)?e.substr(1,e.length-2):e}return In.parseTag=function(e,a,n){var l="",r=0,i=!1,s=!1,c=0,d=e.length,u="",m="";e:for(c=0;c<d;c++){var p=e.charAt(c);if(!1===i){if("<"===p){i=c;continue}}else if(!1===s){if("<"===p){l+=n(e.slice(r,c)),i=c,r=c;continue}if(">"===p||c===d-1){l+=n(e.slice(r,i)),u=t(m=e.slice(i,c+1)),l+=a(i,l.length,u,m,o(m)),r=c+1,i=!1;continue}if('"'===p||"'"===p)for(var g=1,v=e.charAt(c-g);""===v.trim()||"="===v;){if("="===v){s=p;continue e}v=e.charAt(c-++g)}}else if(p===s){s=!1;continue}}return r<d&&(l+=n(e.substr(r))),l},In.parseAttr=function(t,o){var s=0,c=0,d=[],u=!1,m=t.length;function p(t,n){if(!((t=(t=e.trim(t)).replace(a,"").toLowerCase()).length<1)){var l=o(t,n||"");l&&d.push(l)}}for(var g=0;g<m;g++){var v,h=t.charAt(g);if(!1!==u||"="!==h)if(!1===u||g!==c){if(/\s|\n|\t/.test(h)){if(t=t.replace(/\s|\n|\t/g," "),!1===u){if(-1===(v=n(t,g))){p(e.trim(t.slice(s,g))),u=!1,s=g+1;continue}g=v-1;continue}if(-1===(v=r(t,g-1))){p(u,i(e.trim(t.slice(s,g)))),u=!1,s=g+1;continue}}}else{if(-1===(v=t.indexOf(h,g+1)))break;p(u,e.trim(t.slice(c+1,v))),u=!1,s=(g=v)+1}else u=t.slice(s,g),s=g+1,c='"'===t.charAt(s)||"'"===t.charAt(s)?s:l(t,g+1)}return s<t.length&&(!1===u?p(t.slice(s)):p(u,i(e.trim(t.slice(s))))),e.trim(d.join(" "))},In}En||(En=1,function(e,t){var o=$n(),a=Ln(),n=function(){if(Sn)return Cn;Sn=1;var e=wn().FilterCSS,t=$n(),o=Ln(),a=o.parseTag,n=o.parseAttr,l=xn();function r(e){return null==e}function i(o){(o=function(e){var t={};for(var o in e)t[o]=e[o];return t}(o||{})).stripIgnoreTag&&(o.onIgnoreTag,o.onIgnoreTag=t.onIgnoreTagStripAll),o.whiteList||o.allowList?o.whiteList=function(e){var t={};for(var o in e)Array.isArray(e[o])?t[o.toLowerCase()]=e[o].map(function(e){return e.toLowerCase()}):t[o.toLowerCase()]=e[o];return t}(o.whiteList||o.allowList):o.whiteList=t.whiteList,this.attributeWrapSign=!0===o.singleQuotedAttributeValue?"'":t.attributeWrapSign,o.onTag=o.onTag||t.onTag,o.onTagAttr=o.onTagAttr||t.onTagAttr,o.onIgnoreTag=o.onIgnoreTag||t.onIgnoreTag,o.onIgnoreTagAttr=o.onIgnoreTagAttr||t.onIgnoreTagAttr,o.safeAttrValue=o.safeAttrValue||t.safeAttrValue,o.escapeHtml=o.escapeHtml||t.escapeHtml,this.options=o,!1===o.css?this.cssFilter=!1:(o.css=o.css||{},this.cssFilter=new e(o.css))}return i.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var o=this,i=o.options,s=i.whiteList,c=i.onTag,d=i.onIgnoreTag,u=i.onTagAttr,m=i.onIgnoreTagAttr,p=i.safeAttrValue,g=i.escapeHtml,v=o.attributeWrapSign,h=o.cssFilter;i.stripBlankChar&&(e=t.stripBlankChar(e)),i.allowCommentTag||(e=t.stripCommentTag(e));var f=!1;i.stripIgnoreTagBody&&(f=t.StripTagBody(i.stripIgnoreTagBody,d),d=f.onIgnoreTag);var b=a(e,function(e,t,o,a,i){var f={sourcePosition:e,position:t,isClosing:i,isWhite:Object.prototype.hasOwnProperty.call(s,o)},b=c(o,a,f);if(!r(b))return b;if(f.isWhite){if(f.isClosing)return"</"+o+">";var y=function(e){var t=l.spaceIndex(e);if(-1===t)return{html:"",closing:"/"===e[e.length-2]};var o="/"===(e=l.trim(e.slice(t+1,-1)))[e.length-1];return o&&(e=l.trim(e.slice(0,-1))),{html:e,closing:o}}(a),k=s[o],w=n(y.html,function(e,t){var a=-1!==l.indexOf(k,e),n=u(o,e,t,a);return r(n)?a?(t=p(o,e,t,h))?e+"="+v+t+v:e:r(n=m(o,e,t,a))?void 0:n:n});return a="<"+o,w&&(a+=" "+w),y.closing&&(a+=" /"),a+">"}return r(b=d(o,a,f))?g(a):b},g);return f&&(b=f.remove(b)),b},Cn=i}();function l(e,t){return new n(t).process(e)}(t=e.exports=l).filterXSS=l,t.FilterXSS=n,function(){for(var e in o)t[e]=o[e];for(var n in a)t[n]=a[n]}(),typeof window<"u"&&(window.filterXSS=e.exports),typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope&&(self.filterXSS=e.exports)}(vn,vn.exports));export{tn as m,co as o};
