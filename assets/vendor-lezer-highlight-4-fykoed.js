import{N as t}from"./vendor-lezer-common-QPiu6Hcj.js";let e=0;class a{constructor(t,a,r,o){this.name=t,this.set=a,this.base=r,this.modified=o,this.id=e++}toString(){let{name:t}=this;for(let e of this.modified)e.name&&(t=`${e.name}(${t})`);return t}static define(t,e){let r="string"==typeof t?t:"?";if(t instanceof a&&(e=t),null==e?void 0:e.base)throw new Error("Can not derive from a modified tag");let o=new a(r,[],null,[]);if(o.set.push(o),e)for(let a of e.set)o.set.push(a);return o}static defineModifier(t){let e=new o(t);return t=>t.modified.indexOf(e)>-1?t:o.get(t.base||t,t.modified.concat(e).sort((t,e)=>t.id-e.id))}}let r=0;class o{constructor(t){this.name=t,this.instances=[],this.id=r++}static get(t,e){if(!e.length)return t;let r=e[0].instances.find(a=>{return a.base==t&&(r=e,o=a.modified,r.length==o.length&&r.every((t,e)=>t==o[e]));var r,o});if(r)return r;let s=[],i=new a(t.name,s,t,e);for(let a of e)a.instances.push(i);let l=function(t){let e=[[]];for(let a=0;a<t.length;a++)for(let r=0,o=e.length;r<o;r++)e.push(e[r].concat(t[a]));return e.sort((t,e)=>e.length-t.length)}(e);for(let a of t.set)if(!a.modified.length)for(let t of l)s.push(o.get(a,t));return i}}function s(t){let e=Object.create(null);for(let a in t){let r=t[a];Array.isArray(r)||(r=[r]);for(let t of a.split(" "))if(t){let a=[],o=2,s=t;for(let e=0;;){if("..."==s&&e>0&&e+3==t.length){o=1;break}let r=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(s);if(!r)throw new RangeError("Invalid path: "+t);if(a.push("*"==r[0]?"":'"'==r[0][0]?JSON.parse(r[0]):r[0]),e+=r[0].length,e==t.length)break;let i=t[e++];if(e==t.length&&"!"==i){o=0;break}if("/"!=i)throw new RangeError("Invalid path: "+t);s=t.slice(e)}let i=a.length-1,n=a[i];if(!n)throw new RangeError("Invalid path: "+t);let c=new l(r,o,i>0?a.slice(0,i):null);e[n]=c.sort(e[n])}}return i.add(e)}const i=new t;class l{constructor(t,e,a,r){this.tags=t,this.mode=e,this.context=a,this.next=r}get opaque(){return 0==this.mode}get inherit(){return 1==this.mode}sort(t){return!t||t.depth<this.depth?(this.next=t,this):(t.next=this.sort(t.next),t)}get depth(){return this.context?this.context.length:0}}function n(t,e){let a=Object.create(null);for(let s of t)if(Array.isArray(s.tag))for(let t of s.tag)a[t.id]=s.class;else a[s.tag.id]=s.class;let{scope:r,all:o=null}=e||{};return{style:t=>{let e=o;for(let r of t)for(let t of r.set){let r=a[t.id];if(r){e=e?e+" "+r:r;break}}return e},scope:r}}function c(t,e,a,r=0,o=t.length){let s=new h(r,Array.isArray(e)?e:[e],a);s.highlightRange(t.cursor(),r,o,"",s.highlighters),s.flush(o)}l.empty=new l([],2,null);class h{constructor(t,e,a){this.at=t,this.highlighters=e,this.span=a,this.class=""}startSpan(t,e){e!=this.class&&(this.flush(t),t>this.at&&(this.at=t),this.class=e)}flush(t){t>this.at&&this.class&&this.span(this.at,t,this.class)}highlightRange(e,a,r,o,s){let{type:n,from:c,to:h}=e;if(c>=r||h<=a)return;n.isTop&&(s=this.highlighters.filter(t=>!t.scope||t.scope(n)));let f=o,g=function(t){let e=t.type.prop(i);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}(e)||l.empty,u=function(t,e){let a=null;for(let r of t){let t=r.style(e);t&&(a=a?a+" "+t:t)}return a}(s,g.tags);if(u&&(f&&(f+=" "),f+=u,1==g.mode&&(o+=(o?" ":"")+u)),this.startSpan(Math.max(a,c),f),g.opaque)return;let m=e.tree&&e.tree.prop(t.mounted);if(m&&m.overlay){let t=e.node.enter(m.overlay[0].from+c,1),i=this.highlighters.filter(t=>!t.scope||t.scope(m.tree.type)),l=e.firstChild();for(let n=0,g=c;;n++){let u=n<m.overlay.length?m.overlay[n]:null,d=u?u.from+c:h,p=Math.max(a,g),k=Math.min(r,d);if(p<k&&l)for(;e.from<k&&(this.highlightRange(e,p,k,o,s),this.startSpan(Math.min(k,e.to),f),!(e.to>=d)&&e.nextSibling()););if(!u||d>r)break;g=u.to+c,g>a&&(this.highlightRange(t.cursor(),Math.max(a,u.from+c),Math.min(r,g),"",i),this.startSpan(Math.min(r,g),f))}l&&e.parent()}else if(e.firstChild()){m&&(o="");do{if(!(e.to<=a)){if(e.from>=r)break;this.highlightRange(e,a,r,o,s),this.startSpan(Math.min(r,e.to),f)}}while(e.nextSibling());e.parent()}}}const f=a.define,g=f(),u=f(),m=f(u),d=f(u),p=f(),k=f(p),b=f(p),w=f(),N=f(w),y=f(),v=f(),O=f(),M=f(O),S=f(),C={comment:g,lineComment:f(g),blockComment:f(g),docComment:f(g),name:u,variableName:f(u),typeName:m,tagName:f(m),propertyName:d,attributeName:f(d),className:f(u),labelName:f(u),namespace:f(u),macroName:f(u),literal:p,string:k,docString:f(k),character:f(k),attributeValue:f(k),number:b,integer:f(b),float:f(b),bool:f(p),regexp:f(p),escape:f(p),color:f(p),url:f(p),keyword:y,self:f(y),null:f(y),atom:f(y),unit:f(y),modifier:f(y),operatorKeyword:f(y),controlKeyword:f(y),definitionKeyword:f(y),moduleKeyword:f(y),operator:v,derefOperator:f(v),arithmeticOperator:f(v),logicOperator:f(v),bitwiseOperator:f(v),compareOperator:f(v),updateOperator:f(v),definitionOperator:f(v),typeOperator:f(v),controlOperator:f(v),punctuation:O,separator:f(O),bracket:M,angleBracket:f(M),squareBracket:f(M),paren:f(M),brace:f(M),content:w,heading:N,heading1:f(N),heading2:f(N),heading3:f(N),heading4:f(N),heading5:f(N),heading6:f(N),contentSeparator:f(w),list:f(w),quote:f(w),emphasis:f(w),strong:f(w),link:f(w),monospace:f(w),strikethrough:f(w),inserted:f(),deleted:f(),changed:f(),invalid:f(),meta:S,documentMeta:f(S),annotation:f(S),processingInstruction:f(S),definition:a.defineModifier("definition"),constant:a.defineModifier("constant"),function:a.defineModifier("function"),standard:a.defineModifier("standard"),local:a.defineModifier("local"),special:a.defineModifier("special")};for(let E in C){let t=C[E];t instanceof a&&(t.name=E)}n([{tag:C.link,class:"tok-link"},{tag:C.heading,class:"tok-heading"},{tag:C.emphasis,class:"tok-emphasis"},{tag:C.strong,class:"tok-strong"},{tag:C.keyword,class:"tok-keyword"},{tag:C.atom,class:"tok-atom"},{tag:C.bool,class:"tok-bool"},{tag:C.url,class:"tok-url"},{tag:C.labelName,class:"tok-labelName"},{tag:C.inserted,class:"tok-inserted"},{tag:C.deleted,class:"tok-deleted"},{tag:C.literal,class:"tok-literal"},{tag:C.string,class:"tok-string"},{tag:C.number,class:"tok-number"},{tag:[C.regexp,C.escape,C.special(C.string)],class:"tok-string2"},{tag:C.variableName,class:"tok-variableName"},{tag:C.local(C.variableName),class:"tok-variableName tok-local"},{tag:C.definition(C.variableName),class:"tok-variableName tok-definition"},{tag:C.special(C.variableName),class:"tok-variableName2"},{tag:C.definition(C.propertyName),class:"tok-propertyName tok-definition"},{tag:C.typeName,class:"tok-typeName"},{tag:C.namespace,class:"tok-namespace"},{tag:C.className,class:"tok-className"},{tag:C.macroName,class:"tok-macroName"},{tag:C.propertyName,class:"tok-propertyName"},{tag:C.operator,class:"tok-operator"},{tag:C.comment,class:"tok-comment"},{tag:C.meta,class:"tok-meta"},{tag:C.invalid,class:"tok-invalid"},{tag:C.punctuation,class:"tok-punctuation"}]);export{a as T,n as a,c as h,s,C as t};
