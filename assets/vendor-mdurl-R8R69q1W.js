const t={};function n(i,s){"string"!=typeof s&&(s=n.defaultChars);const e=function(n){let i=t[n];if(i)return i;i=t[n]=[];for(let t=0;t<128;t++){const n=String.fromCharCode(t);i.push(n)}for(let t=0;t<n.length;t++){const s=n.charCodeAt(t);i[s]="%"+("0"+s.toString(16).toUpperCase()).slice(-2)}return i}(s);return i.replace(/(%[a-f0-9]{2})+/gi,function(t){let n="";for(let i=0,s=t.length;i<s;i+=3){const o=parseInt(t.slice(i+1,i+3),16);if(o<128)n+=e[o];else{if(192==(224&o)&&i+3<s){const s=parseInt(t.slice(i+4,i+6),16);if(128==(192&s)){const t=o<<6&1984|63&s;n+=t<128?"��":String.fromCharCode(t),i+=3;continue}}if(224==(240&o)&&i+6<s){const s=parseInt(t.slice(i+4,i+6),16),e=parseInt(t.slice(i+7,i+9),16);if(128==(192&s)&&128==(192&e)){const t=o<<12&61440|s<<6&4032|63&e;n+=t<2048||t>=55296&&t<=57343?"���":String.fromCharCode(t),i+=6;continue}}if(240==(248&o)&&i+9<s){const s=parseInt(t.slice(i+4,i+6),16),e=parseInt(t.slice(i+7,i+9),16),r=parseInt(t.slice(i+10,i+12),16);if(128==(192&s)&&128==(192&e)&&128==(192&r)){let t=o<<18&1835008|s<<12&258048|e<<6&4032|63&r;t<65536||t>1114111?n+="����":(t-=65536,n+=String.fromCharCode(55296+(t>>10),56320+(1023&t))),i+=9;continue}}n+="�"}}return n})}n.defaultChars=";/?:@&=+$,#",n.componentChars="";const i={};function s(t,n,e){"string"!=typeof n&&(e=n,n=s.defaultChars),void 0===e&&(e=!0);const o=function(t){let n=i[t];if(n)return n;n=i[t]=[];for(let i=0;i<128;i++){const t=String.fromCharCode(i);/^[0-9a-z]$/i.test(t)?n.push(t):n.push("%"+("0"+i.toString(16).toUpperCase()).slice(-2))}for(let i=0;i<t.length;i++)n[t.charCodeAt(i)]=t[i];return n}(n);let r="";for(let i=0,s=t.length;i<s;i++){const n=t.charCodeAt(i);if(e&&37===n&&i+2<s&&/^[0-9a-f]{2}$/i.test(t.slice(i+1,i+3)))r+=t.slice(i,i+3),i+=2;else if(n<128)r+=o[n];else if(n>=55296&&n<=57343){if(n>=55296&&n<=56319&&i+1<s){const n=t.charCodeAt(i+1);if(n>=56320&&n<=57343){r+=encodeURIComponent(t[i]+t[i+1]),i++;continue}}r+="%EF%BF%BD"}else r+=encodeURIComponent(t[i])}return r}function e(t){let n="";return n+=t.protocol||"",n+=t.slashes?"//":"",n+=t.auth?t.auth+"@":"",t.hostname&&-1!==t.hostname.indexOf(":")?n+="["+t.hostname+"]":n+=t.hostname||"",n+=t.port?":"+t.port:"",n+=t.pathname||"",n+=t.search||"",n+=t.hash||"",n}function o(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}s.defaultChars=";/?:@&=+$,-_.!~*'()#",s.componentChars="-_.!~*'()";const r=/^([a-z0-9.+-]+:)/i,f=/:[0-9]*$/,c=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),h=["'"].concat(l),u=["%","/","?",";","#"].concat(h),a=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,g=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,I={javascript:!0,"javascript:":!0},d={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function $(t,n){if(t&&t instanceof o)return t;const i=new o;return i.parse(t,n),i}o.prototype.parse=function(t,n){let i,s,e,o=t;if(o=o.trim(),!n&&1===t.split("#").length){const t=c.exec(o);if(t)return this.pathname=t[1],t[2]&&(this.search=t[2]),this}let f=r.exec(o);if(f&&(f=f[0],i=f.toLowerCase(),this.protocol=f,o=o.substr(f.length)),(n||f||o.match(/^\/\/[^@\/]+@[^@\/]+/))&&(e="//"===o.substr(0,2),!e||f&&I[f]||(o=o.substr(2),this.slashes=!0)),!I[f]&&(e||f&&!d[f])){let t,n,i=-1;for(let f=0;f<a.length;f++)s=o.indexOf(a[f]),-1!==s&&(-1===i||s<i)&&(i=s);n=-1===i?o.lastIndexOf("@"):o.lastIndexOf("@",i),-1!==n&&(t=o.slice(0,n),o=o.slice(n+1),this.auth=t),i=-1;for(let f=0;f<u.length;f++)s=o.indexOf(u[f]),-1!==s&&(-1===i||s<i)&&(i=s);-1===i&&(i=o.length),":"===o[i-1]&&i--;const e=o.slice(0,i);o=o.slice(i),this.parseHost(e),this.hostname=this.hostname||"";const r="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!r){const t=this.hostname.split(/\./);for(let n=0,i=t.length;n<i;n++){const i=t[n];if(i&&!i.match(p)){let s="";for(let t=0,n=i.length;t<n;t++)i.charCodeAt(t)>127?s+="x":s+=i[t];if(!s.match(p)){const s=t.slice(0,n),e=t.slice(n+1),r=i.match(g);r&&(s.push(r[1]),e.unshift(r[2])),e.length&&(o=e.join(".")+o),this.hostname=s.join(".");break}}}}this.hostname.length>255&&(this.hostname=""),r&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const l=o.indexOf("#");-1!==l&&(this.hash=o.substr(l),o=o.slice(0,l));const h=o.indexOf("?");return-1!==h&&(this.search=o.substr(h),o=o.slice(0,h)),o&&(this.pathname=o),d[i]&&this.hostname&&!this.pathname&&(this.pathname=""),this},o.prototype.parseHost=function(t){let n=f.exec(t);n&&(n=n[0],":"!==n&&(this.port=n.substr(1)),t=t.substr(0,t.length-n.length)),t&&(this.hostname=t)};const _=Object.freeze(Object.defineProperty({__proto__:null,decode:n,encode:s,format:e,parse:$},Symbol.toStringTag,{value:"Module"}));export{n as d,s as e,e as f,_ as m,$ as u};
