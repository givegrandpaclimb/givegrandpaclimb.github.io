import{l as t}from"./vendor-aws-sdk-util-locate-window-DyHfrE-U.js";import{s as e}from"./vendor-aws-crypto-supports-web-crypto-BM5mncbd.js";import{c as n}from"./vendor-aws-crypto-util-BWmqBKNk.js";function r(t){return"string"==typeof t?0===t.length:0===t.byteLength}var o={name:"SHA-1"},s={name:"HMAC",hash:o},i=new Uint8Array([218,57,163,238,94,107,75,13,50,85,191,239,149,96,24,144,175,216,7,9]),h=function(){function e(e){this.toHash=new Uint8Array(0),void 0!==e&&(this.key=new Promise(function(n,r){t().crypto.subtle.importKey("raw",a(e),s,!1,["sign"]).then(n,r)}),this.key.catch(function(){}))}return e.prototype.update=function(t){if(!r(t)){var e=a(t),n=new Uint8Array(this.toHash.byteLength+e.byteLength);n.set(this.toHash,0),n.set(e,this.toHash.byteLength),this.toHash=n}},e.prototype.digest=function(){var e=this;return this.key?this.key.then(function(n){return t().crypto.subtle.sign(s,n,e.toHash).then(function(t){return new Uint8Array(t)})}):r(this.toHash)?Promise.resolve(i):Promise.resolve().then(function(){return t().crypto.subtle.digest(o,e.toHash)}).then(function(t){return Promise.resolve(new Uint8Array(t))})},e.prototype.reset=function(){this.toHash=new Uint8Array(0)},e}();function a(t){return"string"==typeof t?(e=t,(new TextEncoder).encode(e)):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t);var e}var u=function(){function r(n){if(!e(t()))throw new Error("SHA1 not supported");this.hash=new h(n)}return r.prototype.update=function(t,e){this.hash.update(n(t))},r.prototype.digest=function(){return this.hash.digest()},r.prototype.reset=function(){this.hash.reset()},r}();export{u as S};
