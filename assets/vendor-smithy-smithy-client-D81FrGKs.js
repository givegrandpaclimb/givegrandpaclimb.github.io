import{c as t}from"./vendor-smithy-middleware-stack-DWW4-6o4.js";import{N as e}from"./vendor-smithy-core-Eai9z2ch.js";import{S as i,A as r}from"./vendor-smithy-types-CI1XBBMP.js";class s{constructor(e){this.config=e,this.middlewareStack=t()}send(t,e,i){const r="function"!=typeof e?e:void 0,s="function"==typeof e?e:i;let n;if(void 0===r&&!0===this.config.cacheMiddleware){this.handlers||(this.handlers=new WeakMap);const e=this.handlers;e.has(t.constructor)?n=e.get(t.constructor):(n=t.resolveMiddleware(this.middlewareStack,this.config,r),e.set(t.constructor,n))}else delete this.handlers,n=t.resolveMiddleware(this.middlewareStack,this.config,r);if(!s)return n(t).then(t=>t.output);n(t).then(t=>s(null,t.output),t=>s(t)).catch(()=>{})}destroy(){this.config?.requestHandler?.destroy?.(),delete this.handlers}}const n="***SensitiveInformation***";function o(t,i){if(null==i)return i;const r=e.of(t);if(r.getMergedTraits().sensitive)return n;if(r.isListSchema()){if(r.getValueSchema().getMergedTraits().sensitive)return n}else if(r.isMapSchema()){if(r.getKeySchema().getMergedTraits().sensitive||r.getValueSchema().getMergedTraits().sensitive)return n}else if(r.isStructSchema()&&"object"==typeof i){const t=i,e={};for(const[i,s]of r.structIterator())null!=t[i]&&(e[i]=o(s,t[i]));return e}return i}class a{constructor(){this.middlewareStack=t()}static classBuilder(){return new c}resolveMiddlewareWithContext(t,e,r,{middlewareFn:s,clientName:n,commandName:o,inputFilterSensitiveLog:a,outputFilterSensitiveLog:c,smithyContext:d,additionalContext:u,CommandCtor:l}){for(const i of s.bind(this)(l,t,e,r))this.middlewareStack.use(i);const h=t.concat(this.middlewareStack),{logger:m}=e,p={logger:m,clientName:n,commandName:o,inputFilterSensitiveLog:a,outputFilterSensitiveLog:c,[i]:{commandInstance:this,...d},...u},{requestHandler:f}=e;return h.resolve(t=>f.handle(t.request,r||{}),p)}}class c{constructor(){this._init=()=>{},this._ep={},this._middlewareFn=()=>[],this._commandName="",this._clientName="",this._additionalContext={},this._smithyContext={},this._inputFilterSensitiveLog=void 0,this._outputFilterSensitiveLog=void 0,this._serializer=null,this._deserializer=null}init(t){this._init=t}ep(t){return this._ep=t,this}m(t){return this._middlewareFn=t,this}s(t,e,i={}){return this._smithyContext={service:t,operation:e,...i},this}c(t={}){return this._additionalContext=t,this}n(t,e){return this._clientName=t,this._commandName=e,this}f(t=t=>t,e=t=>t){return this._inputFilterSensitiveLog=t,this._outputFilterSensitiveLog=e,this}ser(t){return this._serializer=t,this}de(t){return this._deserializer=t,this}sc(t){return this._operationSchema=t,this._smithyContext.operationSchema=t,this}build(){const t=this;let e;return e=class extends a{static getEndpointParameterInstructions(){return t._ep}constructor(...[e]){super(),this.serialize=t._serializer,this.deserialize=t._deserializer,this.input=e??{},t._init(this),this.schema=t._operationSchema}resolveMiddleware(i,r,s){return this.resolveMiddlewareWithContext(i,r,s,{CommandCtor:e,middlewareFn:t._middlewareFn,clientName:t._clientName,commandName:t._commandName,inputFilterSensitiveLog:t._inputFilterSensitiveLog??(t._operationSchema?o.bind(null,t._operationSchema.input):t=>t),outputFilterSensitiveLog:t._outputFilterSensitiveLog??(t._operationSchema?o.bind(null,t._operationSchema.output):t=>t),smithyContext:t._smithyContext,additionalContext:t._additionalContext})}}}}const d="***SensitiveInformation***";class u extends Error{constructor(t){super(t.message),Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=t.name,this.$fault=t.$fault,this.$metadata=t.$metadata}static isInstance(t){if(!t)return!1;const e=t;return u.prototype.isPrototypeOf(e)||Boolean(e.$fault)&&Boolean(e.$metadata)&&("client"===e.$fault||"server"===e.$fault)}static[Symbol.hasInstance](t){if(!t)return!1;const e=t;return this===u?u.isInstance(t):!!u.isInstance(t)&&(e.name&&this.name?this.prototype.isPrototypeOf(t)||e.name===this.name:this.prototype.isPrototypeOf(t))}}const l=(t,e={})=>{Object.entries(e).filter(([,t])=>void 0!==t).forEach(([e,i])=>{null!=t[e]&&""!==t[e]||(t[e]=i)});const i=t.message||t.Message||"UnknownError";return t.message=i,delete t.Message,t},h=t=>({output:e,parsedBody:i,errorCode:r})=>{(({output:t,parsedBody:e,exceptionCtor:i,errorCode:r})=>{const s=m(t),n=s.httpStatusCode?s.httpStatusCode+"":void 0,o=new i({name:e?.code||e?.Code||r||n||"UnknownError",$fault:"client",$metadata:s});throw l(o,e)})({output:e,parsedBody:i,exceptionCtor:t,errorCode:r})},m=t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),p=t=>{switch(t){case"standard":case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},f=t=>Object.assign((t=>{const e=[];for(const i in r){const s=r[i];void 0!==t[s]&&e.push({algorithmId:()=>s,checksumConstructor:()=>t[s]})}return{addChecksumAlgorithm(t){e.push(t)},checksumAlgorithms:()=>e}})(t),(t=>({setRetryStrategy(e){t.retryStrategy=e},retryStrategy:()=>t.retryStrategy}))(t)),y=t=>Object.assign((t=>{const e={};return t.checksumAlgorithms().forEach(t=>{e[t.algorithmId()]=t.checksumConstructor()}),e})(t),(t=>{const e={};return e.retryStrategy=t.retryStrategy(),e})(t)),g=t=>Array.isArray(t)?t:[t],S=t=>{const e="#text";for(const i in t)t.hasOwnProperty(i)&&void 0!==t[i][e]?t[i]=t[i][e]:"object"==typeof t[i]&&null!==t[i]&&(t[i]=S(t[i]));return t},v=t=>null!=t;class _{trace(){}debug(){}info(){}warn(){}error(){}}function C(t,e,i){let r,s,n;if(void 0===e&&void 0===i)r={},n=t;else{if(r=t,"function"==typeof e)return s=e,n=i,w(r,s,n);n=e}for(const o of Object.keys(n))Array.isArray(n[o])?x(r,null,n,o):r[o]=n[o];return r}const w=(t,e,i)=>C(t,Object.entries(i).reduce((t,[i,r])=>(Array.isArray(r)?t[i]=r:t[i]="function"==typeof r?[e,r()]:[e,r],t),{})),x=(t,e,i,r)=>{let[s,n]=i[r];if("function"==typeof n){let e;const i=void 0===s&&null!=(e=n()),o="function"==typeof s&&!!s(void 0)||"function"!=typeof s&&!!s;i?t[r]=e:o&&(t[r]=n())}else{const e=void 0===s&&null!=n,i="function"==typeof s&&!!s(n)||"function"!=typeof s&&!!s;(e||i)&&(t[r]=n)}},b=t=>t.toISOString().replace(".000Z","Z");export{a as C,_ as N,u as S,d as a,f as b,s as c,l as d,S as e,g,v as i,p as l,C as m,y as r,b as s,h as w};
