const e={name:"ssecMiddleware",step:"initialize",tags:["SSE"],override:!0},t=t=>({applyToStack:a=>{var s;a.add((s=t,e=>async t=>{const a={...t.input},n=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}];for(const e of n){const t=a[e.target];if(t){let n;"string"==typeof t?r(t,s)?n=s.base64Decoder(t):(n=s.utf8Decoder(t),a[e.target]=s.base64Encoder(n)):(n=ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t),a[e.target]=s.base64Encoder(n));const o=new s.md5;o.update(n),a[e.hash]=s.base64Encoder(await o.digest())}}return e({...t,input:a})}),e)}});function r(e,t){if(!/^(?:[A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e))return!1;try{return 32===t.base64Decoder(e).length}catch{return!1}}export{t as g};
